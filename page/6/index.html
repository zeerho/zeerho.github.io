<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.0" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="Just a repo for documents">
<meta property="og:type" content="website">
<meta property="og:title" content="Tags">
<meta property="og:url" content="http://yoursite.com/tags/index.html">
<meta property="og:site_name" content="zeerho">
<meta property="og:description" content="Just a repo for documents">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-06-05T02:37:10.245Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tags">
<meta name="twitter:description" content="Just a repo for documents">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.0.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/tags/"/>





  <title>zeerho</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">zeerho</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/电脑相关/硬件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zeerho">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zeerho">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/电脑相关/硬件/" itemprop="url">硬件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-01T09:00:00+08:00">2017-01-01</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="机械硬盘"><a href="#机械硬盘" class="headerlink" title="机械硬盘"></a>机械硬盘</h1><p>基本参数：</p>
<ul>
<li><strong>磁头 head</strong>：用来读写数据的探针，每个磁头对应一个盘面。现代硬盘的磁盘通常是双面读写，故磁头数量通常为磁盘数量的两倍。</li>
<li><strong>磁道 track</strong>：同一盘面上位于同一半径处的同心圆磁轨。</li>
<li><strong>柱面 cylinder</strong>：所有盘面上半径相同的磁道的统称。</li>
<li><strong>扇区 sector</strong>：数据存储的基本单位。老式硬盘每个扇区对应的圆心角相等，新式硬盘为节约磁盘空间，改为每个扇区对应的圆周长度相等。 </li>
<li><strong>分配单元（旧称“簇”）</strong>：DOS 系统存储文件的基本逻辑单位，为扇区的整数倍，因存储介质的不同、存储介质容量的不同、分区格式的不同而不同。</li>
</ul>
<p>分区</p>
<ul>
<li>MBR（Master Boot Record）分区表格式<ul>
<li>磁盘的第1个扇区保存两个数据<ul>
<li><strong>主要启动记录区（MBR）</strong>：可以安装开机管理程序的地方</li>
<li><strong>分区表（partition table）</strong>：记录整个硬盘的分区状态</li>
</ul>
</li>
<li>磁盘的第1个扇区中的分区表将磁盘分为<strong>主要（Primary）分区</strong>和<strong>扩展（Extended）分区</strong>，扩展分区的数量为{0,1}</li>
<li>扩展分区的第1个扇区中的分区表将扩展分区分为若干<strong>逻辑（Logical）分区</strong>（此项可选）</li>
</ul>
</li>
<li>GPT（GUID partition table）分区表格式<ul>
<li>为了兼容 512Bytes 和 4K 的扇区，改用<strong>逻辑区块地址（Logical Block Address，LBA）</strong>来定义扇区<ul>
<li>LBA0（MBR 兼容区块）：分为两个部分。第一部分储存开机管理程序，第二部分放入一个特殊标志，表示此磁盘为 GPT 分区格式。</li>
<li>LBA1（GPT 表头记录）：记录了分区表本身的位置和大小，同时记录了备份用的 GPT 分区的位置，并放置了分区表的校验机制码（CRC32）</li>
<li>LBA2-33（实际记录分区信息处）：每个 LBA 可以记录 4 个分区记录，每个分区最大 8ZB，最多可有 128 个分区</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="固态硬盘"><a href="#固态硬盘" class="headerlink" title="固态硬盘"></a>固态硬盘</h1><h2 id="怎样延长使用寿命："><a href="#怎样延长使用寿命：" class="headerlink" title="怎样延长使用寿命："></a>怎样延长使用寿命：</h2><ol>
<li>确保硬盘读写模式是AHCI。<br>在AHCI 1.0规范中，Intel引入了NCQ（Native Command Queuing）功能。支持NCQ技术的硬盘在接到读写指令后，会根据指令对访问地址进行重新排序，减少了读取时间，使数据传输更为高效，同时也有效地延长了硬盘的使用寿命。</li>
<li>确保你的电脑开启了TRIM。<br>一般来说，WIN7以上操作系统都是默认开启的，那如何确认呢？只需要在命令提示符（管理员模式）内输入这串命令：fsutil behavior query DisableDeleteNotify<br>如果反馈的结果是0，证明是开启了；如果反馈的结果是1，那就代表没有开启，可能就是你的系统出了问题，最好更新下补丁或者重新安装下。顺便提一句，XP系统不支持TRIM哦，所以还是再建议一下：XP系统用SSD比较奢侈。</li>
<li>确保4K对齐。<br>这个名词，想象大家都很熟悉了~根据测算，4K没有对齐的情况下，SSD的效率会损失一半，寿命也大大减少，所以这是一个非常重要的设置。至于方法，很简单了！只需要用正版的系统镜像安装系统，系统安装过程一定会把4K对齐的！</li>
<li>关闭Windows Search服务和Superfetch服务。<br>这两项服务更适合速度较慢的机型硬盘，在我们不需要进行搜索或者运行程序的时候，它就已经做了一些“预备工作”，以便我们实际工作时可以更快的响应，而对于SSD来说，完全没有必要，反而增加读写次数，因此还是关掉为好。<br>方法如下：<ol>
<li>运行Services.msc回车</li>
<li>找到Windows Search和SuperFetch选项，右键单击属性</li>
<li>将其停止</li>
</ol>
</li>
</ol>
<h2 id="选购"><a href="#选购" class="headerlink" title="选购"></a>选购</h2><ol>
<li>主控<br>推荐浦科特、闪迪</li>
<li>闪存<br>优选MLC。SLC贵，TLC速度略慢寿命略短（相对而言）。<br>自家生产：Intel、美光、三星、海力士、东芝、闪迪。<br>使用他家原厂：浦科特、建兴、海盗船等等。</li>
<li>固件<br>固件影响效率。具备自主研发固件的厂商：Intel、英睿达、浦科特、OCZ、三星等。</li>
<li>缓存<br>缓存延长寿命，略提高TLC的速度。缓存不必须，若有则越大越好。</li>
<li>性能<br>4k随机读写速度（4k IOPS）</li>
<li>断电保护</li>
<li>功耗</li>
<li>售后</li>
</ol>
<h2 id="硬盘相关知识科普"><a href="#硬盘相关知识科普" class="headerlink" title="硬盘相关知识科普"></a>硬盘相关知识科普</h2><p><strong>什么是簇？</strong><br>　　最开始从WIN98一直到WIN XP，都是机械硬盘的天下，容量有限。而且绝大多数机械硬盘默认扇区都是512K大小。分区的时候有一个东西叫做物理存储单元，俗称簇。分区的时候可以指定这个大小。这个簇不是硬盘的物理结构，而是使用方法。<br>　　这个簇很有意思，一个簇只能容纳一个文件，但是一个簇可以包含多个扇区，当时流行小簇，因为小簇不“浪费”磁盘。 打个比方，比如我的簇是10K，文件是25K，我需要保存这个文件需要占用3个簇;那如果簇是5K，那么我想保存该数据，需要使用5个磁盘扇区单元。显得磁盘利用率更高。<br>　　那这么看来，是不是簇越小越好呢?不是!因为一个簇是一个磁盘最小的管理存储单元，如果一个文件读了4个单元和400个单元，你觉得哪个更快呢? 而且目前大容量硬盘已经不在乎那几K了，簇这个东西没必要太小。 </p>
<p><strong>簇和扇区有什么区别？</strong><br>　　簇和扇区不是属于一个范畴。簇是系统在硬盘上读写文件时的单位，是一个数据块。而扇区是硬盘划分的最小单位值，就是簇（数据块）占用的地方。<br>　　簇的大小大于扇区的大小。硬盘每簇的扇区数与硬盘的总容量大小有关。扇区是存储介质上可由硬件寻址的基本单位，x86系统几乎总是定义512字节的扇区大小；簇是许多文件系统格式使用的可寻址数据块，簇的大小总是扇区大小的整数倍，且不同文件系统对于不同大小的卷（分区）会有不同的默认簇大小，比如FAT32对于8GB以下的分区，默认簇大小为4KB，对于8GB～16GB的分区，默认簇大小为16个扇区（8KB），NTFS对于大于2GB的分区，默认簇大小为8个扇区（4KB）。<br>　　打个比方，你（系统）要在仓库（仓库可视为硬盘）里存放一些书（数据）。你先把书分门别类放到一些大纸箱（簇）里，然后放进仓库，纸箱的体积是根据你仓库大小来决定的，而仓库始终划分成单位为0.1m?的小格子（扇区），仓库大了，纸箱就大些，仓库小了，纸箱就小些。</p>
<p><strong>存储器中说的块、页、簇、扇区对应的关系是什么？</strong><br>　　简单的说，就是块可以包含若干页，页可以包含若干簇，簇可以包含若干扇区。这里“若干”一般是二的方次。例如：一簇等于128扇区，一页等于64簇，一块等于4页，那么一块就等于4x64x128扇区。</p>
<p><strong>什么是4K?</strong><br>　　绝大多数的机械硬盘默认是512字节的扇区，采用的是DRAM作为存储介质; 而机械硬盘，无论是SLC颗粒还是MLC颗粒，都属于NAND闪存存储单元。 这种硬盘的扇区是4K，这就是4K的由来!<br>　　由于win98和win xp大多数采用FAT格式。 这种格式具备32位、16位磁盘格式相互兼容所以被大多数朋友采纳作为系统盘。 但是到了Vista时代，已经不需要16位的DOS了，所以全部采用了纯32位的NTFS格式，NTFS格式也升级到了第五代。 其实XP时代就有NTFS，虽然这种格式性能更高更安全，但是兼容性差，所以一直不作为系统分区，一般作为存储分区。<br>　　NTFS格式有一个特性，那就是起始簇的位置!<br>　　NTFS分区起始位置不是从0开始，而是从LBA63开始，就是第六十三个扇区开始开始存储。<br>　　而且NFTS默认认为扇区是512字节大小，而不是智能调节到第六十三个扇区。<br>　　这样问题就来了，63个扇区×512字节=31.5K，也就是说，磁盘的前31.5K是不能被使用的。<br>　　使用机械硬盘就算了，使用固态硬盘，存储第一个字，也需要占用31.5K-35.5K之间的磁盘扇区。<br>　　最过分的是这样子排列下去，恰好每到一个扇区的4K位置，就会造成一个数据存2个扇区的情况。<br>　　而且这样排列，只要到了那个能被4K整除的位置就100%占用了2个扇区，哪怕只写一个字。<br>　　固态硬盘无论是MLC还是SLC，都是有写入读取次数的，这样极大的损伤了性能和寿命。 而且，增加了读取次数。 这个时候无论簇是多大，都会造成性能和空间的浪费。<br>　　所以这个问题就叫做4K! </p>
<p><strong>什么是4K对齐？</strong>　　<br>　　硬盘分区的时候有一个东西叫做物理存储单元，俗称簇。分区的时候可以指定这个大小。这个簇不是硬盘的物理结构，而是使用方法。随着时代发展，硬盘容量不断扩展，使得之前定义的每个扇区512字节不再是那么的合理，于是将每个扇区512字节改为每个扇区4096 个字节，也就是现在常说的“4K扇区”。随着NTFS成为了标准的硬盘文件系统，其文件系统的默认分配单元大小（簇）也是4096字节，为了使簇与扇区相对应，即使物理硬盘分区与计算机使用的逻辑分区对齐，保证硬盘读写效率，所以，有了“4K对齐”的概念。　　传统硬盘的每个扇区固定是512字节，新标准的”4K扇区”的硬盘，硬盘厂商为了保证与操作系统兼容性，也将扇区模拟成512B扇区，这时就会有4K扇区和4K簇不对齐的情况发生。所以就要用“4K对齐的方式，将硬盘模拟扇区对齐成“4k扇区”。“4K对齐”就是将硬盘扇区对齐到8的整数倍个模拟扇区，即512Bx8=4096B，4096字节即是4K。所以只要是8的倍数都是4K对齐了。</p>
<h1 id="芯片组"><a href="#芯片组" class="headerlink" title="芯片组"></a>芯片组</h1><p>芯片组是一块主板的核心，是主板南桥北桥的统称，决定了主板的绝大部分特性。</p>
<p>Intel 目前的芯片组从低到高分为 H、B、Q、Z、X 系列。</p>
<ul>
<li>H：低端入门，适合奔腾、赛扬、i3 系列。</li>
<li>B：中端，适合不带 K 的 i5、i7 系列。</li>
<li>Q：嵌入式或工控主板。</li>
<li>Z：带 K 处理器超频。</li>
<li>X：高端至尊处理器，如 i9、至尊 i7。</li>
</ul>
<p>AMD 目前的芯片组从低到高分为 A、B、X 系列，以及仅支持 Threadripper 的 X399 芯片组。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/字符集和编码/字符集和编码/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zeerho">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zeerho">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/字符集和编码/字符集和编码/" itemprop="url">字符集和编码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-01T09:00:00+08:00">2017-01-01</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="一些主要编码的区别"><a href="#一些主要编码的区别" class="headerlink" title="一些主要编码的区别"></a>一些主要编码的区别</h1><p>摘自 <a href="https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/" target="_blank" rel="noopener">developerWorks-深入分析 Java 中的中文编码问题</a></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/01/字符集和编码/字符集和编码/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/工具/Maven/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zeerho">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zeerho">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/工具/Maven/" itemprop="url">Maven</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-01T09:00:00+08:00">2017-01-01</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>Maven 是一个项目管理工具，包含：</p>
<ul>
<li>一个项目对象模型（Project Object Model）</li>
<li>一组标准集合</li>
<li>一个项目生命周期（Project Lifecycle）</li>
<li>一个依赖管理系统（Dependency Management System）</li>
<li>用来运行定义在生命周期阶段（phase）中插件目标（goal）的逻辑</li>
</ul>
<h1 id="基本步骤"><a href="#基本步骤" class="headerlink" title="基本步骤"></a>基本步骤</h1><ul>
<li><code>mvn install:install-file  -Dfile=D:/xxx.jar  -DgroupId=xxx.xxx  -DartifactId=xxx -Dversion=x.x -Dpackaging=jar</code> 将指定 jar 包安装至本地库</li>
</ul>
<p>若要使打包得到的 .jar 中包含 main 方法（即为可执行 .jar），需要借助 <code>maven-shade-plugin</code>，配置该插件如下：</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/01/工具/Maven/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/操作系统/Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zeerho">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zeerho">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/操作系统/Linux/" itemprop="url">Linux</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-01T09:00:00+08:00">2017-01-01</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h1><h2 id="centos7"><a href="#centos7" class="headerlink" title="centos7"></a>centos7</h2><p>常用分区计划：</p>
<table>
<thead>
<tr>
<th style="text-align:left">挂载点</th>
<th style="text-align:left">大小</th>
<th style="text-align:left">设备类型</th>
<th style="text-align:left">文件系统</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>/boot</code></td>
<td style="text-align:left">1024M</td>
<td style="text-align:left">standard Partition</td>
<td style="text-align:left">xfs</td>
</tr>
<tr>
<td style="text-align:left"><code>swap</code></td>
<td style="text-align:left">内存容量</td>
<td style="text-align:left">LVM</td>
<td style="text-align:left">swap</td>
</tr>
<tr>
<td style="text-align:left"><code>/</code></td>
<td style="text-align:left">剩余</td>
<td style="text-align:left">LVM</td>
<td style="text-align:left">xfs</td>
</tr>
</tbody>
</table>
<p>安装前强制使用 GPT 分区表。</p>
<ol>
<li>光标移至 <code>Install CentOS 7</code></li>
<li>按 Tab 键，在下方输入参数</li>
<li><code>vmlinuz initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rd.live.check quiet inst.gpt</code> 关键是 <code>inst.gpt</code>。</li>
</ol>
<h1 id="开机流程"><a href="#开机流程" class="headerlink" title="开机流程"></a>开机流程</h1><ol>
<li>BIOS：开机主动执行的固件，会识别用户设定的用于启动系统的存储设备。</li>
<li>MBR：用于启动系统的存储设备的第一个扇区（或 LBA）内的主要启动记录区块，内含开机管理程序。</li>
<li>开机管理程序（boot loader）：用于读取并执行系统核心文件。<ol>
<li>提供选单：用户可以选择不同的开机项目。</li>
<li>载入核心文件：直接指向开机程序的地址分段来启动操作系统。</li>
<li>转交其他 loader：将开机管理功能转交给其他 loader 负责。每个分区的启动扇区里都可以放入一个 boot loader，该 loader 只认识本分区的系统核心文件和其他分区的 loader。</li>
</ol>
</li>
<li>核心文件：启动操作系统的各种功能</li>
</ol>
<p>一些发行版使用一个表来管理开机自启的进程，该表通常位于 /etc/inittab 文件中。另一些发行版则采用 /etc/init.d/ 目录，将开机时启动或停止某个应用的脚本放到该目录下，这些脚本通过 /etc/rcX.d/ 目录下的符号链接（链接到 /etc/init.d/ 目录中的启动脚本）启动，其中 X 代表运行级（run level）。</p>
<h1 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h1><p><code>$ export VAR=&quot;test&quot;</code> 临时变量，重启系统后失效。</p>
<p>/etc/environment 是整个系统的环境，/etc/profile 是所有用户的环境。</p>
<p>login shell：通过终端凭借用户名和密码登录的动作。<br>non-login shell：在图形界面启动一个 terminal，或者执行 /bin/bash，/usr/bin/bash。</p>
<table>
<thead>
<tr>
<th style="text-align:center">文件</th>
<th style="text-align:center">非交互+登录</th>
<th style="text-align:center">交互+登录</th>
<th style="text-align:center">交互+非登录</th>
<th style="text-align:center">非交互+非登录</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">/etc/profile</td>
<td style="text-align:center">加载</td>
<td style="text-align:center">加载</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">/etc/bashrc</td>
<td style="text-align:center">加载</td>
<td style="text-align:center">加载</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">~/.bash_profile</td>
<td style="text-align:center">加载</td>
<td style="text-align:center">加载</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">~/.bashrc</td>
<td style="text-align:center">加载</td>
<td style="text-align:center">加载</td>
<td style="text-align:center">加载</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">BASH_ENV</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">加载</td>
</tr>
</tbody>
</table>
<p>可以修改 shell 来模拟交互登录式的动作：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/path/to/my_sh -ilex</span></span><br><span class="line"><span class="comment">#e 一旦出错就退出当前 shell</span></span><br><span class="line"><span class="comment">#i 交互式</span></span><br><span class="line"><span class="comment">#l 登录式</span></span><br><span class="line"><span class="comment">#x 显示所执行的每条命令</span></span><br></pre></td></tr></table></figure>
<p><strong>login shell 读取配置的顺序</strong></p>
<ol>
<li>/etc/profile<ul>
<li>-&gt; /etc/inputrc</li>
<li>-&gt; /etc/profile.d/*.sh -&gt; /etc/sysconfig/i18n</li>
</ul>
</li>
<li>读到任意一个就忽略后面的（注意：调用链括号部分跟上面有重复）<ol>
<li>~/.bash_profile -&gt; ~/.bashrc -&gt; /etc/bashrc (-&gt; /etc/profile.d/*.sh -&gt; /etc/sysconfig/i18n)</li>
<li>~/.bash_login</li>
<li>~/.profile</li>
</ol>
</li>
</ol>
<p><strong>non-login shell 读取配置的顺序</strong></p>
<ol>
<li>~/.bashrc -&gt; /etc/bashrc -&gt; /etc/profile.d/*.sh -&gt; /etc/sysconfig/i18n</li>
</ol>
<p><strong>总结：</strong>两者的交点是 ~/.bashrc（用户级）和 /etc/bashrc（系统级）。</p>
<h2 id="etc-profile-内容解析"><a href="#etc-profile-内容解析" class="headerlink" title="/etc/profile 内容解析"></a>/etc/profile 内容解析</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 根据 UID 决定 PATH 变量要不要含有 sbin 的系统指令目录</span></span><br><span class="line"><span class="function"><span class="title">pathmunge</span></span> () &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">":<span class="variable">$&#123;PATH&#125;</span>:"</span> <span class="keyword">in</span></span><br><span class="line">        *:<span class="string">"<span class="variable">$1</span>"</span>:*)</span><br><span class="line">            ;;</span><br><span class="line">        *)</span><br><span class="line">            <span class="keyword">if</span> [ <span class="string">"<span class="variable">$2</span>"</span> = <span class="string">"after"</span> ] ; <span class="keyword">then</span></span><br><span class="line">                PATH=<span class="variable">$PATH</span>:<span class="variable">$1</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                PATH=<span class="variable">$1</span>:<span class="variable">$PATH</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 根据用户的账号设置此变量内容</span></span><br><span class="line"><span class="keyword">if</span> [ -x /usr/bin/id ]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$EUID</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># ksh workaround</span></span><br><span class="line">        EUID=`/usr/bin/id -u`</span><br><span class="line">        UID=`/usr/bin/id -ru`</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    USER=<span class="string">"`/usr/bin/id -un`"</span></span><br><span class="line">    LOGNAME=<span class="variable">$USER</span></span><br><span class="line">    MAIL=<span class="string">"/var/spool/mail/<span class="variable">$USER</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"> <span class="comment"># Path manipulation</span></span><br><span class="line"> <span class="comment"># 调用前面的 `pathmunge` 函数</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$EUID</span>"</span> = <span class="string">"0"</span> ]; <span class="keyword">then</span></span><br><span class="line">    pathmunge /usr/sbin</span><br><span class="line">    pathmunge /usr/<span class="built_in">local</span>/sbin</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    pathmunge /usr/<span class="built_in">local</span>/sbin after</span><br><span class="line">    pathmunge /usr/sbin after</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">HOSTNAME=`/usr/bin/hostname 2&gt;/dev/null`</span><br><span class="line"></span><br><span class="line"> <span class="comment"># 命令历史纪录相关</span></span><br><span class="line">HISTSIZE=1000</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$HISTCONTROL</span>"</span> = <span class="string">"ignorespace"</span> ] ; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">export</span> HISTCONTROL=ignoreboth</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">export</span> HISTCONTROL=ignoredups</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL</span><br><span class="line"></span><br><span class="line"> <span class="comment"># By default, we want umask to get set. This sets it for login shell</span></span><br><span class="line"> <span class="comment"># Current threshold for system reserved uid/gids is 200</span></span><br><span class="line"> <span class="comment"># You could check uidgid reservation validity in</span></span><br><span class="line"> <span class="comment"># /usr/share/doc/setup-*/uidgid file</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$UID</span> -gt 199 ] &amp;&amp; [ <span class="string">"`/usr/bin/id -gn`"</span> = <span class="string">"`/usr/bin/id -un`"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">umask</span> 002</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">umask</span> 022</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 调用其他配置</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> /etc/profile.d/*.sh /etc/profile.d/sh.local ; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ -r <span class="string">"<span class="variable">$i</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">"<span class="variable">$&#123;-#*i&#125;</span>"</span> != <span class="string">"$-"</span> ]; <span class="keyword">then</span></span><br><span class="line">            . <span class="string">"<span class="variable">$i</span>"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            . <span class="string">"<span class="variable">$i</span>"</span> &gt;/dev/null</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">unset</span> i</span><br><span class="line"><span class="built_in">unset</span> -f pathmunge</span><br></pre></td></tr></table></figure>
<h1 id="挂载-卸载"><a href="#挂载-卸载" class="headerlink" title="挂载/卸载"></a>挂载/卸载</h1><p><code>df -h</code> 查看挂载情况<br><code>umount {file_system}</code> 卸载，终端中挂载消失，UI 中挂载仍在<br><code>mount {file_system}</code> 挂载<br><code>eject</code> 弹出，UI 中挂载也消失，且无法直接再用<code>mount</code>命令挂载回来</p>
<h1 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h1><h2 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h2><ol>
<li>安装<ol>
<li>选择要安装 jdk 的位置，如 /usr/ 目录下，新建文件夹 java(<code>sudo mkdir /usr/java</code>)</li>
<li>将文件 jdk-7u40-linux-i586.tar.gz 移动到 /usr/java</li>
<li>解压：<code>sudo tar -zxvf jdk-7u40-linux-i586.tar.gz</code></li>
<li>删除 jdk-7u40-linux-i586.tar.gz</li>
</ol>
</li>
<li>配置<ol>
<li>打开 /home/{user}/.bashrc，加入：<code>source /etc/profile</code></li>
<li>打开 /etc/profile（<code>sudo vim /etc/profile</code>）<br>在最后面添加如下内容，这样使得每次进入该用户的 bash 时都会使添加的环境变量生效：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/usr/java/jdk1.7.0_40</span><br><span class="line">PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line">export JAVA_HOME PATH</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<p>验证是否安装成功：<code>java -version</code></p>
<h2 id="Chrome"><a href="#Chrome" class="headerlink" title="Chrome"></a>Chrome</h2><ol>
<li><code>sudo wget http://www.linuxidc.com/files/repo/google-chrome.list -P /etc/apt/sources.list.d/</code><br>将下载源加入系统的源列表</li>
<li><code>wget -q -O - https://dl.google.com/linux/linux_signing_key.pub  | sudo apt-key add -</code><br>导入谷歌软件的公钥，用于后续步骤对下载软件进行认证</li>
<li><code>sudo apt-get update</code><br>对当前系统可用的更新列表进行更新</li>
<li><code>sudo apt-get install google-chrome-stable</code><br>安装 chrome 稳定版</li>
<li><code>/usr/bin/google-chrome-stable</code><br>启动 chrome</li>
</ol>
<h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><ol>
<li>下载 RPM包<br><code>wget https://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm</code></li>
<li>安装 RPM 包<br><code>yum localinstall mysql57-community-release-el7-9.noarch</code></li>
<li>安装 mysql<br><code>yum install mysql-community-server</code></li>
<li>查看自动生成的随机密码<br><code>grep &#39;temporary password&#39; /var/log/mysqld.log</code></li>
<li>启动、查看 mysql service<br><code>service mysqld start</code><br><code>service mysqld status</code></li>
<li>安全相关设置<br><code>mysql_secure_installation</code></li>
<li>登录成功后修改密码强度限制（测试环境）<ol>
<li><code>set global validate_password_policy=0;</code></li>
<li><code>set global validate_password_length=4;</code></li>
<li><code>set password=password(&#39;root&#39;)</code> 测试环境换个简单的密码</li>
</ol>
</li>
</ol>
<h2 id="erlang"><a href="#erlang" class="headerlink" title="erlang"></a>erlang</h2><p><strong>源码编译</strong></p>
<ol>
<li>下源码。从官网或 github 下：<ul>
<li><code>wget http://www.erlang.org/download/otp_src_20.3.tar.gz</code></li>
<li><code>git clone https://github.com/erlang/otp.git</code></li>
</ul>
</li>
<li>解压 <code>tar -zxvf ~/Downloads/otp_src_20.3.tar.gz</code></li>
<li>配置<ul>
<li>如果是从 github 上下载的源码，要先生成配置脚本 <code>./otp_build autoconf</code></li>
<li>配置中会检查必需的工具。<ul>
<li>GNU <code>make</code></li>
<li>Compiler – GNU C Compiler, gcc or the C compiler frontend for LLVM, clang.</li>
<li>Perl 5</li>
<li>GNU <code>m4</code></li>
<li><code>ncurses</code>, <code>termcap</code>, or <code>termlib</code> – The development headers and libraries are needed, often known as ncurses-devel. Use –without-termcap to build without any of these libraries. Note that in this case only the old shell (without any line editing) can be used.</li>
<li><code>sed</code></li>
</ul>
</li>
<li><code>cd otp_src_20.3</code></li>
<li>配置自定义的安装目录 <code>./configure --prefix=/opt/erlang</code></li>
</ul>
</li>
<li>编译 <code>make</code></li>
<li>安装 <code>make install</code></li>
<li>设置环境变量 <code>vi /etc/profile</code>（<code>whereis erl</code> 查看安装目录）<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERL_HOME=/usr/local/erlang</span><br><span class="line">PATH=$ERL_HOME/bin:$PATH</span><br><span class="line">export ERL_HOME PATH</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>yum 安装</strong></p>
<ol>
<li>安装 epel <code>yum -y install http://dl.fedoraproject.org/pub/epel/7/x86_64/Packages/e/epel-release-7-11.noarch.rpm</code></li>
<li>更新 erlang 仓库 <code>yum -y install  http://packages.erlang-solutions.com/erlang-solutions-1.0-1.noarch.rpm</code></li>
<li>安装 erlang <code>yum install erlang</code></li>
</ol>
<h2 id="rabbitmq"><a href="#rabbitmq" class="headerlink" title="rabbitmq"></a>rabbitmq</h2><ol>
<li>下包。<code>wget https://dl.bintray.com/rabbitmq/all/rabbitmq-server/3.7.4/rabbitmq-server-3.7.4-1.el7.noarch.rpm</code></li>
<li>可能要安装 socat：<code>yum -i socat</code></li>
<li>安装。<code>rpm -i rabbitmq-server-3.7.4-1.el7.noarch.rpm</code></li>
<li>如果不是用这种包管理的方式安装的话可能要手动创建几个文件夹<ul>
<li><code>mkdir -p /var/log/rabbitmq</code></li>
<li><code>mkdir -p /var/log/rabbitmq/mnesia/rabbit</code></li>
</ul>
</li>
<li>启动服务 <code>sbin/rabbitmq-server</code></li>
</ol>
<h1 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h1><h2 id="apt-get"><a href="#apt-get" class="headerlink" title="apt-get"></a>apt-get</h2><p><code>apt-get purge</code> <code>apt-get remove --purge</code></p>
<p>删除软件包和配置文件，保留依赖包。</p>
<p><code>apt-get remove</code></p>
<p>删除软件包，保留依赖包和配置文件。</p>
<p><code>apt-get autoremove</code></p>
<p>删除不需要的依赖包。</p>
<p><code>apt-get autoclean</code></p>
<p>APT 的底层包是 dpkg，dpkg 会把 .deb 文件放在 /var/cache/apt/archives 中。</p>
<h2 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h2><p><code>yum search {keyword}</code><br>根据关键字搜索软件包</p>
<p><code>yum list</code><br>列出可安装包</p>
<p><code>yum list [updates|installed|{name}|extras]</code><br>列出可更新包|已安装包|指定包|所有已安装但不在 Yum Repository 中的包</p>
<p><code>yum info</code><br>列出所有软件包信息</p>
<p><code>yum info [updates|installed|{name}|extras]</code><br>列出可更新包|已安装包|指定包|所有已安装但不在 Yum Repository 中的包的信息</p>
<p><code>yum provides {name}</code><br>列出软件包提供哪些文件</p>
<p><code>yum clean packages</code><br>清除缓存目录(/var/cache/yum)下的软件包<br><code>yum clean headers</code><br>清除缓存目录(/var/cache/yum)下的 headers<br><code>yum clean oldheaders</code><br>清除缓存目录(/var/cache/yum)下旧的 headers<br><code>yum clean, yum clean all</code> (= <code>yum clean packages</code>;<code>yum clean oldheaders</code>)<br>清除缓存目录(/var/cache/yum)下的软件包及旧的headers</p>
<p><code>yum update</code> 升级系统<br><code>yum install {name}</code> 安装指定软件包<br><code>yum update {name}</code> 升级指定软件包<br><code>yum remove {name}</code> 卸载指定软件<br><code>yum grouplist</code> 查看系统中已经安装的和可用的软件组，可用的可以安装<br><code>yum grooupinstall {name}</code> 安装上一个命令显示的可用的软件组中的一个<br><code>yum grooupupdate {name}</code> 更新指定软件组的软件包<br><code>yum grooupremove {name}</code> 卸载指定软件组中的软件包<br><code>yum deplist {name}</code> 查询指定软件包的依赖关系<br><code>yum list yum\*</code> 列出所有以yum开头的软件包<br><code>yum localinstall {name}</code> 从硬盘安装rpm包并使用yum解决依赖</p>
<h2 id="配置阿里云源"><a href="#配置阿里云源" class="headerlink" title="配置阿里云源"></a>配置阿里云源</h2><p>1、用wget下载repo文件</p>
<p><code>wget  http://mirrors.aliyun.com/repo/Centos-7.repo</code></p>
<p>如果wget命令不生效，说明还没有安装wget工具，输入<code>yum -y install wget</code> 回车进行安装。</p>
<p>2、移至源目录</p>
<p><code>mv ./Centos-7.repo /etc/yum.repos.d/</code></p>
<p>3、备份系统原来的repo文件</p>
<p><code>mv CentOs-Base.repo CentOs-Base.repo.bak</code></p>
<p>4、替换系统原理的repo文件</p>
<p><code>mv Centos-7.repo CentOs-Base.repo</code></p>
<p>5、执行yum源更新命令</p>
<p><code>yum clean all</code><br><code>yum makecache</code><br><del><code>yum update</code></del></p>
<h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><h2 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h2><h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><p>concatenate 显示文件内容。</p>
<p><code>cat {file1} [{file2}]...</code><br>显示一个或多个文件的内容。对于多个文件，会将内容拼接起来显示。</p>
<h3 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h3><p>显示指定目录的内容，缺省参数为当前目录。</p>
<p><code>-a</code> <code>--all</code> 显示 dot 文件。<br><code>-A</code> <code>--almost-all</code> 显示 dot 文件，除了 . 和 ..。<br><code>--block-size=[K|M|G|T|P|E|Z|Y]</code> 定义显示文件大小的单位。<br><code>-c</code> 结合 <code>-lt</code>：显示最近修改时间，并按其排序；结合 <code>-l</code>：显示最近修改时间，按文件名排序；否则按最近修改时间排序。<br><code>-d</code> <code>--directory</code> 显示文件夹本身，而不是它的内容。<br><code>-F</code> 显示文件类型信息。<br><code>-hide={pattern}</code> 不显示匹配的文件。<br><code>-i</code> <code>--inode</code> 显示文件的 inode 号。<br><code>-I</code> <code>--ignore={pattern}</code> 不显示匹配的文件。<br><code>-l</code> 显示详细的列表。<br><code>-L</code> 当显示符号链接的文件信息时，显示符号链接指向的对象而非链接本身的信息。<br><code>-n</code> <code>--numeric-uid-gid</code> 类似 <code>-l</code>，但显示用户和用户组的 ID。<br><code>-o</code> 类似 <code>-l</code>，但不显示组信息。<br><code>-r</code> 反向排序。<br><code>-R</code> <code>--recursive</code> 递归显示子目录。<br><code>-S</code> 按文件大小排序。<br><code>-t</code> 按修改时间排序，由新到旧。<br><code>-u</code> 结合 <code>-lt</code>：显示最近打开时间并按其排序；结合 <code>-l</code>：显示最近打开时间，并按文件名排序；否则，按最近打开时间排序。<br><code>-U</code> 不排序。<br><code>-w</code> <code>--width={cols}</code> 定义屏幕宽度。<br><code>-X</code> 按扩展名的字母顺序排序。</p>
<h3 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h3><p>复制文件。</p>
<p><code>cp {file1} {file2}</code><br>将 file1 复制到 file2。<br><code>cp {file1} ... {file2} {dir}</code><br>将文件复制到指定目录。</p>
<h3 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h3><p>重命名或移动文件。</p>
<p><code>mv {file1} {file2}</code><br>将 file1 重命名为 file2。<br><code>mv {file1} ... {file2} {dir}</code><br>将文件移动到指定目录。</p>
<h3 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h3><blockquote>
<p>创建文件。若文件已存在则更新时间戳。</p>
</blockquote>
<p><code>touch {file}</code></p>
<h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><blockquote>
<p>删除文件。</p>
</blockquote>
<p><code>rm {file}</code></p>
<h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h3><p>将它的参数显示到标准输出。</p>
<p><code>echo {variable}</code></p>
<h3 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h3><blockquote>
<p>设置当前工作目录。当前工作目录是指进程和 shell 当前所在的工作目录。</p>
</blockquote>
<p><code>cd {dir}</code></p>
<h3 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h3><blockquote>
<p>创建新目录。</p>
</blockquote>
<p><code>mkdir {dir}</code></p>
<h3 id="rmdir"><a href="#rmdir" class="headerlink" title="rmdir"></a>rmdir</h3><blockquote>
<p>删除目录，只能删除空目录。</p>
</blockquote>
<p><code>rmdir {dir}</code><br>删除指定目录。<br><code>rm -rf {dir}</code><br>删除指定目录及其中所有内容。</p>
<h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><blockquote>
<p>显示文件和输入流中和参数匹配的行。可识别正则表达式。</p>
</blockquote>
<p><code>grep -[i][v] {keyword} {file}</code><br>-i 表示不区分大小写，-v 表示反转匹配，即显示所有不匹配的行。</p>
<h3 id="less"><a href="#less" class="headerlink" title="less"></a>less</h3><p>分屏显示文件内容。</p>
<p><code>less</code> 命令是 <code>more</code> 命令的增强版，在一些没有 <code>less</code> 命令的 Unix 系统和嵌入式系统中可以使用 <code>more</code> 命令。</p>
<p>大部分移动命令同 vim，包括标记跳转。</p>
<p><code>less [opt] {file}...</code></p>
<ul>
<li><code>-b {bufferSize}</code> 缓冲区大小。</li>
<li><code>-e</code> 文件显示结束后自动离开。</li>
<li><code>-f</code> 强制打开特殊文件，如外围设备代号、目录和二进制文件。</li>
<li><code>-g</code> 只标识最后搜索的关键词。</li>
<li><code>-i</code> 搜索忽略大小写。</li>
<li><code>-m</code> 显示类似 <code>more</code> 的百分比。</li>
<li><code>-N</code> 显示行号。</li>
<li><code>-o {file}</code> 将 less 输出内容保存到指定文件。</li>
<li><code>-Q</code> 不使用警告音。</li>
<li><code>-s</code> 将连续空行显示为一行。</li>
<li><code>-S</code> 舍弃行的超长部分。</li>
<li><p><code>-x {n}</code> 将 <code>{tab}</code> 显示为 n 个空格。</p>
</li>
<li><p><code>/{str}</code> <code>?{str}</code> 向下/上搜索字符串。</p>
</li>
<li><code>n</code> <code>N</code> 重复/反向重复上一次搜索。</li>
<li><code>y</code> <code>&lt;enter&gt;</code> 上/下滚一行。</li>
<li><code>u</code> <code>d</code> 上/下滚半页。</li>
<li><code>b</code> <code>&lt;space&gt;</code> 上/下滚一页。</li>
<li><code>&lt;pageup&gt;</code> <code>&lt;pagedown&gt;</code> 向上/下滚一页。</li>
<li><code>:n</code> <code>:p</code> 下/上一个文件。</li>
<li><code>Q</code> 推出 <code>less</code>。</li>
<li><code>h</code> 帮助。</li>
</ul>
<h3 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h3><blockquote>
<p>输出当前的工作目录名。</p>
</blockquote>
<h3 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h3><blockquote>
<p>查看两个文件之间的不同。</p>
</blockquote>
<p><code>diff {file1} {file2}</code></p>
<h3 id="file"><a href="#file" class="headerlink" title="file"></a>file</h3><blockquote>
<p>查看文件的格式信息。</p>
</blockquote>
<p><code>file {file}</code></p>
<h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><blockquote>
<p>查找文件。可以使用模式匹配参数，但必须给模式匹配参数加引号，因为 shell 会在运行命令前展开通配符。</p>
</blockquote>
<p><code>find {dir} -name {file} -print</code></p>
<h3 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h3><blockquote>
<p>在系统创建的文件索引中查找文件。该索引由系统周期性地进行更新。</p>
</blockquote>
<p><strong>head</strong> 和 <strong>tail</strong></p>
<blockquote>
<p>显示文件的前 10 行或后 10 行内容。</p>
</blockquote>
<p><code>head|tail [-{n}|+{n}][-f] {file}</code><br>-n 设置显示的行数，+n 设置显示第 n 行开始的内容，-f 设置不停地读取最新内容。</p>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><blockquote>
<p>将文件内的所有行按照字母顺序快速排序。-n 按照数字顺序排序那些以数字开始的行，-r 反向排序。</p>
</blockquote>
<h3 id="export"><a href="#export" class="headerlink" title="export"></a>export</h3><blockquote>
<p>将某个 shell 变量设置为环境变量。</p>
</blockquote>
<p><code>export {var}</code></p>
<h3 id="man"><a href="#man" class="headerlink" title="man"></a>man</h3><h3 id="command-–help-h"><a href="#command-–help-h" class="headerlink" title="{command} –help|-h"></a>{command} –help|-h</h3><h3 id="info-command"><a href="#info-command" class="headerlink" title="info {command}"></a>info {command}</h3><blockquote>
<p>获取在线帮助。</p>
</blockquote>
<p><code>man [-k] {command}</code><br>获取指定命令的帮助信息，可指定关键词进行查找。</p>
<h3 id="command-gt-file"><a href="#command-gt-file" class="headerlink" title="{command} &gt; {file}"></a>{command} &gt; {file}</h3><h3 id="command-gt-gt-file"><a href="#command-gt-gt-file" class="headerlink" title="{command} &gt;&gt; {file}"></a>{command} &gt;&gt; {file}</h3><h3 id="command-command"><a href="#command-command" class="headerlink" title="{command} | {command}"></a>{command} | {command}</h3><h3 id="command-2-gt-file"><a href="#command-2-gt-file" class="headerlink" title="{command} 2&gt; {file}"></a>{command} 2&gt; {file}</h3><h3 id="command-gt-file-2-gt-amp-1"><a href="#command-gt-file-2-gt-amp-1" class="headerlink" title="{command} &gt; {file} 2&gt;&amp;1"></a>{command} &gt; {file} 2&gt;&amp;1</h3><h3 id="command-lt-file"><a href="#command-lt-file" class="headerlink" title="{command} &lt; {file}"></a>{command} &lt; {file}</h3><blockquote>
<p><code>&gt;</code>将执行结果重定向至文件（缺省为终端屏幕），如果文件不存在，shell 会创建新文件；如果文件存在，shell 会先清空文件内容。bash 中可以通过设置参数<code>set -C</code>来防止清空。<br><code>&gt;&gt;</code>将执行结果重定向至文件末尾。<br><code>|</code>将执行结果作为后一个命令的输入。<br><code>2&gt;</code>重定向标准错误输出。2 是由 shell 修改的流 ID，1 是标准输出，2 是标准错误输出。<br><code>&gt;&amp;</code>将标准输出和标准错误输出重定向到同一个地方。<br><code>&lt;</code>将文件内容重定向为命令的标准输入。</p>
</blockquote>
<h3 id="du"><a href="#du" class="headerlink" title="du"></a>du</h3><blockquote>
<p>查看文件和目录的磁盘使用空间。</p>
</blockquote>
<p><code>du -sh ./*</code><br>显示当前目录下所有文件和目录的磁盘使用情况。</p>
<h3 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h3><p><code>chmod [ops] {xyz} {path}</code></p>
<ul>
<li><code>-R</code> 对目录内部递归执行。</li>
<li><code>{xyz}</code> 依次对应拥有者、拥有者所在组、其他用户。rwx 641。</li>
</ul>
<h3 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h3><p><code>chown [ops] {userOrGroup} {path}</code></p>
<ul>
<li><code>{userOrGroup}</code> 用户名或组名。</li>
<li><code>-c</code> 若拥有者确实发生更改才显示更改动作。</li>
<li><code>-f</code> 若拥有者无法更改，不显示错误信息。</li>
<li><code>-h</code> 更改链接本身，而不是它指向的路径。</li>
<li><code>-v</code> 显示详情。</li>
</ul>
<h2 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h2><p><strong>ps</strong></p>
<p>列出所有正在运行的进程。</p>
<p>PID：进程 ID。<br>TTY：进程所在的终端设备。<br>STAT：进程在内存中的状态。完整状态列表参阅帮助手册。<br>TIME：进程占用 CPU 的总时长。<br>COMMAND：命令名，进程有可能将其由初始值改为其他。</p>
<ul>
<li><code>ps x</code> 显示当前用户运行的所有进程。</li>
<li><code>ps ax</code> 显示系统当前运行的所有进程，包括其他用户的进程。</li>
<li><code>ps u</code> 显示更详细的进程信息。</li>
<li><code>ps w</code> 显示命令的全名，而非仅显示一行以内的内容。</li>
<li><code>ps {PID}</code> 显示指定进程的信息，可用 $$ 表示当前 shell 的进程。</li>
</ul>
<p><strong>kill</strong></p>
<p>向进程发送一个信号。</p>
<p><code>kill [-{SIG}] {PID}</code><br>{SIG} 是具体的信号。缺省是 <code>TERM</code>。<code>STOP</code> 表示暂停，<code>CONT</code> 表示继续，<code>INT</code> 或 <code>CTRL-C</code> 表示中断，<code>KILL</code> 表示强行终止。也可使用数字代替信号名。</p>
<ul>
<li><code>KILL</code> 在内核层面立即终止进程，该信号不能被阻塞、处理或忽略。</li>
<li><code>INT</code> 通知前台进程组终止进程。</li>
<li><code>QUIT</code> 和 INT 类似, 但由 QUIT 字符(通常是 <code>Ctrl-\</code>)来控制。进程在因收到 QUIT 退出时会产生 core 文件, 在这个意义上类似于一个程序错误信号。</li>
<li><code>TERM</code> 要求进程自己正常退出，该信号可以被阻塞或处理。</li>
</ul>
<h1 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h1><table>
<thead>
<tr>
<th style="text-align:left">字符</th>
<th style="text-align:left">名称</th>
<th style="text-align:left">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">星号</td>
<td style="text-align:left">正则表达式，通用字符</td>
</tr>
<tr>
<td style="text-align:left">.</td>
<td style="text-align:left">句点</td>
<td style="text-align:left">当前目录，文件/主机名的分隔符</td>
</tr>
<tr>
<td style="text-align:left">!</td>
<td style="text-align:left">感叹号</td>
<td style="text-align:left">逻辑非运算符，命令历史</td>
</tr>
<tr>
<td style="text-align:left">\</td>
<td style="text-align:left"></td>
<td style="text-align:left">管道</td>
<td>命令管道</td>
</tr>
<tr>
<td style="text-align:left">/</td>
<td style="text-align:left">斜线</td>
<td style="text-align:left">命令分隔符，搜索命令</td>
</tr>
<tr>
<td style="text-align:left">\</td>
<td style="text-align:left">反斜线</td>
<td style="text-align:left">常量，宏（非目录）</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">美元符号</td>
<td style="text-align:left">变量符号，行尾</td>
</tr>
<tr>
<td style="text-align:left">‘</td>
<td style="text-align:left">单引号</td>
<td style="text-align:left">字符串常量</td>
</tr>
<tr>
<td style="text-align:left">`</td>
<td style="text-align:left">反引号</td>
<td style="text-align:left">命令替换</td>
</tr>
<tr>
<td style="text-align:left">“</td>
<td style="text-align:left">双引号</td>
<td style="text-align:left">半字符串常量</td>
</tr>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">脱字符</td>
<td style="text-align:left">逻辑非运算，行头</td>
</tr>
<tr>
<td style="text-align:left">~</td>
<td style="text-align:left">波浪字符</td>
<td style="text-align:left">逻辑非运算符，目录快捷方式</td>
</tr>
<tr>
<td style="text-align:left">#</td>
<td style="text-align:left">井号</td>
<td style="text-align:left">注释，预处理，替换</td>
</tr>
<tr>
<td style="text-align:left">[]</td>
<td style="text-align:left">方括号</td>
<td style="text-align:left">范围</td>
</tr>
<tr>
<td style="text-align:left">{}</td>
<td style="text-align:left">大括号</td>
<td style="text-align:left">声明块，范围</td>
</tr>
<tr>
<td style="text-align:left">_</td>
<td style="text-align:left">下划线</td>
<td style="text-align:left">空格的简单替代</td>
</tr>
</tbody>
</table>
<p>控制键 CTRL 通常用 ^ 来表示。</p>
<h1 id="命令行按键"><a href="#命令行按键" class="headerlink" title="命令行按键"></a>命令行按键</h1><table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">操作</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">CTRL-B</td>
<td style="text-align:left">左移光标</td>
</tr>
<tr>
<td style="text-align:left">CTRL-F</td>
<td style="text-align:left">右移光标</td>
</tr>
<tr>
<td style="text-align:left">CTRL-P</td>
<td style="text-align:left">查看上一条命令（或上移光标）</td>
</tr>
<tr>
<td style="text-align:left">CTRL-N</td>
<td style="text-align:left">查看下一条命令（或下移光标）</td>
</tr>
<tr>
<td style="text-align:left">CTRL-A</td>
<td style="text-align:left">移动光标至行首</td>
</tr>
<tr>
<td style="text-align:left">CTRL-E</td>
<td style="text-align:left">移动光标至行尾</td>
</tr>
<tr>
<td style="text-align:left">CTRL-W</td>
<td style="text-align:left">删除前一个词</td>
</tr>
<tr>
<td style="text-align:left">CTRL-U</td>
<td style="text-align:left">删除从光标至行首的内容</td>
</tr>
<tr>
<td style="text-align:left">CTRL-K</td>
<td style="text-align:left">删除从光标至行尾的内容</td>
</tr>
<tr>
<td style="text-align:left">CTRL-Y</td>
<td style="text-align:left">粘贴已删除的文本</td>
</tr>
</tbody>
</table>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="安装配置文件"><a href="#安装配置文件" class="headerlink" title="安装配置文件"></a>安装配置文件</h2><p>kickstart<br>/root/anaconda-ks.cfg</p>
<h2 id="yum-代理"><a href="#yum-代理" class="headerlink" title="yum 代理"></a>yum 代理</h2><p><code>sudo vi /etc/yum.conf</code></p>
<p>加入<br>proxy=<a href="http://{host}:{port}" target="_blank" rel="noopener">http://{host}:{port}</a><br>proxy_username=abc<br>proxy_password=123</p>
<h2 id="全局代理"><a href="#全局代理" class="headerlink" title="全局代理"></a>全局代理</h2><ol>
<li><code>sudo vi /etc/profile</code></li>
<li>加上</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http_proxy=http://&#123;user&#125;:&#123;pwd&#125;@&#123;host&#125;:&#123;port&#125;</span><br><span class="line">export http_proxy</span><br></pre></td></tr></table></figure>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><h2 id="FATAL-Could-not-read-from-Boot-Medium-System-Halted"><a href="#FATAL-Could-not-read-from-Boot-Medium-System-Halted" class="headerlink" title="FATAL:Could not read from Boot Medium! System Halted."></a><code>FATAL:Could not read from Boot Medium! System Halted.</code></h2><p>解决：虚拟机设置-存储-删除多余的控制器</p>
<h2 id="参数风格"><a href="#参数风格" class="headerlink" title="参数风格"></a>参数风格</h2><ol>
<li>参数用一横的说明后面的参数是字符形式。</li>
<li>参数用两横的说明后面的参数是单词形式。</li>
<li>参数前有横的是 System V 风格。</li>
<li>参数前没有横的是 BSD 风格。</li>
</ol>
<h2 id="Failed-to-open-EFI-BOOT-grubx64-efi-Not-Found"><a href="#Failed-to-open-EFI-BOOT-grubx64-efi-Not-Found" class="headerlink" title="Failed to open \EFI\BOOT\grubx64.efi - Not Found"></a>Failed to open \EFI\BOOT\grubx64.efi - Not Found</h2><ol>
<li>挂载 centos 的 iso，进入 rescue 模式。</li>
<li><code>cd /mnt/sysimage/boot/efi/EFI</code></li>
<li><code>cp centos/grubx64.efi ../boot/</code></li>
<li><code>reboot</code></li>
</ol>
<h2 id="vdi-迁移"><a href="#vdi-迁移" class="headerlink" title="vdi 迁移"></a>vdi 迁移</h2><p><code>VBoxManage internalcommands sethduuid H:\virtualSys\ubuntu.vdi</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/Java/Java Web Services/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zeerho">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zeerho">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/Java/Java Web Services/" itemprop="url">Java Web Services</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-01T09:00:00+08:00">2017-01-01</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-基于-SOAP-的-Web-服务"><a href="#1-基于-SOAP-的-Web-服务" class="headerlink" title="1. 基于 SOAP 的 Web 服务"></a>1. 基于 SOAP 的 Web 服务</h1><h2 id="1-1-TimeServer-的服务端点接口（SEI，Service-Endpoint-Interface）"><a href="#1-1-TimeServer-的服务端点接口（SEI，Service-Endpoint-Interface）" class="headerlink" title="1.1 TimeServer 的服务端点接口（SEI，Service Endpoint Interface）"></a>1.1 TimeServer 的服务端点接口（SEI，Service Endpoint Interface）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ch01.ts; <span class="comment">//time server</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.jws.WebService;</span><br><span class="line"><span class="keyword">import</span> javax.jws.WebMethod;</span><br><span class="line"><span class="keyword">import</span> javax.jws.soap.SOAPBinding;</span><br><span class="line"><span class="keyword">import</span> javax.jws.soap.SOAPBinding.Style;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebService</span></span><br><span class="line"><span class="meta">@SOAPBinding</span>(style=Style.RPC)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TimeServer</span></span>&#123;</span><br><span class="line">    <span class="meta">@WebMethod</span> <span class="function">String <span class="title">getTimeAsString</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="meta">@WebMethod</span> <span class="function"><span class="keyword">long</span> <span class="title">getTimeAsElapsed</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-2-TimeServer-服务实现-Bean（SIB，Service-Implementation-Bean）-new-Date"><a href="#1-2-TimeServer-服务实现-Bean（SIB，Service-Implementation-Bean）-new-Date" class="headerlink" title="1.2 TimeServer 服务实现 Bean（SIB，Service Implementation Bean）[^new Date()]"></a>1.2 TimeServer 服务实现 Bean（SIB，Service Implementation Bean）[^new Date()]</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ch01.ts;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> javax.jws.WebService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebService</span>(endpointInterface=<span class="string">"ch01.ts.TimeServer"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeServerImpl</span> <span class="keyword">implements</span> <span class="title">TimeServer</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTimeAsString</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> <span class="keyword">new</span> Date().toString();&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getTimeAsElapsed</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> <span class="keyword">new</span> Date().getTime(); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-3-将-Java-程序发布为-Web-服务"><a href="#1-3-将-Java-程序发布为-Web-服务" class="headerlink" title="1.3 将 Java 程序发布为 Web 服务"></a>1.3 将 Java 程序发布为 Web 服务</h2><p>Web 服务可以发布到独立的 Java 应用服务器中，也可以如下简单地为其提供一个 Web 服务发布程序。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ch01.ts;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.ws.Endpoint;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeServerPublisher</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Endpoint.publish(<span class="string">"http://127.0.0.1:9876/ts"</span>,<span class="keyword">new</span> TimeServerImpl());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样发布的服务同一时刻只能处理一个客户端服务请求。</p>
<p><span id="return1"></span></p>
<h2 id="1-4-通过浏览器测试-Web-服务"><a href="#1-4-通过浏览器测试-Web-服务" class="headerlink" title="1.4 通过浏览器测试 Web 服务"></a>1.4 通过浏览器测试 Web 服务</h2><p>通过浏览器查看由发布程序自动产生的服务契约 WSDL（Web Services Description Language）文档。访问地址 <code>http://127.0.0.1:9876/ts?wsdl</code>。详细报文见<a href="#wsdl">这里</a>。</p>
<h2 id="1-5-传输SOAP消息时HTTP请求的内容结构"><a href="#1-5-传输SOAP消息时HTTP请求的内容结构" class="headerlink" title="1.5 传输SOAP消息时HTTP请求的内容结构"></a>1.5 传输SOAP消息时HTTP请求的内容结构</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">POST http://127.0.0.1:9876/ts HTTP/ 1.1</span><br><span class="line">Accept:text/xml</span><br><span class="line">Accept:multipart/*</span><br><span class="line">Accept:application/soap</span><br><span class="line">User-Agent:SOAP::Lite/Perl/0.69</span><br><span class="line">Content-Length:434</span><br><span class="line">Content-Type:text/xml;charset=utf-8</span><br><span class="line">SOAPAction:""</span><br><span class="line"></span><br><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">soap:Envelope</span></span></span><br><span class="line"><span class="tag">    <span class="attr">soap:encodingStyle</span>=<span class="string">"http://schemas.xmlsoap.org/soap/encoding/"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:soap</span>=<span class="string">"http://schemas.xmlsoap.org/soap/envelope/"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:soapenc</span>=<span class="string">"http://schemas.xmlsoap.org/soap/encoding/"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tns</span>=<span class="string">"http://ts.ch01/"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsd</span>=<span class="string">"http://www.w3.org/2001/XMLSchema"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">soap:Body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tns:getTimeAsString</span> <span class="attr">xsi:nil</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">soap:Body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">soap:Envelope</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>HTTP 请求第一行指定了请求方法为“POST”。在 SOAP 请求中，通常是 POST 方式，而不是 GET，因为只有  POST 请求才有 Body 域，可以用来封装一个 SOAP 消息。URL 之后是协议和协议版本号。</li>
<li>HTTP 头之后是一些由冒号分割的键值对。它们出现的顺序是任意的。“Accept”键以 MIME（Multipurpose Internet Mail Extension）类型/子类型的方式出现，3个“Accept”键表明请求者客户端可以分别处理任意类型的 XML 文档，附带任意数量的不同类型文档（SOAP消息通常可以有任意多个附件）的请求响应，以及一个 SOAP 文档。“SOAPAction”键通常用来表示这个 HTTP 请求是一个 Web 服务请求，同时取值可以为空字符串，也有可能是请求的 Web 服务操作的名称。</li>
<li>一个空行分隔 HTTP 头数据和 Body 域。本例中 Body 域包含一个 SOAP 文档，称为 SOAP 信封（SOAP Envelope）。</li>
</ul>
<p>针对 Web 服务来说，底层的 Java 支持库处理 HTTP 请求，并将 SOAP 信封拆包，分析出客户端请求的服务操作，然后调用对应的方法，生成相应的 SOAP 消息返回给客户端。</p>
<h2 id="1-6-来自-TimeServer-服务的-HTTP-响应"><a href="#1-6-来自-TimeServer-服务的-HTTP-响应" class="headerlink" title="1.6 来自 TimeServer 服务的 HTTP 响应"></a>1.6 来自 TimeServer 服务的 HTTP 响应</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Length:323</span><br><span class="line">Content-Type:text/xml;charset=utf-8</span><br><span class="line">Client-Date:Mon,28 Apr 2008 02:12:54 GMT</span><br><span class="line">Client-Peer:127.0.0.1:9876</span><br><span class="line">Client-Response-Num:1</span><br><span class="line"></span><br><span class="line">&lt;?xml version="1.0"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">soapenv:Envelope</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:soapenv</span>=<span class="string">"http://schemas.xmlsoap.org/soap/envelope/"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsd</span>=<span class="string">"http://www.w3.org/2001/XMLSchema"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">soapenv:Body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ans:getTimeAsStringResponse</span> <span class="attr">xmlns:ans</span>=<span class="string">"http://ts.ch01/"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">return</span>&gt;</span>Mon Apr 28 14:12:54 CST 2008<span class="tag">&lt;/<span class="name">return</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ans:getTimeAsStringResponse</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">soapenv:Body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">soapenv:Envelope</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>根据 WSDL 文档提供的信息（这里未列出），要求从 Web 服务返回的值出现在 XML 的 <code>&lt;return&gt;</code> 元素中。</p>
<h2 id="1-7-Java-语言实现的-Web-服务客户端"><a href="#1-7-Java-语言实现的-Web-服务客户端" class="headerlink" title="1.7 Java 语言实现的 Web 服务客户端"></a>1.7 Java 语言实现的 Web 服务客户端</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ch01.ts;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.namespace.QName;</span><br><span class="line"><span class="keyword">import</span> javax.xml.ws.Service;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TimeClient</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        URL url=<span class="keyword">new</span> URL(<span class="string">"http://localhost:9876/ts?wsdl"</span>);</span><br><span class="line">        <span class="comment">//Qualified name of the service.</span></span><br><span class="line">        QName qname=<span class="keyword">new</span> QName(<span class="string">"http://ts.ch01/"</span>,<span class="string">"TimeServerImplService"</span>);</span><br><span class="line">        <span class="comment">//Create a factory for the service.</span></span><br><span class="line">        Service service=Service.create(url,qname);</span><br><span class="line">        <span class="comment">//Extract the endpoint interface, the service "port".</span></span><br><span class="line">        TimeServer eif=service.getPort(TimeServer.class);</span><br><span class="line">        </span><br><span class="line">        System.out.println(eif.getTimeAsString());</span><br><span class="line">        System.out.println(eif.getTimeAsElapsed());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Java客户端明确地创建了一个语法格式为“URI：本地名称”的 XML 限定名，<code>java.xml.namespace.Qname</code> 类用来表示一个 XML 限定名。本类中的命名空间 URI 在 WSDL 文档中提供；本地名称在 WSDL 文档最后一段的 Service 元素中描述（这里是“TimeServerImplService”）。<br>调用 <code>Service.create()</code> 方法后，执行 <code>getPort()</code> 方法，该方法返回一个 Java 对象，可以通过此对象调用 portType 中描述的操作。</p>
<h1 id="2-全面了解-WSDL"><a href="#2-全面了解-WSDL" class="headerlink" title="2. 全面了解 WSDL"></a>2. 全面了解 WSDL</h1><h2 id="2-1-从-WSDL-文档中生成客户端支持代码"><a href="#2-1-从-WSDL-文档中生成客户端支持代码" class="headerlink" title="2.1 从 WSDL 文档中生成客户端支持代码"></a>2.1 从 WSDL 文档中生成客户端支持代码</h2><p>2.1.1 使用 wsimport</p>
<p>通过 Jdk1.6+ 提供的 wsimport 工具轻松完成基于 SOAP 协议的 Web 服务客户端生成工作。</p>
<p><strong>首先确认服务端已经运行，这样才能访问到 WSDL。</strong><br>在 cmd.exe 中运行命令：<br><code>wsimport -d class -s source -keep http://localhost:9876/ts?wsdl</code></p>
<ul>
<li><code>-d</code>：class 文件存放目录；</li>
<li><code>-s</code>：java 文件存放目录；</li>
<li><code>-keep</code>：保留 java 文件。</li>
</ul>
<p>该命令以 cmd.exe 运行目录为当前目录。class 和 source 都是当前目录下已存在的自定义目录。默认使用服务实现的包名作为客户端代码包名，注意避免覆盖。若 SEI 采用 Document 的绑定方式则会自动生成相关工件。<br>其中，契约地址可换成本地 wsdl 文件的路径。</p>
<p>根据之前的 wsdl 文档，wsimport 会生成 TimeServer.class 和 TimeServerImplService.class 两个字节码文件。可基于这两个文件编写服务调用客户端。</p>
<p>wsimport 使用的编码为操作系统的编码，且源代码中的注释使用的是英文。</p>
<p>2.1.2 使用 wsdl2java</p>
<p>wsdl2java.exe 通常在 webservice 框架（如 CXF、AXIS2）的文件夹内。</p>
<p><code>wsdl2java [options] [URL|wsdl文件]</code></p>
<ul>
<li><code>-d</code>：源码输出目录；</li>
<li><code>-compile</code>：是否编译源码；</li>
<li><code>-classdir</code>：字节码输出目录；</li>
<li><code>-b</code>：指定数据绑定文件；</li>
</ul>
<p>生成的客户端中会出现类似 <code>JaxbElement&lt;String&gt;</code> 的对象，而不是 <code>String</code>。可以通过参数 <code>-b</code> 来指定数据绑定文件，并在该文件中进行设置。<br>比如先创建文件 cxf_binding.xml，内容如下。然后指定参数 <code>-b cxf_binding.xml</code>，若文件不在当前路径，则需写明绝对路径。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jaxb:bindings</span> <span class="attr">version</span>=<span class="string">"2.0"</span> <span class="attr">xmlns:jaxb</span>=<span class="string">"http://java.sun.com/xml/ns/jaxb"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jaxb:bindings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jaxb:globalBindings</span> <span class="attr">generateElementProperty</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">jaxb:bindings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">jaxb:bindings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> client;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TimeClientWSDL</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TimeServerImplService service = <span class="keyword">new</span> TimeServerImplService();</span><br><span class="line">        TimeServer eif = service.getTimeServerImplPort();</span><br><span class="line">        </span><br><span class="line">        System.out.println(eif.getTimeAsString());</span><br><span class="line">        System.out.println(eif.getTimeAsElapsed());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到与服务对应的Qname和服务端点等复杂细节都被隐藏了。</p>
<p><strong>基于WSDL协议所生成的相关工件（Artifact）编写服务客户端的一些常用做法：</strong></p>
<ol>
<li>通过 wsimport 产生的 Class 文件中的构造方法构造一个服务对象，比如本例中的 <code>TimeServerImplService</code> 类。</li>
<li>通过构建的服务对象调用对应的 get 方法。</li>
</ol>
<h2 id="2-2-WSDL文档结构"><a href="#2-2-WSDL文档结构" class="headerlink" title="2.2 WSDL文档结构"></a>2.2 WSDL文档结构</h2><p>根元素 <code>&lt;definitions&gt;</code> 内部分为 3 部分：</p>
<ul>
<li><strong>类型（Types）：</strong>非必需。通常基于像XML模式（XML Schema）这样的类型系统来提供数据类型的定义。这种用来定义数据类型的文档就是XSD（XML Schema Definition）。在数据类型部分可以持有、指向或引入一个XSD。若为空，则只使用简单数据类型，比如<code>xsd:String</code>和<code>xsd:long</code>。</li>
<li><strong>消息（Message）：</strong>定义了实现服务的相关消息。消息使用的数据类型来自前面的类型部分。消息的顺序表明了服务的请求模式：“in/out”对应请求/响应（request/response）模式；“out/in”对应要求/响应（solicit/response）模式。</li>
<li><strong>portType：</strong>以命名的操作描述了服务，每一个操作都是一个或多个消息。服务操作的名称由Web服务方法的注解<code>@WebMethods</code>指定。“portType”与Java接口类似，抽象描述服务而不包括实现细节。</li>
<li><strong>绑定（Binding）：</strong> WSDL定义从抽象到具体的描述。绑定部分可类比为Java接口的实现。它详细说明了“portType”部分的抽象定义：<ul>
<li><code>&lt;soap:binding style=&quot;RPC&quot; transport=&quot;http://schemas.xmlsoap.org/soap/http&quot;&gt;</code>其中<code>transport</code>属性指明收发SOAP消息所使用的传输协议。</li>
<li><code>style</code>属性可选“rpc”或“document”，默认为“document”。由SEI中的<code>@SOAPBinding(style=Style.RPC)</code>指定。</li>
<li>SOAP消息中使用的数据编码格式有两种：“literal”（逐字的）和“encoded”。其中“encoded”不符合WS-I指导原则，一般不使用。</li>
</ul>
</li>
<li><strong>服务（service）：</strong>指定了一个或多个端点，端点中描述了服务的功能和所包括的操作。从技术上看，服务部分包括一个或多个port（端口），每个port包括portType（接口）及与之对应的binding（接口实现）。port一词源自分布式系统。</li>
</ul>
<h2 id="2-4-wsgen-工具与-JAX-B-工件（Artifacts）"><a href="#2-4-wsgen-工具与-JAX-B-工件（Artifacts）" class="headerlink" title="2.4 wsgen 工具与 JAX-B 工件（Artifacts）"></a>2.4 wsgen 工具与 JAX-B 工件（Artifacts）</h2><p>任何 Document 样式的服务，都需要由 wsgen 工具产生的工件（Artifacts，支持客户端开发的相关代码资源）。<br>假设 TimeServerImpl.class(注意是 <strong>.class</strong> 而不是 <strong>.java</strong>)的路径为 <code>C:/workspace/MyProject/build/classes/com/demo/TimeServerImpl.class</code>，则需要在 <code>C:/workspace/MyProject/build/classes</code> 目录内运行下列命令，否则提示 <code>Class Not Found.</code><br><code>wsgen -keep -cp . com.demo.TimeServerImpl</code><br>运行该命令后将在 <code>../com/demo</code> 目录中生成一个“javax”文件夹，里面包含生成的代码资源。<br>在底层，wsgen 工具利用 JAX-B（Java API for XML-Binding）相关的 API 包实现“Java对象<strong>编码（Marshal）</strong>为 XML 文档”和“XML 文档<strong>解码（Unmarshal）</strong>为 Java 对象”的功能。<br>具体的注解见 <code>javax.xml.bind.annotation.*</code>。</p>
<p><strong>利用wsgen工具产生WSDL文档</strong><br><code>wsgen -cp &quot;.&quot; -wsdl com.demo.TimeServerImpl</code><br>命令运行目录同前文所述。运行后将在<code>../MyProject/build/classes</code>内生成相应的<code>.wsdl</code>和<code>.xsd</code>。</p>
<p>#3. Web Service注解<br>JSR 181<br><strong>注释类：</strong> </p>
<p>##javax.jws.WebService<br><strong>注释：</strong><br>当实现 Web Service 时，<code>@WebService</code> 注释标记 Java 类；实现 Web Service 接口时，标记服务端点接口（SEI）。<br>要点：<br>• 实现 Web Service 的 Java 类必须指定 <code>@WebService</code> 或 <code>@WebServiceProvider</code> 注释。不能同时提供这两种注释。<br>• 此注释适用于客户机/服务器 SEI 或 JavaBeans 端点的服务器端点实现类。<br>• 如果注释通过 <code>endpointInterface</code> 属性引用了某个 SEI，那么还必须使用 <code>@WebService</code> 注释来注释该 SEI。<br><strong>属性：</strong><br>注释目标：类型<br>• <em>name</em><br><code>wsdl:portType</code> 的名称。缺省值为 Java 类或接口的非限定名称。（字符串）<br>• <em>targetNamespace</em><br>指定从 Web Service 生成的 WSDL 和 XML 元素的 XML 名称空间。缺省值为从包含该 Web Service 的包名映射的名称空间。（字符串）<br>• <em>serviceName</em><br>指定 Web Service 的服务名称<code>wsdl:service</code>。缺省值为 “Java 类的简单名称 + Service”。（字符串）<br>• <em>endpointInterface</em><br>指定用于定义服务的抽象 Web Service 约定的服务端点接口的限定名。如果指定了此限定名，那么会使用该服务端点接口来确定抽象 WSDL 约定。（字符串）<br>• <em>portName</em><br><code>wsdl:portName</code>。缺省值为 WebService.name+Port。（字符串）<br>• <em>wsdlLocation</em><br>指定用于定义 Web Service 的 WSDL 文档的 Web 地址。Web 地址可以是相对路径或绝对路径。（字符串）</p>
<p><strong>注释类：</strong> </p>
<p>##javax.jws.WebMethod<br><strong>注释：</strong><br><code>@WebMethod</code> 注释表示作为一项 Web Service 操作的方法。<br>将此注释应用于客户机或服务器服务端点接口（SEI）上的方法，或者应用于 JavaBeans 端点的服务器端点实现类。<br>要点：<br>• 仅支持在使用 <code>@WebService</code> 注释来注释的类上使用 <code>@WebMethod</code> 注释。<br><strong>属性：</strong><br>注释目标：方法<br>• <em>operationName</em><br>指定与此方法相匹配的 <code>wsdl:operation</code> 的名称。缺省值为 Java 方法的名称。（字符串）<br>• <em>action</em><br>定义此操作的行为。对于 SOAP 绑定，此值将确定 SOAPAction 头的值。缺省值为 Java 方法的名称。（字符串）<br>• <em>exclude</em><br>指定是否从 Web Service 中排除某一方法。缺省值为 false。（布尔值）</p>
<p><strong>注释类：</strong> </p>
<p>##javax.jws.Oneway<br><strong>注释：</strong><br><code>@Oneway</code> 注释将一个方法表示为只有输入消息而没有输出消息的 Web Service 单向操作。<br>将此注释应用于客户机或服务器服务端点接口（SEI）上的方法，或者应用于 JavaBeans 端点的服务器端点实现类。<br><strong>属性：</strong><br>注释目标：方法<br>没有适用于 Oneway 注释的属性。</p>
<p><strong>注释类：</strong> </p>
<p>##javax.jws.WebParam<br><strong>注释：</strong><br><code>@WebParam</code> 注释用于定制从单个参数至 Web Service 消息部件和 XML 元素的映射。<br>将此注释应用于客户机或服务器服务端点接口（SEI）上的方法，或者应用于 JavaBeans 端点的服务器端点实现类。<br><strong>属性：</strong><br>注释目标：参数<br>• <em>name</em><br>参数的名称。如果操作是远程过程调用（RPC）类型并且未指定<code>partName</code> 属性，那么这是用于表示参数的 <code>wsdl:part</code> 属性的名称。如果操作是文档类型或者参数映射至某个头，那么 <code>name</code> 是用于表示该参数的 XML 元素的局部名称。如果操作是文档类型、参数类型为 BARE 并且方式为 OUT 或 INOUT，那么必须指定此属性。（字符串）<br>• <em>partName</em><br>定义用于表示此参数的 <code>wsdl:part</code> 属性的名称。仅当操作类型为 RPC 或者操作是文档类型并且参数类型为 BARE 时才使用此参数。（字符串）<br>• <em>targetNamespace</em><br>指定参数的 XML 元素的 XML 名称空间。当属性映射至 XML 元素时，仅应用于文档绑定。缺省值为 Web Service 的 <code>targetNamespace</code>     。（字符串）<br>• <em>mode</em><br>此值表示此方法的参数流的方向。有效值为 IN、INOUT 和 OUT。（字符串）<br>• <em>header</em><br>指定参数是在消息头还是消息体中。缺省值为 false。（布尔值）</p>
<p><strong>注释类：</strong> </p>
<p>##javax.jws.WebResult<br><strong>注释：</strong><br><code>@WebResult</code> 注释用于定制从返回值至 WSDL 部件或 XML 元素的映射。<br>将此注释应用于客户机或服务器服务端点接口（SEI）上的方法，或者应用于 JavaBeans 端点的服务器端点实现类。<br><strong>属性：</strong><br>注释目标：方法<br>• <em>name</em><br>当返回值列示在 WSDL 文件中并且在连接上的消息中找到该返回值时，指定该返回值的名称。对于 RPC 绑定，这是用于表示返回值的 <code>wsdl:part</code> 属性的名称。对于文档绑定，<code>name</code>参数是用于表示返回值的 XML 元素的局部名。对于 RPC 和 DOCUMENT/WRAPPED 绑定，缺省值为 return。对于 DOCUMENT/BARE 绑定，缺省值为”方法名 + Response”。（字符串）<br>• <em>targetNamespace</em><br>指定返回值的 XML 名称空间。仅当操作类型为 RPC 或者操作是文档类型并且参数类型为 BARE 时才使用此参数。（字符串）<br>• <em>header</em><br>指定头中是否附带结果。缺省值为false。（布尔值）<br>• <em>partName</em><br>指定 RPC 或 DOCUMENT/BARE 操作的结果的部件名称。缺省值为<code>@WebResult.name</code>。（字符串）</p>
<p><strong>注释类：</strong> </p>
<p>##javax.jws.HandlerChain<br><strong>注释：</strong><br><code>@HandlerChain</code> 注释用于使 Web Service 与外部定义的处理程序链相关联。<br>只能通过对 SEI 或实现类使用 <code>@HandlerChain</code> 注释来配置服务器端的处理程序。<br>但是可以使用多种方法来配置客户端的处理程序。可以通过对生成的服务类或者 SEI 使用 <code>@HandlerChain</code> 注释来配置客户端的处理程序。此外，可以按程序在服务上注册您自己的 HandlerResolver 接口实现，或者按程序在绑定对象上设置处理程序链。<br><strong>属性：</strong><br>注释目标：类型<br>• <em>file</em><br>指定处理程序链文件所在的位置。文件位置可以是采用外部格式的绝对 java.net.URL，也可以是类文件中的相对路径。（字符串）<br>• <em>name</em><br>指定配置文件中处理程序链的名称。（字符串）</p>
<p><strong>注释类：</strong> </p>
<p>##javax.jws.SOAPBinding<br><strong>注释：</strong><br><code>@SOAPBinding</code> 注释指定 Web Service 与 SOAP 消息协议之间的映射。<br>将此注释应用于客户机或服务器服务端点接口（SEI）上的类型或方法，或者应用于 JavaBeans 端点的服务器端点实现类。<br>方法级别的注释仅限于它可以指定的对象，仅当 style 属性为 DOCUMENT 时才使用该注释。如果未指定方法级别的注释，那么将使用类型的 <code>@SOAPBinding</code> 行为。<br><strong>属性：</strong><br>注释目标：类型或方法<br>• <em>style</em><br>定义发送至 Web Service 和来自 Web Service 的消息的编码样式。有效值为 DOCUMENT 和 RPC。缺省值为 DOCUMENT。（字符串）<br>• <em>use</em><br>定义用于发送至 Web Service 和来自 Web Service 的消息的格式。缺省值为 LITERAL。ENCODED 在 Feature Pack for Web Services 中不受支持。（字符串）<br>• <em>parameterStyle</em><br>确定方法的参数是否表示整个消息体，或者参数是否是封装在执行操作之后命名的顶级元素中的元素。有效值为 WRAPPED 或 BARE。对于DOCUMENT 类型的绑定只能使用 BARE 值。缺省值为 WRAPPED。（字符串）</p>
<p>JSR 224<br><strong>注释类：</strong> </p>
<p>##javax.xml.ws.BindingType<br><strong>注释：</strong><br><code>@BindingType</code> 注释指定在发布此类型的端点时要使用的绑定。<br>将此注释应用于 JavaBeans 端点或提供程序端点的服务器端点实现类。<br>要点：<br>• 可以通过将该注释的值指定为 javax.xml.ws.soap.SOAPBinding.SOAP11HTTP_MTOM_BINDING 或 javax.xml.ws.soap.SOAPBinding.SOAP12HTTP_MTOM_BINDING 来对 Java bean 端点实现类使用 <code>@BindingType</code> 注释以启用 MTOM。<br><strong>属性：</strong><br>注释目标：类型：<br>• <em>value</em><br>指示绑定标识 Web 地址。有效值为 javax.xml.ws.soap.SOAPBinding.SOAP11HTTP_BINDING、javax.xml.ws.soap.SOAPBinding.SOAP12HTTP_BINDING 和 javax.xml.ws.http.HTTPBinding.HTTP2HTTP_BINDING。缺省值为 javax.xml.ws.soap.SOAPBinding.SOAP11HTTP_BINDING。（字符串）</p>
<p><strong>注释类：</strong> </p>
<p>##javax.xml.ws.RequestWrapper<br><strong>注释：</strong><br><code>@RequestWrapper</code> 注释提供 JAXB 生成的请求包装器 bean、元素名称和名称空间，用于对在运行时使用的请求包装器 bean 进行序列化和反序列化。<br>从 Java 对象开始时，此元素用来解决 document literal 方式下的重载冲突。在这种情况下，只有 className 属性是必需的。<br>将此注释应用于客户机或服务器服务端点接口（SEI）上的方法，或者应用于 JavaBeans 端点的服务器端点实现类。<br><strong>属性：</strong><br>注释目标：方法<br>• <em>localName</em><br>指定用于表示请求包装器的 XML 模式元素的局部名称。缺省值为在 javax.jws.WebMethod 注释中定义的 operationName。（字符串）<br>• <em>targetNamespace</em><br>指定请求包装器方法的 XML 名称空间。缺省值为 SEI 的目标名称空间。（字符串）<br>• <em>className</em><br>指定用于表示请求包装器的类的名称。（字符串）</p>
<p><strong>注释类：</strong> </p>
<p>##javax.xml.ws.ResponseWrapper<br><strong>注释：</strong><br><code>@ResponseWrapper</code> 注释提供 JAXB 生成的响应包装器 bean、元素名称和名称空间，用于对在运行时使用的响应包装器 bean 进行序列化和反序列化。<br>从 Java 对象开始时，此元素用来解决 document literal 方式下的重载冲突。在这种情况下，只有 className 属性是必需的。<br>将此注释应用于客户机或服务器服务端点接口（SEI）上的方法，或者应用于 JavaBeans 端点的服务器端点实现类。<br><strong>属性：</strong><br>注释目标：方法<br>• <em>localName</em><br>指定用于表示请求包装器的 XML 模式元素的局部名称。缺省值为 operationName + Response。operationName 是在 <code>javax.jws.WebMethod</code> 注释中定义的。（字符串）<br>• <em>targetNamespace</em><br>指定请求包装器方法的 XML 名称空间。缺省值为 SEI 的目标名称空间。（字符串）<br>• <em>className</em><br>指定用于表示响应包装器的类的名称。（字符串）</p>
<p><strong>注释类：</strong> </p>
<p>##javax.xml.ws.ServiceMode<br><strong>注释：</strong><br><code>@ServiceMode</code> 注释指定服务提供者是需要对整个协议消息具有访问权还是只需对消息有效内容具有访问权。<br>要点：<br>• 仅支持在使用 <code>@WebServiceProvider</code> 注释来注释的类上使用 <code>@ServiceMode</code> 注释。<br><strong>属性：</strong><br>注释目标：类型<br>• <em>value</em><br>指示提供者类是接受消息的有效内容 PAYLOAD 还是整个消息 MESSAGE。缺省值为 PAYLOAD。（字符串）</p>
<p><strong>注释类：</strong> </p>
<p>##javax.xml.ws.WebFault<br><strong>注释：</strong><br><code>@WebFault</code> 注释将 WSDL 故障映射至 Java 异常。对从 WSDL 故障消息引用的全局元素生成的 JAXB 类型进行序列化期间，该注释用来捕获故障的名称。它还可以用来定制从特定于服务的异常到 WSDL 故障的映射。<br>此注释只能应用于客户机或服务器上的故障实现类。<br><strong>属性：</strong><br>注释目标：类型<br>• <em>name</em><br>指定用于表示 WSDL 文件中相应故障的 XML 元素的局部名称。必须指定实际值。（字符串）<br>• <em>targetNamespace</em><br>指定用于表示 WSDL 文件中相应故障的 XML 元素的名称空间。（字符串）<br>• <em>faultBean</em><br>指定故障 bean 类的名称。（字符串）</p>
<p><strong>注释类：</strong> </p>
<p>##javax.xml.ws.WebServiceProvider<br><strong>注释：</strong><br><code>@WebServiceProvider</code> 注释表示一个类满足 JAX-WS 提供程序实现类的要求。<br>要点：<br>• 实现 Web Service 的 Java 类必须指定 <code>@WebService</code> 或 <code>@WebServiceProvider</code> 注释。不能同时提供这两种注释。<br>• 只有服务实现类才支持 <code>@WebServiceProvider</code> 注释。<br>• 任何具有 <code>@WebServiceProvider</code> 注释的类都必须具有名为 invoke 的操作。<br><strong>属性：</strong><br>注释目标：类型<br>• <em>targetNamespace</em><br>指定从 Web Service 生成的 WSDL 和 XML 元素的 XML 名称空间。缺省值为从包含该 Web Service 的包名映射的名称空间。（字符串）<br>• <em>serviceName</em><br>指定 Web Service 的服务名称 <code>wsdl:service</code>。缺省值为 “Java 类的简单名称 + Service”。（字符串）<br>• <em>portName</em><br><code>wsdl:portName</code>。缺省值为”类的名称 + Port”。（字符串）<br>• <em>wsdlLocation</em></p>
<p>JSR 250<br><strong>注释类：</strong></p>
<p>##javax.annotation.Resource<br><strong>注释：</strong><br><code>@Resource</code> 注释标记应用程序所需要的 WebServiceContext 资源。<br>将此注释应用于 JavaBeans 端点或提供程序端点的服务器端点实现类。对容器进行初始化时，容器会将 WebServiceContext 资源的实例添加到端点实现中。<br><strong>属性：</strong><br>注释目标：字段或方法<br>• <em>type</em><br>指示资源的 Java 类型。您需要使用缺省值 java.lang.Object 或者 javax.xml.ws.Web ServiceContext 值。如果类型是缺省值，那么必须将资源添加到字段或方法中。在这种情况下，字段的类型或者由方法定义的 JavaBeans 属性的类型必须为 javax.xml.ws.WebServiceContext。（字符串）</p>
<p><strong>注释类：</strong></p>
<p>##javax.annotation.PostConstruct<br><strong>注释：</strong><br><code>@PostConstruct</code> 注释标记需要在对类执行依赖性注入之后才执行的方法。<br>将此注释应用于 JAX-WS 应用程序处理程序、JavaBeans 端点或提供程序端点的服务器端点实现类。<br><strong>属性：</strong><br>注释目标：方法</p>
<p><strong>注释类：</strong></p>
<p>##javax.annotation.PreDestroy<br><strong>注释：</strong><br><code>@PreDestroy</code> 注释标记在容器除去实例时必须执行的方法。<br>将此注释应用于 JAX-WS 应用程序处理程序、JavaBeans 端点或提供程序端点的服务器端点实现类。<br><strong>属性：</strong><br>注释目标：方法</p>
<p>适用于使用 <code>@WebService</code> 注释的类的方法的规则<br>下列规则适用于使用 <code>@WebService</code> 注释来注释的类的方法。<br>如果某个实现类的 <code>@WebService</code> 注释引用了 SEI，那么该实例类不能具有任何 <code>@WebMethod</code> 注释。<br>无论是否指定了 <code>@WebMethod</code> 注释，SEI 的所有公用方法都被认为是已显示的方法。在包含 exclude 属性的 SEI 上使用 <code>@WebMethod</code> 注释是不正确的。<br>对于不引用 SEI 的实现类，如果对 <code>@WebMethod</code> 注释指定了值 exclude=true，那么不会显示该方法。如果未指定 <code>@WebMethod</code> 注释，那么将显示包括继承的方法在内的所有公用方法，但是不包括从 java.lang.Object 继承的方法。</p>
<h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="WSDL详细报文"><a href="#WSDL详细报文" class="headerlink" title="WSDL详细报文"></a><span id="wsdl">WSDL详细报文</span></h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">definitions</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">"http://schemas.xmlsoap.org/wsdl/"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tns</span>=<span class="string">"http://ts.ch01/"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsd</span>=<span class="string">"http://www.w3.org/2001/XMLSchema"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:soap</span>=<span class="string">"http://schemas.xmlsoap.org/wsdl/soap/"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">targetNamespace</span>=<span class="string">"http://ts.ch01/"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">name</span>=<span class="string">"TimeServerImplService"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">types</span>&gt;</span><span class="tag">&lt;/<span class="name">types</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">message</span> <span class="attr">name</span>=<span class="string">"getTimeAsString"</span>&gt;</span><span class="tag">&lt;/<span class="name">message</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">message</span> <span class="attr">name</span>=<span class="string">"getTimeAsStringResponse"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">part</span> <span class="attr">name</span>=<span class="string">"return"</span> <span class="attr">type</span>=<span class="string">"xsd:string"</span>&gt;</span><span class="tag">&lt;/<span class="name">part</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">message</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">message</span> <span class="attr">name</span>=<span class="string">"getTimeAsElapsed"</span>&gt;</span><span class="tag">&lt;/<span class="name">message</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">message</span> <span class="attr">name</span>=<span class="string">"getTimeAsElapsedResponse"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">part</span> <span class="attr">name</span>=<span class="string">"return"</span> <span class="attr">type</span>=<span class="string">"xsd:long"</span>&gt;</span><span class="tag">&lt;/<span class="name">part</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">message</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">portType</span> <span class="attr">name</span>=<span class="string">"TimeServer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">operation</span> <span class="attr">name</span>=<span class="string">"getTimeAsString"</span> <span class="attr">parameterOrder</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">message</span>=<span class="string">"tns:getTimeAsString"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">output</span> <span class="attr">message</span>=<span class="string">"tns:getTimeAsStringResponse"</span>&gt;</span><span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">operation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">operation</span> <span class="attr">name</span>=<span class="string">"getTimeAsElapsed"</span> <span class="attr">parameterOrder</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">message</span>=<span class="string">"tns:getTimeAsElapsed"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">output</span> <span class="attr">message</span>=<span class="string">"tns:getTimeAsElapsedResponse"</span>&gt;</span><span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">operation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">portType</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">binding</span> <span class="attr">name</span>=<span class="string">"TimeServerImplPortBinding"</span> <span class="attr">type</span>=<span class="string">"tns:TimeServer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">soap:binding</span> <span class="attr">style</span>=<span class="string">"rpc"</span> <span class="attr">transport</span>=<span class="string">"http://schemas.xmlsoap.org/soap/http"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">soap:binding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">operation</span> <span class="attr">name</span>=<span class="string">"getTimeAsString"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">soap:operation</span> <span class="attr">soapAction</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">soap:operation</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">soap:body</span> <span class="attr">use</span>=<span class="string">"literal"</span> <span class="attr">namespace</span>=<span class="string">"http://ts.ch01/"</span>&gt;</span><span class="tag">&lt;/<span class="name">soap:body</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">soap:body</span> <span class="attr">use</span>=<span class="string">"literal"</span> <span class="attr">namespace</span>=<span class="string">"http://ts.ch01/"</span>&gt;</span><span class="tag">&lt;/<span class="name">soap:body</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">operation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">operation</span> <span class="attr">name</span>=<span class="string">"getTimeAsElapsed"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">soap:operation</span> <span class="attr">soapAction</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">soap:operation</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">soap:body</span> <span class="attr">use</span>=<span class="string">"literal"</span> <span class="attr">namespace</span>=<span class="string">"http://ts.ch01/"</span>&gt;</span><span class="tag">&lt;/<span class="name">soap:body</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">soap:body</span> <span class="attr">use</span>=<span class="string">"literal"</span> <span class="attr">namespace</span>=<span class="string">"http://ts.ch01/"</span>&gt;</span><span class="tag">&lt;/<span class="name">soap:body</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">operation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">binding</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">service</span> <span class="attr">name</span>=<span class="string">"TimeServerImplService"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">port</span> <span class="attr">name</span>=<span class="string">"TimeServerImplPort"</span> <span class="attr">binding</span>=<span class="string">"tns:TimeServerImplPortBinding"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">soap:address</span> <span class="attr">location</span>=<span class="string">"http://localhost:9876/ts"</span>&gt;</span><span class="tag">&lt;/<span class="name">soap:address</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="#return1">返回</a></p>
<p>[^new Date()]:该服务以字符串的形式向调用者返回当前系统时间或返回一个 Unix 时间戳，即从1970年1月1日（UTC（Universal Time Coordinated）/GMT（Greenwich Mean Time）的午夜零点）开始到目前所经过的秒数，不考虑闰秒。最早出现的 UNIX 操作系统考虑到计算机产生的年代和应用的时限综合取了 1970 年 1 月 1 日作为 UNIX TIME 的纪元时间(开始时间)，而 java 作为源于 UNIX 的一种语言自然也遵循了这一约束。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/Java/Java 8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zeerho">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zeerho">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/Java/Java 8/" itemprop="url">Java 8</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-01T09:00:00+08:00">2017-01-01</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Lamda"><a href="#Lamda" class="headerlink" title="Lamda"></a>Lamda</h1>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/01/Java/Java 8/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/工具/Git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zeerho">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zeerho">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/工具/Git/" itemprop="url">Git</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-01T09:00:00+08:00">2017-01-01</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="暂存"><a href="#暂存" class="headerlink" title="暂存"></a>暂存</h1><p><code>git add -i</code> 进入交互模式</p>
<ul>
<li>status：展示已暂存的（staged）、未暂存的（unstaged）和该文件的路径。</li>
<li>update：命令行提示符变为 <code>Update&gt;&gt;</code>，通过输入数字来选择文件，数字之间用空格或逗号分隔，如：2-3 5,6；数字前加减号取消选择。最后输入一个空行表示确认，被选择的文件会被暂存。</li>
<li>revert：交互模式同 update。被选择的文件会用 HEAD 覆盖暂存区内容。</li>
<li>add untracked：交互模式同 update。</li>
<li>patch：选择一个文件，对文件内容分块依次决定是否暂存。<ul>
<li>y：暂存此块。</li>
<li>n：不暂存此块。</li>
<li>q：取消并退出。</li>
<li>a：暂存此块以及后面的块。</li>
<li>d：不暂存此块以及后面的块。</li>
<li>g：选择并跳转到某个块。</li>
<li>/：用正则表达式搜索某个块。</li>
<li>j：暂时不决定此块，跳转到下一个未决定的块。</li>
<li>J：暂时不决定此块，跳转到下一个块。</li>
<li>k：暂时不决定此块，跳转到上一个未决定的块。</li>
<li>K：暂时不决定此块，跳转到上一个块。</li>
<li>s：将当前块继续分割成小块。</li>
<li>e：编辑当前块。</li>
<li>?：帮助</li>
</ul>
</li>
<li>diff：展示 HEAD 和暂存区之间的区别。</li>
<li>quit</li>
<li><p>help</p>
</li>
<li><p><code>git add -p</code> 同交互模式中的 patch。</p>
</li>
<li><code>-N|--intent-to-add</code> 将未跟踪的文件列为要跟踪，而不是直接 add 到暂存区。这样方便比较工作区和暂存区间的差异。</li>
</ul>
<h1 id="提交"><a href="#提交" class="headerlink" title="提交"></a>提交</h1><ul>
<li><code>git commit</code><br>打开编辑器来撰写 commit 信息</li>
<li><code>git commit -m &quot;message&quot;</code><br>commit 到 Head，并附带备注 “message”</li>
<li><code>git commit -am &quot;message&quot;</code><br>结合了 add . 和 commit，不适用于新添加的文件</li>
<li><code>git commit --amend</code><br>修改最近一次提交，使用当前暂存区做提交，并可以修改提交信息</li>
</ul>
<h1 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h1><ul>
<li><code>git rm [-f|--force] [-n] [-r] [--cached] [--ignore-unmatch] [--quiet] [--] {filename}...</code><br>删除暂存区和工作区中的指定文件。该文件在三棵树中的内容必须相同，否则要用 <code>-f</code> 强制删除暂存区和工作区，或用 <code>--cached</code> 删除暂存区（此时暂存区必须要么跟工作区相同，要么跟版本库相同）。<ul>
<li><code>{filename}</code> 可以用通配符（要做 shell 转义）</li>
<li><code>-f|--force</code> 强制删除暂存区和工作区中的指定文件（否则要求该文件在三棵树中的内容相同）</li>
<li><code>-n|--dry-run</code> 预览操作结果</li>
<li><code>-r</code> 指定目录做递归删除</li>
<li><code>--cached</code> 只从暂存区删除</li>
<li><code>--ignore-unmatch</code> 若未匹配到文件也不显示错误</li>
<li><code>-q|--quiet</code> 不显示执行结果</li>
</ul>
</li>
<li><code>git rm [-r] --cached {filename}</code><br>删除 index 中的文件，保留工作区中的文件，<code>-r</code> 表示递归</li>
<li><code>git clean [-d] [-f] [-i] [-n] [-q] [-e &lt;pattern&gt;] [-x | -X] [--] &lt;path&gt;...</code> 清除未跟踪的文件和目录<ul>
<li><code>-n</code> 预览将被删除的文件，不会直接删除。</li>
<li><code>-d</code> 除了未跟踪的文件外，还删除未跟踪的目录。</li>
<li><code>-f</code> <code>--force</code> 若未将 <code>clean.requireForce</code> 选项置为 false，则不能删除文件和目录，除非带有参数 <code>-f</code>/<code>-n</code>/<code>-i</code>。对于子目录中带有 .git 文件夹的，需要给出两个 <code>-f</code> 参数。</li>
<li><code>-x</code> 扫描未跟踪文件时无视 .gitignore 和 $GIT_DIR/info/exclude，但仍会考虑 <code>-e</code> 参数。</li>
<li><code>-X</code> 仅删除被 git 忽略的文件。通常用来在清理的同时保留用户自建的文件。</li>
<li><code>-q</code> <code>--quiet</code> 仅报告错误。</li>
<li><code>-i</code> 交互式。</li>
</ul>
</li>
</ul>
<h1 id="撤销"><a href="#撤销" class="headerlink" title="撤销"></a>撤销</h1><ul>
<li><code>git reset HEAD {file}...</code> 用版本库覆盖暂存区</li>
<li><code>git checkout {file}...</code> 用暂存区覆盖工作区</li>
<li><code>git clean -fd</code> 删除未跟踪的文件和目录</li>
<li><code>git reset [--soft|--mixed|--hard] {HEAD~|commit_id}</code> 重置头指针<ul>
<li><code>soft</code> 只回退版本库，不回退暂存区和工作区；</li>
<li><code>mixed</code> 缺省选项，回退版本库和暂存区；</li>
<li><code>hard</code> 回退版本库、暂存区和工作区</li>
</ul>
</li>
</ul>
<h1 id="反转"><a href="#反转" class="headerlink" title="反转"></a>反转</h1><ul>
<li><code>git revert [--[no-]edit] [-n] [-m parent-number] [-s] [-S[{keyId}]] {commit}...</code><ul>
<li><code>-e</code> <code>--edit</code> 不自动提交反转，让用户先手动编辑提交信息。这是终端的默认参数。</li>
<li><code>--no-edit</code> 自动提交反转。</li>
<li><code>-n</code> <code>--no-commit</code> 反转但不自动产生提交。</li>
<li><code>-m parent-number</code> <code>--mainline parent-number</code> 用于反转合并提交。</li>
</ul>
</li>
<li><code>git revert --continue</code></li>
<li><code>git revert --quit</code></li>
<li><code>git revert --abort</code></li>
</ul>
<h1 id="重命名"><a href="#重命名" class="headerlink" title="重命名"></a>重命名</h1><ul>
<li><code>git mv {file_from} {file_to}</code><br>相当于依次执行下面两条命令<ul>
<li><code>git rm {file_from}</code></li>
<li><code>git add {file_to}</code></li>
</ul>
</li>
</ul>
<h1 id="储藏"><a href="#储藏" class="headerlink" title="储藏"></a>储藏</h1><ul>
<li><code>git stash [--keep-index] [-u] [save &#39;{message}&#39;]</code><br>储藏当前所有未提交的改动，可附加备注；<code>--keep-index</code> 表示不储藏暂存区；<code>-u</code> 表示储藏未追踪的文件</li>
<li><code>git stash list</code><br>列出储藏栈中内容</li>
<li><code>git stash apply [stash@{n}] [--index]</code><br>恢复指定某次的储藏内容中的工作区文件，缺省为最近一次的；<code>--index</code> 表示恢复工作区和暂存区文件</li>
<li><code>git stash drop [stash@{n}]</code><br>删除储藏</li>
<li><code>git stash clear</code><br>清除所有储藏</li>
<li><code>git stash pop [stash@{n}] [--index]</code><br>应用并删除储藏</li>
<li><code>git stash branch {branch_name} [stash@{n}]</code><br>新建一个分支并应用储藏内容，如果没有冲突则会自动删除该储藏</li>
<li><code>git stash show [{stash}]</code><br>查看 stash 改动内容。可以接受参数来修改展示方式（同 <code>git diff</code>）</li>
</ul>
<h1 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h1><ul>
<li><code>git log -p -{n}</code><br>显示最近 n 次的提交日志，并展开每次提交的内容差异</li>
<li><code>git log --stat</code><br>仅显示简要的增改行数统计</li>
<li><code>git log --shortstat</code><br>仅显示 <code>--stat</code> 中最后的行数修改添加移除的统计</li>
<li><code>git log --name-only</code><br>仅在提交信息后显示已修改的文件清单</li>
<li><code>git log --name-status</code><br>显示新增、修改、删除的文件清单</li>
<li><code>git log --abbrev-commit</code><br>仅显示 SHA-1 的前几个字符</li>
<li><code>git log --relative-date</code><br>使用较短的相对时间显示（如：“2 weeks ago”）</li>
<li><code>git log --graph</code><br>显示 ASCII 图形表示的分支合并历史</li>
<li><code>git log --pretty</code><br>使用其他格式显示历史提交信息。可用选项包括 <code>oneline</code>、<code>short</code>、<code>full</code>、<code>fuller</code>、<code>format</code>（后跟指定格式）</li>
<li><code>git log [--left-right] {b1}...{b2}</code><br>只存在于 {b1} 和 {b2} 中的一个，而不同时存在于两者的提交；<code>--left-right</code> 会显示每个提交具体在哪个分支中</li>
</ul>
<p><code>git log [{options}] [{revision_range}] [[\\--] {path}...]</code></p>
<ul>
<li>{options}<ul>
<li><code>--follow</code> 继续显示文件被移动或重命名前的历史，只针对单个文件有效。</li>
<li><code>--no-decorate</code> <code>--decorate[=short|full|auto|no]</code></li>
<li><code>--source</code></li>
<li><code>--use-mailmap</code></li>
<li><code>--full-diff</code></li>
<li><code>--log-size</code></li>
<li><code>-L {start},{end}:{file}</code></li>
<li><code>-L:{funcname}:{file}</code></li>
</ul>
</li>
<li>{revision_range}</li>
<li>[\–] {path}</li>
<li>提交范围限制<ul>
<li><code>-{number}</code></li>
<li><code>-n {number}</code></li>
<li><code>--max-count={number}</code></li>
<li><code>--skip={number}</code></li>
<li><code>--since={date}</code></li>
<li><code>--after={date}</code></li>
<li><code>--until={date}</code></li>
<li><code>--before={date}</code></li>
<li><code>--author={pattern}</code></li>
<li><code>--committer={pattern}</code></li>
<li><code>--greg-reflog={pattern}</code></li>
<li><code>--greg={pattern}</code></li>
<li><code>--all-match</code></li>
<li><code>--invert-greg</code></li>
<li><code>-i</code> <code>--regexp-ignore-case</code></li>
<li><code>--basic-regexp</code></li>
<li><code>-E</code> <code>--extended-regexp</code></li>
<li><code>-F</code> <code>--fixed-strings</code></li>
<li><code>--perl-regexp</code></li>
<li><code>--remove-empty</code></li>
<li><code>--merges</code></li>
<li><code>--nomerges</code></li>
<li><code>--min-parents={number}</code> <code>--max-parents={number}</code> <code>--no-min-parents</code> <code>--no-max-parents</code></li>
<li><code>--first-parent</code></li>
<li><code>--not</code></li>
<li><code>--all</code></li>
<li><code>--branches[={pattern}]</code></li>
<li><code>--tags[={pattern}]</code></li>
<li><code>--remotes[={pattern}]</code></li>
<li><code>--glob={glob-pattern}</code></li>
<li><code>--exclude={glob-pattern}</code></li>
<li><code>--reflog</code></li>
<li><code>--ignore-missing</code></li>
<li><code>--bisect</code></li>
<li><code>--stdin</code></li>
<li><code>--cherry-mark</code></li>
<li><code>--cherry-pick</code></li>
<li><code>--left-only</code></li>
<li><code>--right-only</code></li>
<li><code>--cherry</code></li>
<li><code>-g</code> <code>--walk-reflogs</code></li>
<li><code>--merge</code></li>
<li><code>--boundary</code></li>
</ul>
</li>
</ul>
<h1 id="衍合"><a href="#衍合" class="headerlink" title="衍合"></a>衍合</h1><ul>
<li><code>git rebase -i {ref}</code><br>其中 {ref} 为希望重排的提交的父提交。一般只修改提交信息或合并若干提交。若重排提交顺序或修改历史提交中的提交内容，容易发生冲突而需要大量手动解决。</li>
<li><code>git rebase [-i] {branch_to}</code><br>将当前分支衍合进目标分支。完成后原本分开的两条提交线会合并成一条。</li>
</ul>
<h1 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h1><ul>
<li>remote<ul>
<li><code>git remote [-v]</code><br>查看所有远程仓库，<code>-v</code> 额外查看远程仓库的地址</li>
<li><code>git remote show {remote}</code><br>查看远程仓库的详细信息</li>
<li><code>git remote add {shortName} {url}</code><br>添加一个远程仓库，并为其指定一个简称</li>
<li><code>git remote rename {oldName} {newName}</code><br>重命名远程仓库的简称</li>
<li><code>git remote rm {remote}</code><br>移除远程仓库</li>
<li><code>git remote prune {remote}</code><br>清除本地无效的跟踪分支。</li>
</ul>
</li>
<li>clone<ul>
<li><code>git clone [-b {branch}] {url} [{specifiedName}]</code><br>从服务器上克隆仓库。可自定义本地项目的名称，可指明克隆的分支。</li>
</ul>
</li>
<li>checkout<ul>
<li><code>git checkout --track {remote}/{branch}</code><br>从远程分支检出一个跟踪分支，跟踪分支的名字默认为 branch。</li>
<li><code>git checkout -b {localBranch} {remote}/{remoteBranch}</code><br>从远程分支检出一个跟踪分支，并自定义本地分支名。</li>
</ul>
</li>
<li>fetch &amp; pull<ul>
<li><code>git fetch {remote}</code><br>更新远程仓库的信息。</li>
<li><code>git pull</code><br>获取（fetch）并合并（merge）远程分支的改动至对应的跟踪分支。</li>
</ul>
</li>
<li>push<ul>
<li><code>git push [-f] {remote} {branch}</code><br>上传到远程仓库的 branchName 分支，<code>-f</code> 表示不做检查强制重写</li>
<li><code>git push {remote} :{branch}</code> <code>git push origin --delete {branch}</code><br>删除远程的 branch 分支</li>
<li><code>git push {remote} {tag}</code><br>上传标签</li>
<li><code>git push {remote} --tags</code><br>上传所有标签</li>
</ul>
</li>
<li>branch<ul>
<li><code>git branch -r</code><br>查看远程分支</li>
</ul>
</li>
</ul>
<h1 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h1><ul>
<li><code>git branch</code><br>查看本地分支</li>
<li><code>git branch -a</code><br>查看所有分支</li>
<li><code>git branch -v</code><br>查看各分支最后一次提交信息</li>
<li><code>git branch -vv</code><br>查看各分支最后一次提交信息以及对应的 upstream 分支（若有的话）</li>
<li><code>git branch --merge|--no-merged</code><br>查看已/未与当前分支合并的分支</li>
<li><code>git branch {new_branch_name} [{start_point}]</code><br>创建指定名称的新分支，可以指定起始点</li>
<li><code>git checkout {new_branch_name}</code><br>切换到指定名称的分支</li>
<li><code>git checkout -b|--orphan {new_branch_name} [{start_point}]</code><br>创建并切换到指定名称的新分支或空白的新分支。可以指定创建点，通常是 commit-id。</li>
<li><code>git branch -m|-M {old_branch} {new_branch}</code><br>重命名分支。<code>-M</code> 强制覆盖已存在的 <code>{new_branch}</code>。</li>
<li><code>git branch [-d|-D] [-r|--remotes] [{remote}/]{branch_name}</code><ul>
<li><code>-d</code>：分支已经合并到主干后删除分支；</li>
<li><code>-D</code>：强制删除。</li>
<li><code>-r|--remotes</code>：删除跟踪分支。</li>
</ul>
</li>
<li><code>git branch -u {remote}/{remote_branch} [{local_branch}]</code><br><code>git branch --set-upstream-to={remote}/{remote_branch} [{local_branch}]</code><br>对已有分支绑定跟踪分支</li>
</ul>
<h1 id="差异比较"><a href="#差异比较" class="headerlink" title="差异比较"></a>差异比较</h1><p><code>git diff {source_branch} {target_branch}</code><br>查看两个分支之间的差异<br><code>git diff {source_branch}...{target_branch}</code><br>查看 target 分支与 source 和 target 共同祖先之间的差异<br><code>git diff</code><br>暂存区到工作区的变化<br><code>git diff --cached|--staged</code><br>版本库到暂存区的变化<br><code>git diff HEAD</code><br>版本库到工作区的变化</p>
<p>git维护代码分为三部分：“工作区 working directory”、“暂存区 index”、“版本库 head”（分别标注为1，2，3）。<br><code>git add</code> 完成1-&gt;2<br><code>git commit</code> 完成2-&gt;3<br><code>git commit -a</code> 两者结合<br><code>git diff</code> 2到1的变化<br><code>git diff --cached|--staged</code> 3到2的变化<br><code>git diff HEAD</code> 3到1的变化</p>
<h1 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h1><p><code>git merge [-n] [--stat] [--no-commit] [--squash] [--[no-]edit] [-s &lt;strategy&gt;] [-X &lt;strategy-option&gt;] [-S[&lt;keyid&gt;]] [--[no-]allow-unrelated-histories] [--[no-]rerere-autoupdate] [-m &lt;msg&gt;] [&lt;commit&gt;…]</code></p>
<ul>
<li><code>--stat</code> <code>--no-stat</code> <code>-n</code> 显示/不显示合并的差异数据。</li>
<li><code>--commit</code> <code>--no-commit</code> 合并后是否自动提交。</li>
<li><code>--edit</code>/<code>-e</code> <code>--no-edit</code> 合并后是否打开编辑器（来编辑提交信息）。</li>
<li><code>--ff</code> <code>--no-ff</code> 是否使用“fast-forward”合并（若可行）。</li>
<li><code>--ff-only</code> 若不能“fast-forward”则取消合并。</li>
<li><code>-S[&lt;keyid&gt;]</code> <code>--gpg-sign[=&lt;keyid&gt;]</code> 对提交做签名。</li>
<li><code>--log[=&lt;n&gt;]</code> <code>--no-log</code> 将每个被合并的提交转换为单行描述，再将这些描述添加到此次合并的提交信息中。</li>
<li><code>--squash</code> <code>--no-squash</code> 将待合并的所有提交压缩在一起合并到当前工作区，然后需要手动提交这些改动。跟 <code>--no-ff</code> 的区别在于 <code>--squash</code> 只是合并内容，不合并提交线。</li>
<li><code>-Xours|-Xtheirs</code> 若出现冲突则直接使用当前分支/对方分支的内容。</li>
<li><code>-m &lt;msg&gt;</code> 设置此次合并的提交信息（若合并产生一个新提交的话）。</li>
</ul>
<p><code>git merge --abort</code></p>
<p>当合并发生冲突且等待用户解决时即处于合并过程中间状态，此时可以 <code>git merge --abort</code> 取消合并，冲突文件会回滚至合并操作之前的状态。</p>
<p>对于合并开始时未提交的文件，若合并开始后发生了修改，那么合并取消后这些文件可能无法正常回滚。</p>
<p><code>git merge --continue</code></p>
<p>合并发生冲突后继续合并流程（通常先解决冲突）。</p>
<h1 id="版本范围表示"><a href="#版本范围表示" class="headerlink" title="版本范围表示"></a>版本范围表示</h1><ul>
<li><code>git rev-list [--oneline] {commit}</code><br>列出指定提交和它的历史，自上而下依次为自新而旧的顺序。<ul>
<li><code>{commit}</code> 有以下额外形式。<ul>
<li><code>^{commit}</code> 排除此提交及它的历史。</li>
<li><code>{commit}^@</code> 排除提交自身，只包含历史。</li>
<li><code>{commit}^!</code> 排除历史，只包含提交本身。</li>
</ul>
</li>
<li><code>--oneline</code> 单行简明模式。相当于 <code>--pretty=oneline --abbrev-commit</code>。</li>
<li><code>--objects</code> 额外列出结果列表中所有提交包含的对象 ID。</li>
</ul>
</li>
<li><code>git rev-list  {commitA} {commitB}...</code><br>指定多个提交，列出它们各自历史的并集。</li>
<li><code>git rev-list  {commitA}..{commitB}</code><br>排除 A 及它的历史。</li>
<li><code>git rev-list {commitA}...{commitB}</code><br>排除 A 和 B 共同的历史。A 和 B 的书写顺序无关。相当于 <code>A B --not $(git merge-base --all A B)</code>。</li>
</ul>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><ul>
<li><code>ssh-keygen -C myemail -t rsa</code><br>创建 ssh 密钥</li>
<li><code>git gc</code><br>压缩松散对象</li>
<li><code>git cherry-pick {SHA-1}</code><br>将指定提交的代码引入当前分支</li>
<li><code>{ref}^[n]</code><br>引用 {ref} 的父提交，或第 n 父提交（只在合并提交时有用）</li>
<li><code>{ref}~[n]</code><br>引用 {ref} 的第一父提交，或第一父提交的第一父提交……</li>
<li><code>git blame [-C] [-L m,n] {file}</code><br>查看文件内容的最近修改者。<code>-C</code> 可查看文本行的来源文件（如果该行是复制过来的话）；<code>-L m,n</code> 将查看范围限制在第 m ~ n 行</li>
<li><code>gitk --all</code> 包括全部分支</li>
</ul>
<h1 id="内部命令"><a href="#内部命令" class="headerlink" title="内部命令"></a>内部命令</h1><h2 id="统计对象"><a href="#统计对象" class="headerlink" title="统计对象"></a>统计对象</h2><ul>
<li><code>git count-objects [-v|--verbose] [-H|--human-readable]</code><ul>
<li><code>-v|--verbose</code><ul>
<li><code>count</code> 松散对象数量。</li>
<li><code>size</code> 松散对象占用的空间，单位 KB。</li>
<li><code>in-pack</code> 打包的对象数量。</li>
<li><code>size-pack</code> 打包对象占用的空间，单位 KB。</li>
<li><code>prune-packable</code> 既有松散形式又有打包形式存在的对象数量。可用 <code>git prune-packed</code> 清理。</li>
<li><code>garbage</code> 既不是有效的松散对象，又不是有效的打包对象，的对象数量。</li>
<li><code>size-garbage</code> garbage 对象占用的空间，单位 KB。</li>
<li><code>alternate</code> alternate 对象数据库的绝对路径。若路径中包含不可打印字符，则会被双引号和 C 风格的转义符号替换。</li>
</ul>
</li>
<li><code>-H|--human-readable</code> 易读形式。</li>
</ul>
</li>
</ul>
<h2 id="删除对象"><a href="#删除对象" class="headerlink" title="删除对象"></a>删除对象</h2><p>已知文件名的话可以跳过 1 和 2。不介意遍历整个历史的话可以跳过 3。</p>
<ol>
<li>找出大文件对应的对象的 ID</li>
</ol>
<p><code>git verify-pack -v .git/objects/pack/pack-123...abc.idx | sort -k 3 -n | tail -3</code></p>
<p>显示最大的几个对象。<code>verify-pack -v</code> 按以下格式输出打包对象的信息。其中最后两列是对于被分层的对象而言的。</p>
<blockquote>
<p>SHA-1 type size size-in-packfile offset-in-packfile depth base-SHA-1</p>
</blockquote>
<ol>
<li>找出该对象对应的文件名</li>
</ol>
<p><code>git rev-list --objects --all | grep abc123</code></p>
<ol>
<li>找出哪些提交修改了该文件</li>
</ol>
<p><code>git log --pretty=oneline -- {file}</code></p>
<p>输出结果中最下面的是最早的提交。</p>
<ol>
<li>删除文件，重写历史</li>
</ol>
<p><code>git filter-branch --index-filter &#39;git rm --cached --ignore-unmatch {file}&#39; -- abc123^..</code></p>
<p>也可以不用 <code>-- abc123^..</code>，那样的话会遍历全部历史。</p>
<ol>
<li>删除其他对该文件的引用</li>
</ol>
<p><code>reflog</code> 以及 <code>filter-branch</code> 时会在 <code>.git/refs/original</code> 中添加一些引用，其中仍包含对该文件的引用。</p>
<ul>
<li><code>rm -Rf .git/refs/original</code></li>
<li><code>rm -Rf .git/logs/</code></li>
<li><code>git gc</code></li>
</ul>
<ol>
<li>现在该文件的对象只存在于松散对象中，不会被推送出去。可以彻底删除它</li>
</ol>
<p><code>git prune --expire</code></p>
<h1 id="文件状态生命周期"><a href="#文件状态生命周期" class="headerlink" title="文件状态生命周期"></a>文件状态生命周期</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">untracked-&gt;unmodified:add the file</span><br><span class="line">unmodified-&gt;modified:edit the file</span><br><span class="line">modified-&gt;staged:stage the file</span><br><span class="line">staged-&gt;unmodified:commit</span><br><span class="line">unmodified-&gt;untracked:remove the file</span><br></pre></td></tr></table></figure>
<h1 id="git-config"><a href="#git-config" class="headerlink" title="git config"></a>git config</h1><p>3 个级别：local &gt; global &gt; system</p>
<ol>
<li>local：位于仓库下的 <code>.git/config</code></li>
<li>global：位于 <code>~/.gitconfig</code></li>
<li>system：位于 <code>{Git 安装目录}/mingw64/etc/gitconfig</code></li>
</ol>
<h2 id="user"><a href="#user" class="headerlink" title="user"></a>user</h2><p><code>user.name &quot;John&quot;</code><br><code>user.email John@example.com</code><br>配置用户信息。不加 <code>--global</code> 则仅对当前项目有效（.git/config），加上 <code>--global</code> 则全局有效（C:/Users/$USER/.gitconfig）。提交的时候会用到用户信息。</p>
<p><code>user.signingkey {gpg-key-id}</code><br>GPG 签署密钥，用来创建经签署的含附注的标签。</p>
<h2 id="core"><a href="#core" class="headerlink" title="core"></a>core</h2><p><code>core.editor emacs</code><br>配置文本编辑器。其中 emacs 可以换成其他编辑器的名字。</p>
<p><code>core.pager {pager}</code><br>运行诸如 log、diff 等所使用的分页器，可设置为 more 或任何其他分页器（缺省为 less），设置为空字符串’’则会在一页显示所有内容。</p>
<p><code>core.excludesfile {files}</code><br>无需纳入 Git 管理的文件，类似 .gitignore 文件。</p>
<p><code>core.autocrlf true|false|input</code><br>换行符转换。</p>
<ul>
<li>true：提交时 CRLF -&gt; LF；签出时 LF -&gt; CRLF</li>
<li>false：不做改变</li>
<li>input：提交时 CRLF -&gt; LF；签出时不做改变</li>
</ul>
<p><code>core.safecrlf true|false|warn</code><br>提交包含混合换行符的文件时的行为</p>
<ul>
<li>true：拒绝提交包含混合换行符的文件</li>
<li>false：允许提交包含混合换行符的文件</li>
<li>warn：提交包含混合换行符的文件时给出警告</li>
</ul>
<p><code>core.whitespace {var1,var2,...,varn}</code><br>探测和修正空白问题的选项。在某个参数前加上 <code>-</code> 表示禁用。</p>
<ul>
<li><code>blank-at-eol</code>：将行尾的空格作错误来处理（缺省开启）。</li>
<li><code>space-before-tab</code>：将位于行首缩进部分的 tab 符号前的空格作错误来处理（缺省开启）。</li>
<li><code>indent-with-non-tab</code>：将用空格来缩进而非用 tab 符号的行作为错误来处理（缺省关闭）。</li>
<li><code>tab-in-indent</code>：将行首缩进部分存在 tab 符号的行作为错误来处理（缺省关闭）。</li>
<li><code>blank-at-eof</code>：将文件末尾的空白行作为错误来处理（缺省开启）。</li>
<li><code>trailing-space</code>：包含了 <code>blank-at-eol</code> 和 <code>blank-at-eof</code>。</li>
<li><code>cr-at-eol</code>：将行尾的回车符 cr 当作行结尾的一部分，也就是说，行尾回车符前若存在空白符不会触发 <code>trailing-space</code>。</li>
<li><code>tabwidth=&lt;n&gt;</code>：设定 1 个 tab 符号占几个空格；此项与 <code>indent-with-non-tab</code> 和 <code>tab-in-indent</code> 相关。缺省为 8。允许范围为 1 到 63。</li>
</ul>
<p><code>core.quotepath</code><br>是否对文件路径中的非拉丁字符进行转义。</p>
<h2 id="help"><a href="#help" class="headerlink" title="help"></a>help</h2><p><code>help.autocorrect {1|0}</code><br>若设成 1，则在只有一个命令被模糊匹配到的情况下，Git 会自动运行该命令。</p>
<h2 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h2><p><code>merge.tool vimdiff</code><br>配置差异分析工具。可选的还有 kdiff3、tkdiff、meld、xxdiff、emerge、vimdiff、gvimdiff、ecmerge、opendiff 等。</p>
<h2 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h2><p><code>commit.template {file}</code><br>提交时使用的模板文件。</p>
<h2 id="push"><a href="#push" class="headerlink" title="push"></a>push</h2><p><code>push.default</code><br>push 时的默认行为。Git2.0 之前默认使用 <code>matching</code>，之后默认使用 <code>simple</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git branch --set-upstream-to=&#123;remote&#125;/&#123;branch&#125; [&#123;local_branch&#125;]</span><br><span class="line">// 或者 git branch -u &#123;remote&#125;/&#123;branch&#125; [&#123;local_branch&#125;]</span><br><span class="line">// 或者 git push --set-upstream &#123;remote&#125; [&#123;local_branch&#125;:]&#123;remote_branch&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>nothing</code>：push 操作无效，除非显式指定远程分支：<code>git push origin develop</code>。</li>
<li><code>current</code>：push 当前分支到远程同名分支，如果远程同名分支不存在则自动创建同名分支。</li>
<li><code>upstream</code>：push 当前分支到它的 <a href="#git中的upstream和downstream">upstream</a> 分支上（这一项其实用于经常从本地分支 push/pull 到同一远程仓库的情景，这种模式叫做 central workflow）。</li>
<li><code>simple</code>：simple 和  upstream 是相似的，只有一点不同，simple 必须保证本地分支和它的远程 upstream 分支同名，否则会拒绝 push 操作。</li>
<li><code>matching</code>：push 所有本地和远程两端都存在的同名分支。</li>
</ul>
<h2 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h2><p><code>branch.{branch_name}.merge</code><br>merge 时的默认操作。在 pull 的时候也会用到。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[branch &quot;develop&quot;]</span><br><span class="line">    remote = origin</span><br><span class="line">    merge = refs/heads/develop</span><br></pre></td></tr></table></figure>
<p>或者通过 bash 设置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config branch.develop.merge refs/heads/develop</span><br></pre></td></tr></table></figure>
<p>为什么不是refs/remotes/develop？</p>
<blockquote>
<p>因为这里 merge 指代的是我们想要 merge 的远程分支，是站在远程仓库的角度看到的引用路径。<br> 在本地仓库来看，远程仓库的分支引用路径为 <code>refs/remotes/{branch}</code>；站在远程仓库的角度来看，这个分支引用路径自然就是 <code>refs/heads/{branch}</code>。<br> 和我们在本地直接执行 <code>git merge</code> 是不同的（本地执行 <code>git merge origin/develop</code> 则是直接 merge refs/remotes/develop）。</p>
</blockquote>
<h2 id="credential"><a href="#credential" class="headerlink" title="credential"></a>credential</h2><ul>
<li><code>helper</code> 凭证管理方式。<ul>
<li><code>store</code> 明文保存于 <code>~/.git-credentials</code>，形如 <code>http://{user}:{pwd}@example.com/</code><h2 id="other"><a href="#other" class="headerlink" title="other"></a>other</h2><code>git config --list</code><br>查看配置信息。其中重复的变量来自不同的配置文件，Git 会采用最后一个。</li>
</ul>
</li>
</ul>
<p><code>git config user.name</code><br>查看特定变量。</p>
<h1 id="git-help"><a href="#git-help" class="headerlink" title="git help"></a>git help</h1><p><code>git help {verb}</code><br><code>git {verb} --help</code><br><code>man git-{verb}</code><br>查看特定命令 <code>{verb}</code> 的帮助信息。</p>
<h1 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h1><p><em>查看标签</em></p>
<ul>
<li><code>git tag [-n[{num}]] -l [--contains {commit}] [--points-at {object}] [--column[={options}] | --no-column] [--create-reflog] [--sort={key}] [--format={format}] [--[no-]merged [{commit}]] [{pattern}…]</code><ul>
<li><code>无参数</code> 查看当前版本库的标签列表。</li>
<li><code>-n{num}</code> 查看所有标签及对应的注释。通过 {num} 来指定显示多少行注释；缺省只显示注释的第一行。若某标签无注释，则显示其对应的提交信息。</li>
<li><code>-l {pattern}</code> 利用通配符对标签名进行过滤。若未给出通配符，则显示所有标签；若给出多个通配符，则标签只要匹配其中之一就会显示。</li>
<li><code>--contains {commit}</code> 只列出指定提交上的标签，缺省为 HEAD。</li>
<li><code>--points-at {object}</code> 只列出指定对象上的标签。</li>
<li><code>--column[={options}]</code> <code>--no-column</code> 分别表示“总是”、“总不”以列形式展示标签。只在显示不带注释的标签时有效。其中 {options} 包括：<ul>
<li>以下选项控制开关<ul>
<li><code>always</code> 总是以列形式显示。</li>
<li><code>never</code> 总不以列形式显示。</li>
<li><code>auto</code> 若输出到终端，则以列形式显示。</li>
</ul>
</li>
<li>以下选项控制布局，缺省为<code>column</code>。若出现以下任一选项，而上述3个选项未出现，则默认为<code>always</code>。<ul>
<li><code>column</code> 先填充列，后填充行。</li>
<li><code>row</code> 先填充行，后填充列。</li>
<li><code>plain</code> 显示在一列。</li>
</ul>
</li>
<li>以下选项可与上述布局选项混合使用，缺省为<code>nodense</code>。<ul>
<li><code>dense</code> 列宽不相等。</li>
<li><code>nodense</code> 列宽相等。</li>
</ul>
</li>
</ul>
</li>
<li><code>--create-reflog</code> 为标签创建操作记录。</li>
<li><code>--sort={key}</code> 按照 {key} 对显示结果进行升序排列。通过添加<code>-</code>前缀来进行降序排列。若指定多个 {key}，则最后一个 {key} 将作为主键。缺省为<code>tag.sort</code>的值，否则就按字典顺序。</li>
<li><code>--format={format}</code> A string that interpolates %(fieldname) from the object pointed at by a ref being shown. The format is the same as that of git-for-each-ref(1). When unspecified, defaults to %(refname:strip=2).</li>
<li><code>--[no-]merged [{commit}]</code> Only list tags whose tips are reachable, or not reachable if –no-merged is used, from the specified commit (HEAD if not specified).</li>
</ul>
</li>
</ul>
<p><strong>创建标签</strong></p>
<ul>
<li><code>git tag [-a | -s | -u {keyid}] [-f] [-m {msg} | -F {file}] {tagname} [{commit} | {object}]</code><ul>
<li><code>无参数</code> 创建轻量级标签。该标签指向一个提交，无标签创建过程记录。</li>
<li><code>-a</code> 创建一个无签名的、带注释的标签。带注释的标签指向一个标签对象（而不是一个提交），该对象中包含了创建标签时的说明、对应的提交 ID 等信息。</li>
<li><code>-s</code> 创建一个 GnuPG 签名的、带注释的标签，使用默认 e-mail 地址作为公钥/私钥对。</li>
<li><code>-u {keyid}</code> 创建一个 GnuPG 签名的、带注释的标签，使用指定的 {keyid} 作为公钥/私钥对。</li>
<li><code>-m {msg}</code> 若创建的是带注释的标签，则必须使用 <code>-m {msg}</code> 参数来创建该标签的注释。若使用了 <code>-m {msg}</code> 而未使用 <code>-a</code>、<code>-s</code> 或 <code>-u {keyid}</code>，则会隐含使用 <code>-a</code>。</li>
<li><code>-F {file}</code> 读取指定文件的内容作为标签注释。<code>-F -</code> 表示从标准输入中读取注释。若使用了 <code>-F {file}</code> 而未使用 <code>-a</code>、<code>-s</code> 或 <code>-u {keyid}</code>，则会隐含使用 <code>-a</code>。</li>
</ul>
</li>
</ul>
<p><strong>删除标签</strong></p>
<ul>
<li><code>git tag -d {tagname}...</code></li>
</ul>
<p><strong>校验标签</strong></p>
<ul>
<li><code>git tag -v {tagname}...</code> 校验指定标签的 GnuPG 签名。</li>
</ul>
<p><strong>其他</strong></p>
<ul>
<li><code>git show {tagname}</code> 查看指定标签的详细信息。</li>
<li><code>git log --decorate</code> 在查看日志时显示提交对应的标签及其他引用。</li>
<li><code>git describe [{commit}]</code> 将提交显示为一个易记的名字。该名字来自于建立于该提交之上的标签。<ul>
<li>若该提交存在标签，则显示该标签的名字。</li>
<li>若该提交没有标签，则显示其最近一个存在标签的历史版本的标签名，并以 <code>{tag}-{num}-g{commit}</code> 的格式显示。其中 {tag} 是该历史版本的标签名，{num} 是该历史提交与所查提交之间的距离，{commit} 是所查提交的精简 ID。</li>
<li><code>--dirty</code> 加上该参数后，若工作区的文件被修改过，则会在标签名后面显示“-dirty”。</li>
</ul>
</li>
</ul>
<h1 id="gitignore-文件"><a href="#gitignore-文件" class="headerlink" title=".gitignore 文件"></a>.gitignore 文件</h1><p>在 <code>.git</code> 同级目录下，手动创建 <code>.gitignore</code> 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> # 井号表示注释</span><br><span class="line"> # 文件名/目录名中可用正则表达式</span><br><span class="line"></span><br><span class="line"> # 指定忽略某个文件</span><br><span class="line">abc.txt</span><br><span class="line"></span><br><span class="line"> # 指定忽略某个目录</span><br><span class="line">abc/</span><br><span class="line"></span><br><span class="line"> # 指定不忽略某个文件/目录</span><br><span class="line">!def.txt</span><br><span class="line">!def/</span><br><span class="line"></span><br><span class="line"> # 指定忽略某一类文件</span><br><span class="line">*.doc</span><br><span class="line"> # 使用标准的 glob 模式匹配</span><br><span class="line">*.[ch]</span><br></pre></td></tr></table></figure>
<h1 id="乱码"><a href="#乱码" class="headerlink" title="乱码"></a>乱码</h1><p><strong>乱码情景1</strong></p>
<p>在 cygwin 中，使用 <code>git add</code> 添加要提交的文件的时候，如果文件名是中文，会显示形如 <code>\274\232\350\256\256\346\200\273\347\273\223.png</code> 的内部码点形式。</p>
<p>解决方案：</p>
<p>在 bash 提示符下输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.quotepath false</span><br></pre></td></tr></table></figure></p>
<p>core.quotepath 设为 false 的话，就不会对 0x80 以上的字符进行 quote。中文显示正常。</p>
<p><strong>乱码情景2</strong></p>
<p>在 MsysGit 中，使用 <code>git log</code> 显示提交的中文 log 乱码。</p>
<p>解决方案：</p>
<ul>
<li><p>设置 git gui 的界面编码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config --global gui.encoding utf-8</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置 commit log 提交时使用 utf-8 编码，可避免服务器上乱码，同时与 linux上 的提交保持一致</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config –global i18n.commitencoding utf-8</span><br></pre></td></tr></table></figure>
</li>
<li><p>使得在 <code>git log</code> 时将 utf-8 编码转换成 gbk 编码，解决Msys bash中 <code>git log</code> 乱码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config –global i18n.logoutputencoding gbk</span><br></pre></td></tr></table></figure>
</li>
<li><p>使得 <code>git log</code> 可以正常显示中文（配合 <code>i18n.logoutputencoding = gbk</code>)，在 <code>/etc/profile</code> 中添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export LESSCHARSET=utf-8</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>乱码情景3</strong></p>
<p>在 MsysGit 自带的 bash 中，使用 <code>ls</code> 命令查看中文文件名乱码。cygwin 没有这个问题。</p>
<p>解决方案：</p>
<p>使用 <code>ls --show-control-chars</code> 命令来强制使用控制台字符编码显示文件名，即可查看中文文件名。<br>为了方便使用，可以编辑 <code>/etc/git-completion.bash</code>，新增一行 <code>alias ls=&quot;ls --show-control-chars&quot;</code></p>
<p><strong>乱码情景4</strong></p>
<p>使用 <code>$GIT_HOME/bin/bash.exe</code> 和 <code>$GIT_HOME/git-cmd.exe</code> 执行 <code>git log</code> 中文呈乱码，而在 <code>git-bash.exe</code> 中不会。</p>
<p>解决方案：</p>
<ol>
<li>添加环境变量 <code>LESSCHARSET=utf-8</code></li>
<li>若是在 IDEA 的控制台功能使用上述两个终端软件，则需要在 <code>设置-Tools-Terminal-Environment Variables</code> 中添加上述变量。</li>
</ol>
<p><strong>终极解决方案</strong></p>
<p>终极的解决方案是通过修改 git 和 TortoiseGit 源码实现，有网友这么做了：[让Windows下Git和TortoiseGit支持中文文件名/UTF-8][3] ，也可以直接访问这个开源的 Google 项目：[utf8-git-on-windows][4] 。<br>如果不抗拒命令行的话，直接用 Cygwin 来提交Git库。因为 Cygwin 其实是一个在 Windows 平台上的模拟器，它完全模拟 GNU/Linux 的方式运行，所以 Cygwin 中的 Git 是采用 UTF-8 编码来保存中文的。</p>
<h1 id="git-中的-upstream-和-downstream"><a href="#git-中的-upstream-和-downstream" class="headerlink" title="git 中的 upstream 和 downstream"></a>git 中的 upstream 和 downstream</h1><p>git 中存在 upstream 和 downstream，简言之，当我们把仓库 A 中某分支 x 的代码 push 到仓库 B 分支 y，此时仓库 B 的这个分支 y 就叫做 A 中 x 分支的 upstream，而 x 则被称作 y 的 downstream，这是一个相对关系，每一个本地分支都相对地可以有一个远程的 upstream 分支（注意这个 upstream 分支可以不同名，但通常我们都会使用同名分支作为 upstream）。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/Java/Effective Java 笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zeerho">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zeerho">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/Java/Effective Java 笔记/" itemprop="url">Effective Java 笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-01T09:00:00+08:00">2017-01-01</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="创建和销毁对象"><a href="#创建和销毁对象" class="headerlink" title="创建和销毁对象"></a>创建和销毁对象</h1><h2 id="1-考虑用静态工厂方法代替构造器"><a href="#1-考虑用静态工厂方法代替构造器" class="headerlink" title="1 考虑用静态工厂方法代替构造器"></a>1 考虑用静态工厂方法代替构造器</h2><ol>
<li>静态工厂方法可以自定义名称，这样可以根据方法名来区分不同的对象实例化入口。而构造器只能通过参数来区分，容易弄错。</li>
<li>静态工厂方法可以灵活地决定返回新对象还是单例。</li>
<li>静态工厂方法可以返回原返回类型的任何子类型。</li>
<li>静态工厂方法在创建参数化类型实例时可以利用编译器的类型推导特性来使代码更简洁（Java 8 中构造器也实现了这个特性）。</li>
</ol>
<p>静态工厂方法返回的对象所属的类，在编写该静态工厂方法时可以不必存在。这种灵活的静态工厂方法构成了<strong>服务提供者框架（Service Provider Framework）</strong>。</p>
<p><strong>服务提供者框架</strong></p>
<blockquote>
<p>多个服务提供者实现一个服务，系统为服务提供者的客户端提供多个实现，并把它们从多个实现中解耦出来。</p>
</blockquote>
<p>服务提供者框架中的三个重要组件和一个可选组件：</p>
<ul>
<li>服务接口（Service Interface）：由提供者实现；</li>
<li>提供者注册 API（Provider Registration API）：系统用来注册实现或提供者，让客户端访问它们；</li>
<li>服务访问 API（Service Access API）：客户端用来获取服务的实例；</li>
<li>服务提供者接口（Service Provider Interface）（可选）：这些提供者负责创建其服务实现的实例。如果没有服务提供者接口，实现就按照类名称注册，并通过反射方式进行实例化。</li>
</ul>
<p>服务访问 API 是“灵活的静态工厂”，它是服务提供者框架的基础。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//服务接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//服务提供者接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Provider</span> </span>&#123;</span><br><span class="line">    <span class="function">Service <span class="title">newService</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//提供服务注册和访问的类，本身不能被实例化</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Services</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Services</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, Provider&gt; providers = <span class="keyword">new</span> ConcurrentHashMap&lt;String, Provider&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_NAME = <span class="string">"default"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//提供者注册接口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">registerDefaultProvider</span><span class="params">(Provider p)</span> </span>&#123;</span><br><span class="line">        registerProvider(DEFAULT_NAME, P);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">registerProvider</span><span class="params">(String name, Provider p)</span> </span>&#123;</span><br><span class="line">    providers.put(name, p);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//服务访问 API</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Service <span class="title">newInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> newInstance(DEFAULT_NAME);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Service <span class="title">newInstance</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        Provider p = providers.get(name);</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"blabla"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p.newService();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-用私有构造器或者枚举类型强化-Singleton-属性"><a href="#3-用私有构造器或者枚举类型强化-Singleton-属性" class="headerlink" title="3 用私有构造器或者枚举类型强化 Singleton 属性"></a>3 用私有构造器或者枚举类型强化 Singleton 属性</h2><p>私有构造器只阻断了 new 的构造方式，除此之外还有两种对象实例化方式：</p>
<ul>
<li>反射</li>
<li>反序列化</li>
</ul>
<p>解决方法依次是：</p>
<ul>
<li>在私有构造器中抛出异常。</li>
<li>所有的实例域都加上<code>transient</code> 修饰；实现 <code>readResolve()</code> 方法，方法中直接返回已存在的单例。</li>
</ul>
<p>Java 5 开始的 enum 可以阻断上述三种实例化方式，这样构造单例就很简单。</p>
<h2 id="4-消除过期的对象引用"><a href="#4-消除过期的对象引用" class="headerlink" title="4 消除过期的对象引用"></a>4 消除过期的对象引用</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/XML/XML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zeerho">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zeerho">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/XML/XML/" itemprop="url">XML</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-01T09:00:00+08:00">2017-01-01</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h1><p>XML</p>
<blockquote>
<p>可扩展标记语言（eXtensible Markup Language）</p>
</blockquote>
<p>XML 元素</p>
<blockquote>
<p>XML 元素指的是从（且包括）开始标签直到（且包括）结束标签的部分。<br>一个元素可以包含：其他元素、文本、属性，或混合以上所有…</p>
</blockquote>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><ul>
<li>声明部分 <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot;?&gt;</code> 可选，如果存在须放第一行；<ul>
<li><code>standalone=&quot;yes&quot;</code> 表示该 XML 文档独立，不能引用外部的 DTD 规范文件，反之则非独立，可以引用外部规范文件。</li>
</ul>
</li>
<li>XML 标签<ul>
<li>所有元素都必须有关闭标签；</li>
<li>XML 标签对大小写敏感；</li>
<li>所有标签都必须正确嵌套；</li>
</ul>
</li>
<li>XML 元素<ul>
<li>必须包含<strong>根元素</strong>，它是所有其他元素的父元素；</li>
<li>XML 元素中 <code>&lt;</code> 和 <code>&amp;</code> 是非法的，必须用实体引用来替代：<ul>
<li>预定义实体引用 - 对应符号 - 含义</li>
<li><code>&amp;lt;</code> - <code>&lt;</code> - less than</li>
<li><code>&amp;gt;</code> - <code>&gt;</code> - greater than</li>
<li><code>&amp;amp;</code> - <code>&amp;</code> - ampersand</li>
<li><code>&amp;apos;</code> - <code>&#39;</code> - apostrophe</li>
<li><code>&amp;quot;</code> - <code>&quot;</code> - quotation mark</li>
</ul>
</li>
<li>XML 元素必须遵循以下命名规则：<ul>
<li>名称可以包含字母、数字以及其他的字符；</li>
<li>名称不能以数字或者标点符号开始；</li>
<li>名称不能以字母 xml（或者 XML、Xml 等等）开始；</li>
<li>名称不能包含空格；</li>
<li>可使用任何名称，没有保留的字词。</li>
</ul>
</li>
</ul>
</li>
<li>XML 属性<ul>
<li>属性值必须加引号，单双引号皆可。若属性值中本身就含有单引号或双引号，则包裹属性值的引号必须用另一种，或将属性值中的引号用实体引用 <code>&amp;apos;</code> 和 <code>&amp;quot;</code> 替代；</li>
<li>属性不能包含多个值（元素可以）；</li>
<li>属性不能包含树结构（元素可以）；</li>
<li>属性不容易扩展；</li>
</ul>
</li>
<li>元数据应当存储为属性，数据本身应当存储为元素</li>
<li>注释 <code>&lt;!-- This is a comment --&gt;</code>;</li>
<li>XML 会保留连续的多个空格，而不会裁剪为一个；</li>
<li>XML 以 <code>LF</code> 存储换行。</li>
</ul>
<h1 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h1><ol>
<li>CSS <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span><br><span class="line">&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;cd_catalog.css&quot;?&gt;</span><br><span class="line">&lt;root&gt;</span><br><span class="line">...</span><br><span class="line">&lt;/root&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>第二行的声明把 XML 文件链接到 CSS 文件。</p>
<ol>
<li>XSLT //TODO<blockquote>
<p>eXtensible Stylesheet Language Transformations<br>XSLT 是首选的 XML 样式表语言，它在浏览器显示 XML 文件之前，先把它转换为 HTML。</p>
</blockquote>
</li>
</ol>
<h1 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h1><p>命名空间是在元素的开始标签的 xmlns 属性中定义的。<br>命名空间声明的语法：<code>xmlns:前缀=&quot;URI&quot;</code>。<br>可以为元素定义默认的命名空间来省去在所有子元素中使用前缀的工作：<code>xmlns=&quot;URI</code>。</p>
<h1 id="CDATA"><a href="#CDATA" class="headerlink" title="CDATA"></a>CDATA</h1><ol>
<li>CDATA - （未解析）字符数据 character data<br>术语 CDATA 是不应该由 XML 解析器解析的文本数据。<br>像 “&lt;” 和 “&amp;” 字符在 XML 元素中都是非法的。”&lt;” 会产生错误，因为解析器会把该字符解释为新元素的开始。”&amp;” 会产生错误，因为解析器会把该字符解释为字符实体的开始。<br>某些文本，比如 JavaScript 代码，包含大量 “&lt;” 或 “&amp;” 字符。为了避免错误，可以将脚本代码定义为 CDATA。<br>CDATA 部分中的所有内容都会被解析器忽略，而不会去解析其中的标签和实体引用，从而被当作普通文本来处理。<br>CDATA 部分由 <code>&lt;![CDATA[</code> 开始，由 <code>]]&gt;</code> 结束。<br>CDATA 部分不能包含字符串 <code>]]&gt;</code>。也不允许嵌套的 CDATA 部分。<br>标记 CDATA 部分结尾的 <code>]]&gt;</code> 不能包含空格或换行。</li>
<li>PCDATA - 被解析的字符数据 parsed character data<br>XML 解析器通常会解析 XML 文档中所有的文本。PCDATA 是相对于 CDATA 而言的。</li>
</ol>
<h1 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h1><p>在载入一个 XML 文档时可能得到两个不同的错误，表示编码问题：</p>
<ol>
<li>在文本内容中发现无效字符。<br>如果 XML 中包含非 ASCII 字符，且文件保存为没有指定编码的单字节 ANSI（或 ASCII），就会得到该错误。</li>
<li>将当前编码切换为不被支持的指定编码<br>如果 XML 文件保存为带有指定的单字节编码（WINDOWS-1252、ISO-8859-1、UTF-8）的双字节 Unicode（或 UTF-16），就会得到该错误。<br>如果 XML 文件保存为带有指定的双字节编码（UTF-16）的单字节 ANSI（或 ASCII），也会得到该错误。</li>
</ol>
<p>结论：</p>
<ul>
<li>始终使用编码属性</li>
<li>使用支持编码的编辑器</li>
<li>确保知道编辑器使用什么编码</li>
<li>在编码属性中使用相同的编码</li>
</ul>
<h1 id="XML相关技术"><a href="#XML相关技术" class="headerlink" title="XML相关技术"></a>XML相关技术</h1><p>XHTML (可扩展 HTML) </p>
<blockquote>
<p>更严格更纯净的基于 XML 的 HTML 版本。</p>
</blockquote>
<p>XML DOM (XML 文档对象模型)</p>
<blockquote>
<p>访问和操作 XML 的标准文档模型。</p>
</blockquote>
<p>XSL (可扩展样式表语言)，包含三个部分：</p>
<blockquote>
<ol>
<li>XSLT (XSL 转换) - 把 XML 转换为其他格式，比如 HTML</li>
<li>XSL-FO (XSL 格式化对象)- 用于格式化 XML 文档的语言</li>
<li>XPath - 用于导航 XML 文档的语言</li>
</ol>
</blockquote>
<p>XQuery (XML 查询语言)</p>
<blockquote>
<p>基于 XML 的用于查询 XML 数据的语言。</p>
</blockquote>
<p><a href="#DTD">DTD</a> (文档类型定义)</p>
<blockquote>
<p>用于定义 XML 文档中的合法元素的标准。</p>
</blockquote>
<p><a href="#XSD">XSD</a> (XML 架构)</p>
<blockquote>
<p>基于 XML 的 DTD 替代物。</p>
</blockquote>
<p>XLink (XML 链接语言)</p>
<blockquote>
<p>在 XML 文档中创建超级链接的语言。</p>
</blockquote>
<p>XPointer (XML 指针语言)</p>
<blockquote>
<p>允许 XLink 超级链接指向 XML 文档中更多具体的部分。</p>
</blockquote>
<p>SOAP (简单对象访问协议)</p>
<blockquote>
<p>允许应用程序在 HTTP 之上交换信息的基于 XML 的协议。</p>
</blockquote>
<p>WSDL (Web 服务描述语言)</p>
<blockquote>
<p>用于描述网络服务的基于 XML 的语言。</p>
</blockquote>
<p>RDF (资源描述框架)</p>
<blockquote>
<p>用于描述网络资源的基于 XML 的语言。</p>
</blockquote>
<p>RSS (真正简易聚合)</p>
<blockquote>
<p>聚合新闻以及类新闻站点内容的格式。</p>
</blockquote>
<p>SVG (可伸缩矢量图形) </p>
<blockquote>
<p>定义 XML 格式的图形</p>
</blockquote>
<h1 id="DTD"><a href="#DTD" class="headerlink" title="DTD"></a>DTD</h1><p><a href="#XML相关技术">back</a></p>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><blockquote>
<p>DTD（文档类型定义）的作用是定义 XML 文档的合法构建模块。<br>DTD 可被成行地声明于 XML 文档中，也可作为一个外部引用。</p>
</blockquote>
<p><strong>内部的 DOCTYPE 声明</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0"?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE note [</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT note (to,from,heading,body)&gt;</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT to (#PCDATA)&gt;</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT from (#PCDATA)&gt;</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT heading (#PCDATA)&gt;</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT body (#PCDATA)&gt;</span></span><br><span class="line"><span class="meta">]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">note</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">to</span>&gt;</span>Tove<span class="tag">&lt;/<span class="name">to</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">from</span>&gt;</span>Jani<span class="tag">&lt;/<span class="name">from</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">heading</span>&gt;</span>Reminder<span class="tag">&lt;/<span class="name">heading</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span>Don't forget me this weekend<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">note</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>!DOCTYPE note</code> (第二行)定义此文档是 note 类型的文档。</li>
<li><code>!ELEMENT note</code> (第三行)定义 note  元素有四个元素：”to、from、heading,、body”</li>
<li><code>!ELEMENT to</code> (第四行)定义 to 元素为 “#PCDATA” 类型</li>
<li><code>!ELEMENT from</code> (第五行)定义 from 元素为 “#PCDATA” 类型</li>
<li><code>!ELEMENT heading</code> (第六行)定义 heading 元素为 “#PCDATA” 类型</li>
<li><code>!ELEMENT body</code> (第七行)定义 body 元素为 “#PCDATA” 类型</li>
</ul>
<p><strong>外部文档声明</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE note SYSTEM &quot;note.dtd&quot;&gt;</span><br><span class="line">&lt;note&gt;</span><br><span class="line">    &lt;to&gt;Tove&lt;/to&gt;</span><br><span class="line">    &lt;from&gt;Jani&lt;/from&gt;</span><br><span class="line">    &lt;heading&gt;Reminder&lt;/heading&gt;</span><br><span class="line">    &lt;body&gt;Don&apos;t forget me this weekend!&lt;/body&gt;</span><br><span class="line">&lt;/note&gt;</span><br></pre></td></tr></table></figure>
<p><strong>为什么使用 DTD</strong></p>
<ul>
<li>通过 DTD，每一个 XML 文件均可携带一个有关其自身格式的描述。</li>
<li>通过 DTD，独立的团体可一致地使用某个标准的 DTD 来交换数据。</li>
<li>应用程序可使用某个标准的 DTD 来验证从外部接收到的数据。</li>
<li>可以使用 DTD 来验证自身的数据。</li>
</ul>
<h2 id="元素"><a href="#元素" class="headerlink" title="元素"></a>元素</h2><p>在 DTD 中，XML 元素通过元素声明来进行声明：<br><code>&lt;!ELEMENT element-name category&gt;</code><br>或<br><code>&lt;!ELEMENT element-name (element-content)&gt;</code></p>
<ol>
<li>空元素<br>空元素通过类别关键词 <code>EMPTY</code> 来声明<br><code>&lt;!ELEMENT element-name EMPTY&gt;</code></li>
<li>只有 PCDATA 的元素<br>只有 PCDATA 的元素通过圆括号中的 <code>#PCDATA</code> 进行声明<br><code>&lt;!ELEMENT element-name (#PCDATA)&gt;</code></li>
<li>带有任何内容的元素<br>通过类别关键词 <code>ANY</code> 声明的元素，可包含任何可解析数据的组合<br><code>&lt;!ELEMENT element-name ANY&gt;</code></li>
<li>带有子元素（序列）的元素<br>带有一个或多个子元素的元素通过圆括号中的子元素名进行声明<br><code>&lt;!ELEMENT element-name (child1)&gt;</code><br>或<br><code>&lt;!ELEMENT element-name (child1,child2,...)&gt;</code><br>当子元素按照由逗号分隔开的序列进行声明时，这些子元素必须按照相同的顺序出现在文档中。在一个完整的声明中，子元素也必须被声明，同时子元素也可拥有子元素。</li>
<li>声明必须出现且只出现一次的元素<br><code>&lt;!ELEMENT element-name (child-name)&gt;</code></li>
<li>声明最少出现一次的元素<br><code>&lt;!ELEMENT element-name (child-name+)&gt;</code></li>
<li>声明出现零次或多次的元素<br><code>&lt;!ELEMENT element-name (child-name*)&gt;</code></li>
<li>声明出现零次或一次的元素<br><code>&lt;!ELEMENT element-name (child-name?)&gt;</code></li>
<li>声明”非…即…”类型的内容<br>实例: <code>&lt;!ELEMENT note (to,from,header,(message|body))&gt;</code><br>上面的例子声明了：”note” 元素必须包含 “to” 元素、”from” 元素、”header” 元素，以及非 “message” 元素既 “body” 元素。</li>
<li>声明混合型的内容<br>实例: <code>&lt;!ELEMENT note (#PCDATA|to|from|header|message)*&gt;</code><br>上面的例子声明了：”note” 元素可包含出现零次或多次的 PCDATA、”to”、”from”、”header” 或者 “message”。</li>
</ol>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><p>在 DTD 中，属性通过 ATTLIST 声明来进行声明：<br><code>&lt;!ATTLIST {element-name} {attribute-name} attribute-type attribute-value&gt;</code><br>DTD 实例：<br><code>&lt;!ATTLIST payment type CDATA &quot;check&quot;&gt;</code><br>XML 实例：<br><code>&lt;payment type=&quot;check&quot; /&gt;</code></p>
<p>属性类型(attribute-type)的选项：</p>
<ul>
<li><code>CDATA</code>: 值为字符数据 (character data)</li>
<li><code>(en1|en2|..)</code>: 此值是枚举列表中的一个值</li>
<li><code>ID</code>: 值为唯一的 id</li>
<li><code>IDREF</code>: 值为另外一个元素的 id</li>
<li><code>IDREFS</code>: 值为其他 id 的列表</li>
<li><code>NMTOKEN</code>: 值为合法的 XML 名称</li>
<li><code>NMTOKENS</code>: 值为合法的 XML 名称的列表</li>
<li><code>ENTITY</code>: 值是一个实体</li>
<li><code>ENTITIES</code>: 值是一个实体列表</li>
<li><code>NOTATION</code>: 此值是符号的名称</li>
<li><code>xml:</code>: 值是一个预定义的 XML 值</li>
</ul>
<p>默认属性值可使用下列值 :</p>
<ul>
<li><code>#REQUIRED</code>: 属性值是必需的</li>
<li><code>#IMPLIED</code>: 属性不是必需的</li>
<li><code>#FIXED value</code>: 属性值是固定的</li>
</ul>
<h2 id="实体"><a href="#实体" class="headerlink" title="实体"></a>实体</h2><p>实体是用于定义引用普通文本或特殊字符的快捷方式的变量。</p>
<ul>
<li>实体引用是对实体的引用。</li>
<li>实体可在内部或外部进行声明</li>
</ul>
<p>一个内部实体声明：<br><code>&lt;!ENTITY entity-name &quot;entity-value&quot;&gt;</code><br>DTD 实例:<br><code>&lt;!ENTITY writer &quot;Donald Duck.&quot;&gt;</code><br><code>&lt;!ENTITY copyright &quot;Copyright W3CSchool.cc&quot;&gt;</code><br>XML 实例：<br><code>&lt;author&gt;&amp;writer;&amp;copyright;&lt;/author&gt;</code></p>
<p>一个外部实体声明：<br><code>&lt;!ENTITY entity-name SYSTEM &quot;URI/URL&quot;&gt;</code><br>DTD 实例：<br><code>&lt;!ENTITY writer SYSTEM &quot;http://www.w3cschool.cc/entities.dtd&quot;&gt;</code><br><code>&lt;!ENTITY copyright SYSTEM &quot;http://www.w3cschool.cc/entities.dtd&quot;&gt;</code><br>XML 实例：<br><code>&lt;author&gt;&amp;writer;&amp;copyright;&lt;/author&gt;</code></p>
<h1 id="XSD"><a href="#XSD" class="headerlink" title="XSD"></a>XSD</h1><p><a href="#XML相关技术">back</a></p>
<blockquote>
<p>XML Schema 的作用是定义 XML 文档的合法构建模块，类似 DTD。</p>
<ul>
<li>定义可出现在文档中的元素</li>
<li>定义可出现在文档中的属性</li>
<li>定义哪个元素是子元素</li>
<li>定义子元素的次序</li>
<li>定义子元素的数目</li>
<li>定义元素是否为空，或者是否可包含文本</li>
<li>定义元素和属性的数据类型</li>
<li>定义元素和属性的默认值以及固定值</li>
</ul>
</blockquote>
<h2 id="schema-元素"><a href="#schema-元素" class="headerlink" title="schema 元素"></a>schema 元素</h2><p><strong><code>&lt;schema&gt;</code> 元素是每一个 XML Schema 的根元素</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;</span><br><span class="line">targetNamespace=&quot;http://www.runoob.com&quot;</span><br><span class="line">xmlns=&quot;http://www.runoob.com&quot;</span><br><span class="line">elementFormDefault=&quot;qualified&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;/xs:schema&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;</code><br>显示 schema 中用到的元素和数据类型来自命名空间 “<a href="http://www.w3.org/2001/XMLSchema&quot;。同时它还规定了来自命名空间" target="_blank" rel="noopener">http://www.w3.org/2001/XMLSchema&quot;。同时它还规定了来自命名空间</a> “<a href="http://www.w3.org/2001/XMLSchema" target="_blank" rel="noopener">http://www.w3.org/2001/XMLSchema</a>“ 的元素和数据类型应该使用前缀 xs</li>
<li><code>targetNamespace=&quot;http://www.runoob.com&quot;</code><br>显示被此 schema 定义的元素 (note, to, from, heading, body) 来自命名空间： “<a href="http://www.runoob.com" target="_blank" rel="noopener">http://www.runoob.com</a>“</li>
<li><code>xmlns=&quot;http://www.runoob.com&quot;</code><br>指出默认的命名空间是 “<a href="http://www.runoob.com" target="_blank" rel="noopener">http://www.runoob.com</a>“</li>
<li><code>elementFormDefault=&quot;qualified&quot;</code><br>指出任何 XML 实例文档所使用的且在此 schema 中声明过的元素必须被命名空间限定</li>
</ul>
<p><strong>在 XML 文档中引用 Schema</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;note xmlns=&quot;http://www.runoob.com&quot;</span><br><span class="line">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">xsi:schemaLocation=&quot;http://www.runoob.com note.xsd&quot;&gt;</span><br><span class="line">    &lt;to&gt;Tove&lt;/to&gt;</span><br><span class="line">    &lt;from&gt;Jani&lt;/from&gt;</span><br><span class="line">    &lt;heading&gt;Reminder&lt;/heading&gt;</span><br><span class="line">    &lt;body&gt;Don&apos;t forget me this weekend!&lt;/body&gt;</span><br><span class="line">&lt;/note&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>xmlns=&quot;http://www.runoob.com&quot;</code><br>规定了默认命名空间的声明。此声明会告知 schema 验证器，在此 XML 文档中使用的所有元素都被声明于 “<a href="http://www.runoob.com" target="_blank" rel="noopener">http://www.runoob.com</a>“ 这个命名空间。</li>
<li>一旦拥有了可用的 XML Schema 实例命名空间：<br><code>xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</code><br>就可以使用 schemaLocation 属性了。此属性有两个值。第一个值是需要使用的命名空间。第二个值是供命名空间使用的 XML schema 的位置：<br><code>xsi:schemaLocation=&quot;http://www.runoob.com note.xsd&quot;</code></li>
</ul>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p><strong>字符串数据类型</strong></p>
<ul>
<li>字符串 String Data Type</li>
</ul>
<blockquote>
<p>字符串数据类型可包含字符、换行、回车以及制表符。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;customer&quot; type=&quot;xs:string&quot;/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>规格化字符串 NormalizedString Data Type</li>
</ul>
<blockquote>
<p>规格化字符串数据类型同样可包含字符，但是 XML 处理器会移除折行，回车以及制表符。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;customer&quot; type=&quot;xs:normalizedString&quot;/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>Token 数据类型 Token Data Type</li>
</ul>
<blockquote>
<p>Token 数据类型同样可包含字符，但是 XML 处理器会移除换行符、回车、制表符、开头和结尾的空格以及（连续的）空格。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;customer&quot; type=&quot;xs:token&quot;/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>字符串数据类型及衍生类型<br>|名称|描述|<br>|:–|:–|<br>|ENTITIES|<br>|ENTITY|<br>|ID|在 XML 中提交 ID 属性的字符串（仅与 schema 属性一同使用）|<br>|IDREF|在 XML 中提交 IDREF 属性的字符串（仅与 schema 属性一同使用）|<br>|IDREFS language|包含合法的语言 id 的字符串|<br>|Name|包含合法 XML 名称的字符串|<br>|NCName|<br>|NMTOKEN|在 XML 中提交 NMTOKEN 属性的字符串（仅与 schema 属性一同使用）|<br>|NMTOKENS|<br>|normalizedString|不包含换行符、回车或制表符的字符串|<br>|QName|<br>|string|字符串|<br>|token|不包含换行符、回车或制表符、开头或结尾空格或者多个连续空格的字符串|</li>
</ul>
<ul>
<li>对字符串数据类型的限定（Restriction）<br>可与字符串数据类型一同使用的限定：<ul>
<li>enumeration</li>
<li>length</li>
<li>maxLength</li>
<li>minLength</li>
<li>pattern (NMTOKENS、IDREFS 以及 ENTITIES 无法使用此约束)</li>
<li>whiteSpace</li>
</ul>
</li>
</ul>
<p><strong>日期和时间数据类型</strong></p>
<ul>
<li>日期 Date Data Type：”YYYY-MM-DD”<br><code>&lt;xs:element name=&quot;start&quot; type=&quot;xs:date&quot;/&gt;</code><ul>
<li>时区<ul>
<li>在日期后加一个 “Z” 的方式，使用世界调整时间（UTC time）来输入一个日期<br><code>&lt;start&gt;2002-09-24Z&lt;/start&gt;</code></li>
<li>在日期后添加一个正的或负时间的方法，来规定以世界调整时间为准的偏移量<br><code>&lt;start&gt;2002-09-24-06:00&lt;/start&gt;</code></li>
</ul>
</li>
</ul>
</li>
<li>时间 Time Data Type：”hh:mm:ss”<br><code>&lt;xs:element name=&quot;start&quot; type=&quot;xs:time&quot;/&gt;</code><ul>
<li>时区：同上</li>
</ul>
</li>
<li>日期时间 DateTime Data Type：”YYYY-MM-DDThh:mm:ss”，其中 T 表示必需的时间部分的起始<br><code>&lt;xs:element name=&quot;startdate&quot; type=&quot;xs:dateTime&quot;/&gt;</code><ul>
<li>时区：同上</li>
</ul>
</li>
<li>持续时间 Duration Data Type：”PnYnMnDTnHnMnS”，其中<ul>
<li>P 表示周期(必需)</li>
<li>nY 表示年数</li>
<li>nM 表示月数</li>
<li>nD 表示天数</li>
<li>T 表示时间部分的起始 -     （如果打算规定小时、分钟和秒，则此选项为必需）</li>
<li>nH 表示小时数</li>
<li>nM 表示分钟数</li>
<li>nS 表示秒数<br><code>&lt;xs:element name=&quot;period&quot; type=&quot;xs:duration&quot;/&gt;</code><br>例：<code>&lt;period&gt;P5Y2M10DT15H&lt;/period&gt;</code></li>
</ul>
</li>
<li>负的持续时间：在 P 前加减号</li>
<li>日期和时间数据类型<br>|名称|描述|<br>|:–|:–|<br>|date|定义一个日期值|<br>|dateTime|定义一个日期和时间值|<br>|duration|定义一个时间间隔|<br>|gDay|定义日期的一个部分 - 天 (DD)|<br>|gMonth|定义日期的一个部分 - 月 (MM)|<br>|gMonthDay|定义日期的一个部分 - 月和天 (MM-DD)|<br>|gYear|定义日期的一个部分 - 年 (YYYY)|<br>|gYearMonth|定义日期的一个部分 - 年和月 (YYYY-MM)|<br>|time|定义一个时间值|</li>
</ul>
<ul>
<li>对日期数据类型的限定（Restriction）<br>可与日期数据类型一同使用的限定：<ul>
<li>enumeration</li>
<li>maxExclusive</li>
<li>maxInclusive</li>
<li>minExclusive</li>
<li>minInclusive</li>
<li>pattern</li>
<li>whiteSpace</li>
</ul>
</li>
</ul>
<p><strong>数值数据类型</strong></p>
<ul>
<li>十进制：最大位数是 18 位<br><code>&lt;xs:element name=&quot;prize&quot; type=&quot;xs:decimal&quot;/&gt;</code></li>
<li>整数<br><code>&lt;xs:element name=&quot;prize&quot; type=&quot;xs:integer&quot;/&gt;</code></li>
<li>数值数据类型<br>|名字|秒数|<br>|:–|:–|<br>|byte|有正负的 8 位整数|<br>|decimal|十进制数|<br>|int|有正负的 32 位整数|<br>|integer|整数值|<br>|long|有正负的 64 位整数|<br>|negativeInteger|仅包含负值的整数 ( .., -2, -1.)|<br>|nonNegativeInteger|仅包含非负值的整数 (0, 1, 2, ..)|<br>|nonPositiveInteger|仅包含非正值的整数 (.., -2, -1, 0)|<br>|positiveInteger|仅包含正值的整数 (1, 2, ..)|<br>|short|有正负的 16 位整数|<br>|unsignedLong|无正负的 64 位整数|<br>|unsignedInt|无正负的 32 位整数|<br>|unsignedShort|无正负的 16 位整数|<br>|unsignedByte|无正负的 8 位整数|</li>
</ul>
<ul>
<li>对数值数据类型的限定（Restriction）<br>可与数值数据类型一同使用的限定：<ul>
<li>enumeration</li>
<li>fractionDigits</li>
<li>maxExclusive</li>
<li>maxInclusive</li>
<li>minExclusive</li>
<li>minInclusive</li>
<li>pattern</li>
<li>totalDigits</li>
<li>whiteSpace</li>
</ul>
</li>
</ul>
<p><strong>杂项数据类型</strong></p>
<blockquote>
<p>其他杂项数据类型包括布尔、base64Binary、十六进制、浮点、双精度、anyURI、anyURI 以及 NOTATION。</p>
</blockquote>
<ul>
<li>布尔 Boolean Data Type： 合法的布尔值是 true、false、1（表示 true） 以及 0（表示 false）<br><code>&lt;xs:attribute name=&quot;disabled&quot; type=&quot;xs:boolean&quot;/&gt;</code></li>
<li>二进制 Binary Data Types：<br><code>&lt;xs:element name=&quot;blobsrc&quot; type=&quot;xs:hexBinary&quot;/&gt;</code><ul>
<li>可使用两种二进制数据类型：<ul>
<li>base64Binary (Base64 编码的二进制数据)</li>
<li>hexBinary (十六进制编码的二进制数据)</li>
</ul>
</li>
</ul>
</li>
<li>AnyURI 数据类型 AnyURI Data Type：用于规定 URI；如果某个 URI 含有空格，请用 %20 替换它们<br><code>&lt;xs:attribute name=&quot;src&quot; type=&quot;xs:anyURI&quot;/&gt;</code></li>
<li>杂项数据类型<br>|名称|描述|<br>|:–|:–|<br>|anyURI|<br>|base64Binary|<br>|boolean|<br>|double|<br>|float|<br>|hexBinary|<br>|NOTATION|<br>|QName|</li>
</ul>
<ul>
<li>对杂项数据类型的限定（Restriction）<br>可与杂项数据类型一同使用的限定：<ul>
<li>enumeration (布尔数据类型无法使用此约束)</li>
<li>length (布尔数据类型无法使用此约束)</li>
<li>maxLength (布尔数据类型无法使用此约束)</li>
<li>minLength (布尔数据类型无法使用此约束)</li>
<li>pattern</li>
<li>whiteSpace</li>
</ul>
</li>
</ul>
<h2 id="简易元素"><a href="#简易元素" class="headerlink" title="简易元素"></a>简易元素</h2><blockquote>
<p>简易元素指那些仅包含文本的元素。它不会包含任何其他的元素或属性。<br>不过，“仅包含文本”这个限定却很容易造成误解。文本有很多类型。它可以是 XML Schema 定义中包括的类型中的一种（布尔、字符串、数据等等），或者它也可以是自行定义的定制类型。<br>也可向数据类型添加限定（即 facets），以此来限制它的内容，或者可以要求数据匹配某种特定的模式。</p>
</blockquote>
<p><strong>定义简易元素</strong><br><code>&lt;xs:element name=&quot;xxx&quot; type=&quot;yyy&quot;/&gt;</code><br>最常用的类型是：</p>
<ul>
<li>xs:string</li>
<li>xs:decimal</li>
<li>xs:integer</li>
<li>xs:boolean</li>
<li>xs:date</li>
<li>xs:time</li>
</ul>
<p><strong>简易元素的默认值和固定值</strong><br>简易元素可拥有指定的默认值或固定值。<br>当没有其他的值被规定时，默认值就会自动分配给元素：<br><code>&lt;xs:element name=&quot;color&quot; type=&quot;xs:string&quot; default=&quot;red&quot;/&gt;</code><br>固定值同样会自动分配给元素，并且无法规定另外一个值：<br><code>&lt;xs:element name=&quot;color&quot; type=&quot;xs:string&quot; fixed=&quot;red&quot;/&gt;</code></p>
<h2 id="属性-1"><a href="#属性-1" class="headerlink" title="属性"></a>属性</h2><blockquote>
<p>所有的属性均作为简易类型来声明。简易元素无法拥有属性。假如某个元素拥有属性，它就会被当作某种复合类型。但是属性本身总是作为简易类型被声明的。</p>
</blockquote>
<p><strong>定义属性</strong><br><code>&lt;xs:attribute name=&quot;xxx&quot; type=&quot;yyy&quot;/&gt;</code><br>最常用的类型是：</p>
<ul>
<li>xs:string</li>
<li>xs:decimal</li>
<li>xs:integer</li>
<li>xs:boolean</li>
<li>xs:date</li>
<li>xs:time</li>
</ul>
<p><strong>属性的默认值和固定值</strong><br>属性可拥有指定的默认值或固定值。<br>当没有其他的值被规定时，默认值就会自动分配给元素：<br><code>&lt;xs:attribute name=&quot;lang&quot; type=&quot;xs:string&quot; default=&quot;EN&quot;/&gt;</code><br>固定值同样会自动分配给元素，并且无法规定另外的值：<br><code>&lt;xs:attribute name=&quot;lang&quot; type=&quot;xs:string&quot; fixed=&quot;EN&quot;/&gt;</code></p>
<p><strong>可选的和必需的属性</strong><br>在缺省的情况下，属性是可选的。如需规定属性为必选，须使用 “use” 属性：<br><code>&lt;xs:attribute name=&quot;lang&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;</code></p>
<h2 id="限定-Facets"><a href="#限定-Facets" class="headerlink" title="限定 / Facets"></a>限定 / Facets</h2><blockquote>
<p>限定（restriction）用于为 XML 元素或者属性定义可接受的值。对 XML 元素的限定被称为 facet。</p>
</blockquote>
<p><strong>对值的限定</strong></p>
<p>下面的例子定义了带有一个限定且名为 “age” 的元素。age 的值不能低于 0 或者高于 120：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;age&quot;&gt;</span><br><span class="line">  &lt;xs:simpleType&gt;</span><br><span class="line">    &lt;xs:restriction base=&quot;xs:integer&quot;&gt;</span><br><span class="line">      &lt;xs:minInclusive value=&quot;0&quot;/&gt;</span><br><span class="line">      &lt;xs:maxInclusive value=&quot;120&quot;/&gt;</span><br><span class="line">    &lt;/xs:restriction&gt;</span><br><span class="line">  &lt;/xs:simpleType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p><strong>对一组值的限定</strong></p>
<p>如需把 XML 元素的内容限制为一组可接受的值，我们要使用枚举约束（enumeration constraint）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;car&quot;&gt;</span><br><span class="line">  &lt;xs:simpleType&gt;</span><br><span class="line">    &lt;xs:restriction base=&quot;xs:string&quot;&gt;</span><br><span class="line">      &lt;xs:enumeration value=&quot;Audi&quot;/&gt;</span><br><span class="line">      &lt;xs:enumeration value=&quot;Golf&quot;/&gt;</span><br><span class="line">      &lt;xs:enumeration value=&quot;BMW&quot;/&gt;</span><br><span class="line">    &lt;/xs:restriction&gt;</span><br><span class="line">  &lt;/xs:simpleType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>上面的例子也可以被写为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;car&quot; type=&quot;carType&quot;/&gt;</span><br><span class="line">&lt;xs:simpleType name=&quot;carType&quot;&gt;</span><br><span class="line">  &lt;xs:restriction base=&quot;xs:string&quot;&gt;</span><br><span class="line">    &lt;xs:enumeration value=&quot;Audi&quot;/&gt;</span><br><span class="line">    &lt;xs:enumeration value=&quot;Golf&quot;/&gt;</span><br><span class="line">    &lt;xs:enumeration value=&quot;BMW&quot;/&gt;</span><br><span class="line">  &lt;/xs:restriction&gt;</span><br><span class="line">&lt;/xs:simpleType&gt;</span><br></pre></td></tr></table></figure>
<p>注意： 在这种情况下，类型 “carType” 可被其他元素使用，因为它不是 “car” 元素的组成部分。</p>
<p><strong>对一系列值的限定</strong></p>
<p>如需把 XML 元素的内容限制定义为一系列可使用的数字或字母，我们要使用模式约束（pattern constraint）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;letter&quot;&gt;</span><br><span class="line">    &lt;xs:simpleType&gt;</span><br><span class="line">        &lt;xs:restriction base=&quot;xs:string&quot;&gt;</span><br><span class="line">            &lt;!-- 实际应用中取下列任一元素 --&gt;</span><br><span class="line">            &lt;!-- 只接受小写字母 a - z 其中的一个 --&gt;</span><br><span class="line">            &lt;xs:pattern value=&quot;[a-z]&quot;/&gt;</span><br><span class="line">            &lt;!-- 只接受大写字母 A - Z 其中的三个 --&gt;</span><br><span class="line">            &lt;xs:pattern value=&quot;[A-Z][A-Z][A-Z]&quot;/&gt;</span><br><span class="line">            &lt;!-- 只接受 a - z 中零个或多个字母 --&gt;</span><br><span class="line">            &lt;xs:pattern value=&quot;([a-z])*&quot;/&gt;</span><br><span class="line">            &lt;!-- 只接受一对或多对字母，每对字母由一个小写字母后跟一个大写字母组成 --&gt;</span><br><span class="line">            &lt;xs:pattern value=&quot;([a-z][A-Z])+&quot;/&gt;</span><br><span class="line">            &lt;!-- 只接受 male 或者 female --&gt;</span><br><span class="line">            &lt;xs:pattern value=&quot;male|female&quot;/&gt;</span><br><span class="line">            &lt;!-- 只接受由 8 个字符组成的一行字符，这些字符必须是大写或小写字母 a - z 亦或数字 0 - 9 --&gt;</span><br><span class="line">            &lt;xs:pattern value=&quot;[a-zA-Z0-9]&#123;8&#125;&quot;/&gt;</span><br><span class="line">        &lt;/xs:restriction&gt;</span><br><span class="line">    &lt;/xs:simpleType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p><strong>对空白字符的限定</strong></p>
<p>如需规定对空白字符（whitespace characters）的处理方式，需要使用 whiteSpace 限定。<br>下面的例子定义了带有一个限定的名为 “address” 的元素。这个 whiteSpace 限定被设置为 “preserve”，这意味着 XML 处理器不会移除任何空白字符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;address&quot;&gt;</span><br><span class="line">    &lt;xs:simpleType&gt;</span><br><span class="line">        &lt;xs:restriction base=&quot;xs:string&quot;&gt;</span><br><span class="line">            &lt;!-- 实际应用中取下列任一元素 --&gt;</span><br><span class="line">            &lt;!-- 不会移除任何空白字符 --&gt;</span><br><span class="line">            &lt;xs:whiteSpace value=&quot;preserve&quot;/&gt;</span><br><span class="line">            &lt;!-- 将移除所有空白字符（换行、回车、空格以及制表符） --&gt;</span><br><span class="line">            &lt;xs:whiteSpace value=&quot;replace&quot;/&gt;</span><br><span class="line">            &lt;!-- 将移除所有空白字符（换行、回车、空格以及制表符会被替换为空格，开头和结尾的空格会被移除，而多个连续的空格会被缩减为一个单一的空格） --&gt;</span><br><span class="line">            &lt;xs:whiteSpace value=&quot;collapse&quot;/&gt;</span><br><span class="line">        &lt;/xs:restriction&gt;</span><br><span class="line">    &lt;/xs:simpleType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p><strong>对长度的限定</strong></p>
<p>如需限制元素中值的长度，需要使用 length、maxLength 以及 minLength 限定。<br>本例定义了带有一个限定且名为 “password” 的元素。其值必须精确到 8 个字符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;password&quot;&gt;</span><br><span class="line">    &lt;xs:simpleType&gt;</span><br><span class="line">        &lt;xs:restriction base=&quot;xs:string&quot;&gt;</span><br><span class="line">            &lt;!-- 值必须精确到 8 个字符 --&gt;</span><br><span class="line">            &lt;xs:length value=&quot;8&quot;/&gt;</span><br><span class="line">            &lt;!-- 值最小为 5 个字符，最大为 8 个字符 --&gt;</span><br><span class="line">            &lt;xs:minLength value=&quot;5&quot;/&gt;</span><br><span class="line">            &lt;xs:maxLength value=&quot;8&quot;/&gt;</span><br><span class="line">        &lt;/xs:restriction&gt;</span><br><span class="line">    &lt;/xs:simpleType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p><strong>数据类型的限定</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">限定</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">enumeration</td>
<td style="text-align:left">定义可接受值的一个列表</td>
</tr>
<tr>
<td style="text-align:left">fractionDigits</td>
<td style="text-align:left">定义所允许的最大的小数位数。必须大于等于0。</td>
</tr>
<tr>
<td style="text-align:left">length</td>
<td style="text-align:left">定义所允许的字符或者列表项目的精确数目。必须大于或等于0。</td>
</tr>
<tr>
<td style="text-align:left">maxExclusive</td>
<td style="text-align:left">定义数值的上限。所允许的值必须小于此值。</td>
</tr>
<tr>
<td style="text-align:left">maxInclusive</td>
<td style="text-align:left">定义数值的上限。所允许的值必须小于或等于此值。</td>
</tr>
<tr>
<td style="text-align:left">maxLength</td>
<td style="text-align:left">定义所允许的字符或者列表项目的最大数目。必须大于或等于0。</td>
</tr>
<tr>
<td style="text-align:left">minExclusive</td>
<td style="text-align:left">定义数值的下限。所允许的值必需大于此值。</td>
</tr>
<tr>
<td style="text-align:left">minInclusive</td>
<td style="text-align:left">定义数值的下限。所允许的值必需大于或等于此值。</td>
</tr>
<tr>
<td style="text-align:left">minLength</td>
<td style="text-align:left">定义所允许的字符或者列表项目的最小数目。必须大于或等于0。</td>
</tr>
<tr>
<td style="text-align:left">pattern</td>
<td style="text-align:left">定义可接受的字符的精确序列。</td>
</tr>
<tr>
<td style="text-align:left">totalDigits</td>
<td style="text-align:left">定义所允许的阿拉伯数字的精确位数。必须大于0。</td>
</tr>
<tr>
<td style="text-align:left">whiteSpace</td>
<td style="text-align:left">定义空白字符（换行、回车、空格以及制表符）的处理方式。</td>
</tr>
</tbody>
</table>
<h2 id="复合元素"><a href="#复合元素" class="headerlink" title="复合元素"></a>复合元素</h2><blockquote>
<p>复合元素指包含其他元素及/或属性的 XML 元素。</p>
<ul>
<li>空元素</li>
<li>包含其他元素的元素</li>
<li>仅包含文本的元素</li>
<li>包含元素和文本的元素</li>
</ul>
<p>上述元素均可包含属性。</p>
</blockquote>
<p><strong>定义复合元素</strong></p>
<p>这个复合 XML 元素，”employee”，仅包含其他元素：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;employee&gt;</span><br><span class="line">    &lt;firstname&gt;John&lt;/firstname&gt;</span><br><span class="line">    &lt;lastname&gt;Smith&lt;/lastname&gt;</span><br><span class="line">&lt;/employee&gt;</span><br></pre></td></tr></table></figure>
<p>在 XML Schema 中，有两种方式来定义复合元素：</p>
<ol>
<li>通过命名此元素，可直接对 “employee” 元素进行声明：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;employee&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:sequence&gt;</span><br><span class="line">      &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">      &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;/xs:sequence&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>假如使用上面所描述的方法，那么仅有 “employee” 可使用所规定的复合类型。请注意其子元素，”firstname” 以及 “lastname”，被包围在指示器 <code>&lt;sequence&gt;</code> 中。这意味着子元素必须以它们被声明的次序出现。</p>
<ol>
<li>“employee” 元素可以使用 type 属性，这个属性的作用是引用要使用的复合类型的名称：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;employee&quot; type=&quot;personinfo&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:complexType name=&quot;personinfo&quot;&gt;</span><br><span class="line">  &lt;xs:sequence&gt;</span><br><span class="line">    &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">  &lt;/xs:sequence&gt;</span><br><span class="line">&lt;/xs:complexType&gt;</span><br></pre></td></tr></table></figure>
<p>如果使用了上面所描述的方法，那么若干元素均可以使用相同的复合类型：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;employee&quot; type=&quot;personinfo&quot;/&gt;</span><br><span class="line">&lt;xs:element name=&quot;student&quot; type=&quot;personinfo&quot;/&gt;</span><br><span class="line">&lt;xs:element name=&quot;member&quot; type=&quot;personinfo&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:complexType name=&quot;personinfo&quot;&gt;</span><br><span class="line">  &lt;xs:sequence&gt;</span><br><span class="line">    &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">  &lt;/xs:sequence&gt;</span><br><span class="line">&lt;/xs:complexType&gt;</span><br></pre></td></tr></table></figure>
<p>也可以在已有的复合元素之上以某个复合元素为基础，然后添加一些元素：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;employee&quot; type=&quot;fullpersoninfo&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:complexType name=&quot;personinfo&quot;&gt;</span><br><span class="line">  &lt;xs:sequence&gt;</span><br><span class="line">    &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">  &lt;/xs:sequence&gt;</span><br><span class="line">&lt;/xs:complexType&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:complexType name=&quot;fullpersoninfo&quot;&gt;</span><br><span class="line">  &lt;xs:complexContent&gt;</span><br><span class="line">    &lt;xs:extension base=&quot;personinfo&quot;&gt;</span><br><span class="line">      &lt;xs:sequence&gt;</span><br><span class="line">        &lt;xs:element name=&quot;address&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">        &lt;xs:element name=&quot;city&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">        &lt;xs:element name=&quot;country&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">      &lt;/xs:sequence&gt;</span><br><span class="line">    &lt;/xs:extension&gt;</span><br><span class="line">  &lt;/xs:complexContent&gt;</span><br><span class="line">&lt;/xs:complexType&gt;</span><br></pre></td></tr></table></figure>
<h3 id="复合类型-空元素"><a href="#复合类型-空元素" class="headerlink" title="复合类型-空元素"></a><strong>复合类型-空元素</strong></h3><blockquote>
<p>空的复合元素不能包含内容，只能含有属性。</p>
</blockquote>
<p>一个空的 XML 元素：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;product prodid=&quot;1345&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>上面的 “product” 元素根本没有内容。为了定义无内容的类型，就必须声明一个在其内容中只能包含元素的类型，但是实际上并不会声明任何元素，比如这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;product&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">        &lt;xs:complexContent&gt;</span><br><span class="line">            &lt;xs:restriction base=&quot;xs:integer&quot;&gt;</span><br><span class="line">                &lt;xs:attribute name=&quot;prodid&quot; type=&quot;xs:positiveInteger&quot;/&gt;</span><br><span class="line">            &lt;/xs:restriction&gt;</span><br><span class="line">        &lt;/xs:complexContent&gt;</span><br><span class="line">    &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>在上面的例子中，定义了一个带有复合内容的复合类型。complexContent 元素给出的信号是，打算限定或者拓展某个复合类型的内容模型，而 integer 限定则声明了一个属性但不会引入任何的元素内容。<br>但是，也可以更加紧凑地声明此 “product” 元素：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;product&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:attribute name=&quot;prodid&quot; type=&quot;xs:positiveInteger&quot;/&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>或者可以为一个 complexType 元素起一个名字，然后为 “product” 元素设置一个 type 属性并引用这个 complexType 名称（通过使用此方法，若干个元素均可引用相同的复合类型）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;product&quot; type=&quot;prodtype&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:complexType name=&quot;prodtype&quot;&gt;</span><br><span class="line">  &lt;xs:attribute name=&quot;prodid&quot; type=&quot;xs:positiveInteger&quot;/&gt;</span><br><span class="line">&lt;/xs:complexType&gt;</span><br></pre></td></tr></table></figure>
<h3 id="复合类型-仅含元素"><a href="#复合类型-仅含元素" class="headerlink" title="复合类型-仅含元素"></a><strong>复合类型-仅含元素</strong></h3><blockquote>
<p>“仅含元素”的复合类型元素是只能包含其他元素的元素。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;person&gt;</span><br><span class="line">    &lt;firstname&gt;John&lt;/firstname&gt;</span><br><span class="line">    &lt;lastname&gt;Smith&lt;/lastname&gt;</span><br><span class="line">&lt;/person&gt;</span><br></pre></td></tr></table></figure>
<p>可在 schema 中这样定义 “person” 元素：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;person&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:sequence&gt;</span><br><span class="line">      &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">      &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;/xs:sequence&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>注意，它意味着被定义的元素必须按上面的次序出现在 “person” 元素中。<br>或者可以为 complexType 元素设定一个名称，并让 “person” 元素的 type 属性来引用此名称（如使用此方法，若干元素均可引用相同的复合类型）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;person&quot; type=&quot;persontype&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:complexType name=&quot;persontype&quot;&gt;</span><br><span class="line">  &lt;xs:sequence&gt;</span><br><span class="line">    &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">  &lt;/xs:sequence&gt;</span><br><span class="line">&lt;/xs:complexType&gt;</span><br></pre></td></tr></table></figure>
<h3 id="复合类型-仅含文本"><a href="#复合类型-仅含文本" class="headerlink" title="复合类型-仅含文本"></a><strong>复合类型-仅含文本</strong></h3><blockquote>
<p>含文本的复合元素可包含文本和属性。</p>
</blockquote>
<p>此类型仅包含简易的内容（文本和属性），因此要向此内容添加 simpleContent 元素。当使用简易内容时，我们就必须在 simpleContent 元素内定义扩展或限定：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;somename&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:simpleContent&gt;</span><br><span class="line">      &lt;xs:extension base=&quot;basetype&quot;&gt;</span><br><span class="line">        ....</span><br><span class="line">        ....</span><br><span class="line">      &lt;/xs:extension&gt;</span><br><span class="line">    &lt;/xs:simpleContent&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;somename&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:simpleContent&gt;</span><br><span class="line">      &lt;xs:restriction base=&quot;basetype&quot;&gt;</span><br><span class="line">        ....</span><br><span class="line">        ....</span><br><span class="line">      &lt;/xs:restriction&gt;</span><br><span class="line">    &lt;/xs:simpleContent&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>提示： 请使用 extension 或 restriction 元素来扩展或限制元素的基本简易类型。 这里有一个 XML 元素的例子，”shoesize”，其中仅包含文本：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;shoesize country=&quot;france&quot;&gt;35&lt;/shoesize&gt;</span><br></pre></td></tr></table></figure>
<p>下面这个例子声明了一个复合类型，其内容被定义为整数值，并且 “shoesize” 元素含有名为 “country” 的属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;shoesize&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:simpleContent&gt;</span><br><span class="line">      &lt;xs:extension base=&quot;xs:integer&quot;&gt;</span><br><span class="line">        &lt;xs:attribute name=&quot;country&quot; type=&quot;xs:string&quot; /&gt;</span><br><span class="line">      &lt;/xs:extension&gt;</span><br><span class="line">    &lt;/xs:simpleContent&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>也可为 complexType 元素设定一个名称，并让 “shoesize” 元素的 type 属性来引用此名称（通过使用此方法，若干元素均可引用相同的复合类型）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;shoesize&quot; type=&quot;shoetype&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:complexType name=&quot;shoetype&quot;&gt;</span><br><span class="line">  &lt;xs:simpleContent&gt;</span><br><span class="line">    &lt;xs:extension base=&quot;xs:integer&quot;&gt;</span><br><span class="line">      &lt;xs:attribute name=&quot;country&quot; type=&quot;xs:string&quot; /&gt;</span><br><span class="line">    &lt;/xs:extension&gt;</span><br><span class="line">  &lt;/xs:simpleContent&gt;</span><br><span class="line">&lt;/xs:complexType&gt;</span><br></pre></td></tr></table></figure>
<h3 id="复合类型-混合内容"><a href="#复合类型-混合内容" class="headerlink" title="复合类型-混合内容"></a><strong>复合类型-混合内容</strong></h3><blockquote>
<p>混合的复合类型可包含属性、元素以及文本。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;letter&gt;</span><br><span class="line">    Dear Mr.&lt;name&gt;John Smith&lt;/name&gt;.</span><br><span class="line">    Your order &lt;orderid&gt;1032&lt;/orderid&gt;</span><br><span class="line">    will be shipped on &lt;shipdate&gt;2001-07-13&lt;/shipdate&gt;.</span><br><span class="line">&lt;/letter&gt;</span><br></pre></td></tr></table></figure>
<p>下面这个 schema 声明了这个 “letter” 元素：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;letter&quot;&gt;</span><br><span class="line">  &lt;xs:complexType mixed=&quot;true&quot;&gt;</span><br><span class="line">    &lt;xs:sequence&gt;</span><br><span class="line">      &lt;xs:element name=&quot;name&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">      &lt;xs:element name=&quot;orderid&quot; type=&quot;xs:positiveInteger&quot;/&gt;</span><br><span class="line">      &lt;xs:element name=&quot;shipdate&quot; type=&quot;xs:date&quot;/&gt;</span><br><span class="line">    &lt;/xs:sequence&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>注意： 为了使字符数据可以出现在 “letter” 的子元素之间，mixed 属性必须被设置为 “true”。<code>&lt;xs:sequence&gt;</code> 标签 (name、orderid 以及 shipdate ) 意味着被定义的元素必须依次出现在 “letter” 元素内部。<br>也可以为 complexType 元素起一个名字，并让 “letter” 元素的 type 属性引用 complexType 的这个名称（通过这个方法，若干元素均可引用同一个复合类型）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;letter&quot; type=&quot;lettertype&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:complexType name=&quot;lettertype&quot; mixed=&quot;true&quot;&gt;</span><br><span class="line">  &lt;xs:sequence&gt;</span><br><span class="line">    &lt;xs:element name=&quot;name&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;xs:element name=&quot;orderid&quot; type=&quot;xs:positiveInteger&quot;/&gt;</span><br><span class="line">    &lt;xs:element name=&quot;shipdate&quot; type=&quot;xs:date&quot;/&gt;</span><br><span class="line">  &lt;/xs:sequence&gt;</span><br><span class="line">&lt;/xs:complexType&gt;</span><br></pre></td></tr></table></figure>
<h2 id="指示器"><a href="#指示器" class="headerlink" title="指示器"></a>指示器</h2><blockquote>
<p>通过指示器，可以控制在文档中使用元素的方式。</p>
<ul>
<li>Order 指示器：<ul>
<li>All</li>
<li>Choice</li>
<li>Sequence</li>
</ul>
</li>
<li>Occurrence 指示器：<ul>
<li>maxOccurs</li>
<li>minOccurs</li>
</ul>
</li>
<li>Group 指示器：<ul>
<li>Group name</li>
<li>attributeGroup name</li>
</ul>
</li>
</ul>
</blockquote>
<p><strong>Order 指示器</strong></p>
<blockquote>
<p>Order 指示器用于定义元素的顺序。</p>
</blockquote>
<ul>
<li>All 指示器<br>规定子元素可以按照任意顺序出现，且每个子元素必须只出现一次：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;person&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:all&gt;</span><br><span class="line">      &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">      &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;/xs:all&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>注意： 当使用 all 指示器时，可以把 <code>&lt;minOccurs&gt;</code> 设置为 0 或者 1，而只能把 <code>&lt;maxOccurs&gt;</code> 指示器设置为 1。</p>
<ul>
<li>Choice 指示器<br>规定可出现某个子元素或者可出现另外一个子元素（非此即彼）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;person&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:choice&gt;</span><br><span class="line">      &lt;xs:element name=&quot;employee&quot; type=&quot;employee&quot;/&gt;</span><br><span class="line">      &lt;xs:element name=&quot;member&quot; type=&quot;member&quot;/&gt;</span><br><span class="line">    &lt;/xs:choice&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>Sequence 指示器<br>规定子元素必须按照特定的顺序出现：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;person&quot;&gt;</span><br><span class="line">   &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:sequence&gt;</span><br><span class="line">      &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">      &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;/xs:sequence&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p><strong>Occurrence 指示器</strong></p>
<blockquote>
<p>用于定义某个元素出现的频率。</p>
</blockquote>
<p>注意： 对于所有的 “Order” 和 “Group” 指示器（any、all、choice、sequence、group name 以及 group reference），其中的 maxOccurs 以及 minOccurs 的默认值均为 1。</p>
<ul>
<li>maxOccurs 指示器<br>可规定某个元素可出现的最大次数：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;person&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:sequence&gt;</span><br><span class="line">      &lt;xs:element name=&quot;full_name&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">      &lt;xs:element name=&quot;child_name&quot; type=&quot;xs:string&quot; maxOccurs=&quot;10&quot;/&gt;</span><br><span class="line">    &lt;/xs:sequence&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>上面的例子表明，子元素 “child_name” 可在 “person” 元素中最少出现一次（其中 minOccurs 的默认值是 1），最多出现 10 次。</p>
<ul>
<li>minOccurs 指示器<br>可规定某个元素能够出现的最小次数：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;person&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:sequence&gt;</span><br><span class="line">      &lt;xs:element name=&quot;full_name&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">      &lt;xs:element name=&quot;child_name&quot; type=&quot;xs:string&quot;</span><br><span class="line">      maxOccurs=&quot;10&quot; minOccurs=&quot;0&quot;/&gt;</span><br><span class="line">    &lt;/xs:sequence&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>上面的例子表明，子元素 “child_name” 可在 “person” 元素中出现最少 0 次，最多出现 10 次。<br>如需使某个元素的出现次数不受限制，请使用 maxOccurs=”unbounded” 这个声明：<br>一个实际的例子：</p>
<p><strong>Group 指示器</strong></p>
<blockquote>
<p>用于定义相关的数批元素。</p>
</blockquote>
<ul>
<li>元素组<br>通过 group 声明进行定义：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:group name=&quot;groupname&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;/xs:group&gt;</span><br></pre></td></tr></table></figure>
<p>必须在 group 声明内部定义一个 all、choice 或者 sequence 元素。下面这个例子定义了名为 “persongroup” 的 group，它定义了必须按照精确的顺序出现的一组元素：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:group name=&quot;persongroup&quot;&gt;</span><br><span class="line">  &lt;xs:sequence&gt;</span><br><span class="line">    &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;xs:element name=&quot;birthday&quot; type=&quot;xs:date&quot;/&gt;</span><br><span class="line">  &lt;/xs:sequence&gt;</span><br><span class="line">&lt;/xs:group&gt;</span><br></pre></td></tr></table></figure>
<p>在把 group 定义完毕以后，就可以在另一个定义中引用它了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:group name=&quot;persongroup&quot;&gt;</span><br><span class="line">  &lt;xs:sequence&gt;</span><br><span class="line">    &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;xs:element name=&quot;birthday&quot; type=&quot;xs:date&quot;/&gt;</span><br><span class="line">  &lt;/xs:sequence&gt;</span><br><span class="line">&lt;/xs:group&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:element name=&quot;person&quot; type=&quot;personinfo&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:complexType name=&quot;personinfo&quot;&gt;</span><br><span class="line">  &lt;xs:sequence&gt;</span><br><span class="line">    &lt;xs:group ref=&quot;persongroup&quot;/&gt;</span><br><span class="line">    &lt;xs:element name=&quot;country&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">  &lt;/xs:sequence&gt;</span><br><span class="line">&lt;/xs:complexType&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>属性组<br>通过 attributeGroup 声明来进行定义：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:attributeGroup name=&quot;groupname&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;/xs:attributeGroup&gt;</span><br></pre></td></tr></table></figure>
<p>下面这个例子定义了名为 “personattrgroup” 的一个属性组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:attributeGroup name=&quot;personattrgroup&quot;&gt;</span><br><span class="line">  &lt;xs:attribute name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">  &lt;xs:attribute name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">  &lt;xs:attribute name=&quot;birthday&quot; type=&quot;xs:date&quot;/&gt;</span><br><span class="line">&lt;/xs:attributeGroup&gt;</span><br></pre></td></tr></table></figure>
<p>在已定义完毕属性组之后，就可以在另一个定义中引用它了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:attributeGroup name=&quot;personattrgroup&quot;&gt;</span><br><span class="line">  &lt;xs:attribute name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">  &lt;xs:attribute name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">  &lt;xs:attribute name=&quot;birthday&quot; type=&quot;xs:date&quot;/&gt;</span><br><span class="line">&lt;/xs:attributeGroup&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:element name=&quot;person&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:attributeGroup ref=&quot;personattrgroup&quot;/&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<h2 id="any-元素"><a href="#any-元素" class="headerlink" title="any 元素"></a>any 元素</h2><blockquote>
<p>any 元素使我们有能力通过未被 schema 规定的元素来拓展 XML 文档。</p>
</blockquote>
<p>下面这个例子是从名为 “family.xsd” 的 XML schema 中引用的片段。它展示了一个针对 “person” 元素的声明。通过使用 any 元素，我们可以通过任何元素（在 <code>&lt;lastname&gt;</code> 之后）扩展 “person” 的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;person&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:sequence&gt;</span><br><span class="line">      &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">      &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">      &lt;xs:any minOccurs=&quot;0&quot;/&gt;</span><br><span class="line">    &lt;/xs:sequence&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>现在，我们希望使用 “children” 元素来扩展 “person” 元素。这此种情况下就可以这么做，即使以上这个 schema 的作者没有声明任何 “children” 元素。<br>请看这个 schema 文件，名为 “children.xsd”：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span><br><span class="line">&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;</span><br><span class="line">targetNamespace=&quot;http://www.w3schools.com&quot;</span><br><span class="line">xmlns=&quot;http://www.w3schools.com&quot;</span><br><span class="line">elementFormDefault=&quot;qualified&quot;&gt;</span><br><span class="line">    &lt;xs:element name=&quot;children&quot;&gt;</span><br><span class="line">      &lt;xs:complexType&gt;</span><br><span class="line">        &lt;xs:sequence&gt;</span><br><span class="line">          &lt;xs:element name=&quot;childname&quot; type=&quot;xs:string&quot;</span><br><span class="line">          maxOccurs=&quot;unbounded&quot;/&gt;</span><br><span class="line">        &lt;/xs:sequence&gt;</span><br><span class="line">      &lt;/xs:complexType&gt;</span><br><span class="line">    &lt;/xs:element&gt;</span><br><span class="line">&lt;/xs:schema&gt;</span><br></pre></td></tr></table></figure>
<p>下面这个 XML 文件（名为 “Myfamily.xml”），使用了来自两个不同的 schema 中的成分，”family.xsd” 和 “children.xsd”：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span><br><span class="line">&lt;persons xmlns=&quot;http://www.microsoft.com&quot;</span><br><span class="line">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">xsi:schemaLocation=&quot;http://www.microsoft.com family.xsd</span><br><span class="line">http://www.w3schools.com children.xsd&quot;&gt;</span><br><span class="line">    &lt;person&gt;</span><br><span class="line">      &lt;firstname&gt;Hege&lt;/firstname&gt;</span><br><span class="line">      &lt;lastname&gt;Refsnes&lt;/lastname&gt;</span><br><span class="line">      &lt;children&gt;</span><br><span class="line">        &lt;childname&gt;Cecilie&lt;/childname&gt;</span><br><span class="line">      &lt;/children&gt;</span><br><span class="line">    &lt;/person&gt;</span><br><span class="line">    &lt;person&gt;</span><br><span class="line">      &lt;firstname&gt;Stale&lt;/firstname&gt;</span><br><span class="line">      &lt;lastname&gt;Refsnes&lt;/lastname&gt;</span><br><span class="line">    &lt;/person&gt;</span><br><span class="line">&lt;/persons&gt;</span><br></pre></td></tr></table></figure>
<p>上面这个 XML 文件是有效的，这是由于 schema “family.xsd” 允许我们通过在 “lastname” 元素后的可选元素来扩展 “person” 元素。</p>
<h2 id="anyAttribute"><a href="#anyAttribute" class="headerlink" title="anyAttribute"></a>anyAttribute</h2><blockquote>
<p>anyAttribute 元素使我们有能力通过未被 schema 规定的属性来扩展 XML 文档。</p>
</blockquote>
<p>下面的例子是来自名为 “family.xsd” 的 XML schema 的一个片段。它为我们展示了针对 “person” 元素的一个声明。通过使用 <code>&lt;anyAttribute&gt;</code> 元素，我们就可以向 “person” 元素添加任意数量的属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;person&quot;&gt;</span><br><span class="line">  &lt;xs:complexType&gt;</span><br><span class="line">    &lt;xs:sequence&gt;</span><br><span class="line">      &lt;xs:element name=&quot;firstname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">      &lt;xs:element name=&quot;lastname&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">    &lt;/xs:sequence&gt;</span><br><span class="line">    &lt;xs:anyAttribute/&gt;</span><br><span class="line">  &lt;/xs:complexType&gt;</span><br><span class="line">&lt;/xs:element&gt;</span><br></pre></td></tr></table></figure>
<p>现在，我们希望通过 “gender” 属性来扩展 “person” 元素。在这种情况下我们就可以这样做，即使这个 schema 的作者从未声明过任何 “gender” 属性。<br>请看这个 schema 文件，名为 “attribute.xsd”：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span><br><span class="line">&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;</span><br><span class="line">targetNamespace=&quot;http://www.w3schools.com&quot;</span><br><span class="line">xmlns=&quot;http://www.w3schools.com&quot;</span><br><span class="line">elementFormDefault=&quot;qualified&quot;&gt;</span><br><span class="line">    &lt;xs:attribute name=&quot;gender&quot;&gt;</span><br><span class="line">      &lt;xs:simpleType&gt;</span><br><span class="line">        &lt;xs:restriction base=&quot;xs:string&quot;&gt;</span><br><span class="line">          &lt;xs:pattern value=&quot;male|female&quot;/&gt;</span><br><span class="line">        &lt;/xs:restriction&gt;</span><br><span class="line">      &lt;/xs:simpleType&gt;</span><br><span class="line">    &lt;/xs:attribute&gt;</span><br><span class="line">&lt;/xs:schema&gt;</span><br></pre></td></tr></table></figure>
<p>下面这个 XML（名为 “Myfamily.xml”），使用了来自不同 schema 的成分，”family.xsd” 和 “attribute.xsd”：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span><br><span class="line">&lt;persons xmlns=&quot;http://www.microsoft.com&quot;</span><br><span class="line">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">xsi:SchemaLocation=&quot;http://www.microsoft.com family.xsd</span><br><span class="line">http://www.w3schools.com attribute.xsd&quot;&gt;</span><br><span class="line">    &lt;person gender=&quot;female&quot;&gt;</span><br><span class="line">      &lt;firstname&gt;Hege&lt;/firstname&gt;</span><br><span class="line">      &lt;lastname&gt;Refsnes&lt;/lastname&gt;</span><br><span class="line">    &lt;/person&gt;</span><br><span class="line">    &lt;person gender=&quot;male&quot;&gt;</span><br><span class="line">      &lt;firstname&gt;Stale&lt;/firstname&gt;</span><br><span class="line">      &lt;lastname&gt;Refsnes&lt;/lastname&gt;</span><br><span class="line">    &lt;/person&gt;</span><br><span class="line">&lt;/persons&gt;</span><br></pre></td></tr></table></figure>
<p>上面这个 XML 文件是有效的，这是因为 schema “family.xsd” 允许我们向 “person” 元素添加属性。</p>
<h2 id="元素替换"><a href="#元素替换" class="headerlink" title="元素替换"></a>元素替换</h2><blockquote>
<p>通过元素替换 (Element Substitution)，一个元素可对另一个元素进行替换。</p>
</blockquote>
<p><strong>元素替换</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;name&quot; type=&quot;xs:string&quot;/&gt;</span><br><span class="line">&lt;xs:element name=&quot;navn&quot; substitutionGroup=&quot;name&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:complexType name=&quot;custinfo&quot;&gt;</span><br><span class="line">  &lt;xs:sequence&gt;</span><br><span class="line">    &lt;xs:element ref=&quot;name&quot;/&gt;</span><br><span class="line">  &lt;/xs:sequence&gt;</span><br><span class="line">&lt;/xs:complexType&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:element name=&quot;customer&quot; type=&quot;custinfo&quot;/&gt;</span><br><span class="line">&lt;xs:element name=&quot;kunde&quot; substitutionGroup=&quot;customer&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>有效的 XML 文档类似这样（根据上面的 schema）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;customer&gt;</span><br><span class="line">  &lt;name&gt;John Smith&lt;/name&gt;</span><br><span class="line">&lt;/customer&gt;</span><br></pre></td></tr></table></figure>
<p>或类似这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;kunde&gt;</span><br><span class="line">  &lt;navn&gt;John Smith&lt;/navn&gt;</span><br><span class="line">&lt;/kunde&gt;</span><br></pre></td></tr></table></figure>
<p><strong>阻止元素替换</strong></p>
<p>为防止其他的元素替换某个指定的元素，须使用 block 属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;name&quot; type=&quot;xs:string&quot; block=&quot;substitution&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>某个 XML schema 的片段：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;xs:element name=&quot;name&quot; type=&quot;xs:string&quot; block=&quot;substitution&quot;/&gt;</span><br><span class="line">&lt;xs:element name=&quot;navn&quot; substitutionGroup=&quot;name&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:complexType name=&quot;custinfo&quot;&gt;</span><br><span class="line">  &lt;xs:sequence&gt;</span><br><span class="line">    &lt;xs:element ref=&quot;name&quot;/&gt;</span><br><span class="line">  &lt;/xs:sequence&gt;</span><br><span class="line">&lt;/xs:complexType&gt;</span><br><span class="line"></span><br><span class="line">&lt;xs:element name=&quot;customer&quot; type=&quot;custinfo&quot; block=&quot;substitution&quot;/&gt;</span><br><span class="line">&lt;xs:element name=&quot;kunde&quot; substitutionGroup=&quot;customer&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>合法的 XML 文档应该类似这样（根据上面的 schema）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;customer&gt;</span><br><span class="line">  &lt;name&gt;John Smith&lt;/name&gt;</span><br><span class="line">&lt;/customer&gt;</span><br></pre></td></tr></table></figure>
<p>但是下面的文档不再合法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;kunde&gt;</span><br><span class="line">  &lt;navn&gt;John Smith&lt;/navn&gt;</span><br><span class="line">&lt;/kunde&gt;</span><br></pre></td></tr></table></figure>
<p><strong>使用 substitutionGroup</strong><br>可替换元素的类型必须和主元素相同，或者从主元素衍生而来。假如可替换元素的类型与主元素的类型相同，那么就不必规定可替换元素的类型了。<br>注意，substitutionGroup 中的所有元素（主元素和可替换元素）必须被声明为<strong>全局元素</strong>，否则就无法工作！</p>
<p><strong>什么是全局元素（Global Elements）</strong><br>全局元素指 “schema” 元素的直接子元素！本地元素（Local elements）指嵌套在其他元素中的元素。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/网络/计算机网络/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zeerho">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zeerho">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/网络/计算机网络/" itemprop="url">计算机网络</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-01T09:00:00+08:00">2017-01-01</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>整理自谢希仁著《计算机网络》。</p>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>所有的因特网标准都是以 RFC（Request For Comments）的形式在因特网上发表。</p>
<p>制订因特网的正式标准要经过四个阶段 [RFC 2026]：</p>
<ul>
<li>因特网草案（Internet Draft）——还不是 RFC 文档</li>
<li>建议标准（Proposed Standard）——开始成为 RFC 文档</li>
<li>草案标准（Draft Standard）</li>
<li>因特网标准（Internet Standard）</li>
</ul>
<p><strong>通信方式大致分为两大类</strong></p>
<ul>
<li>C/S（Client/Server）<ul>
<li>B/S（Browser/Server）：C/S 的一种特例，特指客户端为浏览器的情况</li>
</ul>
</li>
<li>P2P（Peer-to-Peer）</li>
</ul>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/01/网络/计算机网络/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">zeerho</p>
              <p class="site-description motion-element" itemprop="description">Just a repo for documents</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">63</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/ZephyrHuang" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:zephyrhuang21@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zeerho</span>

  

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.0.0</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.0"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
